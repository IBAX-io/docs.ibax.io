(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{306:function(t,a,e){"use strict";e.r(a);var s=e(14),n=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"ibax-development-tutorial"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ibax-development-tutorial"}},[t._v("#")]),t._v(" IBAX Development Tutorial ")]),t._v(" "),a("h2",{attrs:{id:"getting-started-guide"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getting-started-guide"}},[t._v("#")]),t._v(" Getting Started Guide ")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#deploy-first-smart-contract-via-command-line-tool"}},[t._v("Deploy first smart contract via command line tool")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#command-line-tool-eco-development"}},[t._v("Command Line Tool Eco Development")])])]),t._v(" "),a("h2",{attrs:{id:"deployment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deployment"}},[t._v("#")]),t._v(" Deployment ")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#deploy-application-using-command-line-tools"}},[t._v("Deploy application using command line tools")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#ecological-configuration-using-command-line-tool"}},[t._v("Ecological configuration using command line tool")])])]),t._v(" "),a("h2",{attrs:{id:"advanced-guide"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#advanced-guide"}},[t._v("#")]),t._v(" Advanced Guide ")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#deploy-applications-using-application-packaging-tool"}},[t._v("Deploy applications using application packaging tool")])])]),t._v(" "),a("h2",{attrs:{id:"deploy-first-smart-contract-via-command-line-tool"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-first-smart-contract-via-command-line-tool"}},[t._v("#")]),t._v(" Deploy first smart contract via command line tool ")]),t._v(" "),a("p",[t._v("We will deploy "),a("RouterLink",{attrs:{to:"/de/concepts/thesaurus.html#smart-contract"}},[t._v("smart contracts")]),t._v(" on the IBAX blockchain via the "),a("a",{attrs:{href:"https://github.com/IBAX-io/ibax-cli",target:"_blank",rel:"noopener noreferrer"}},[t._v("command line tool"),a("OutboundLink")],1),t._v(", and learn how to invoke smart contracts.\nAs our first smart contract, we deployed it to "),a("RouterLink",{attrs:{to:"/de/concepts/blockchain-layers.html"}},[t._v("local test network")]),t._v(" How to deploy a local network you can refer to "),a("RouterLink",{attrs:{to:"/de/howtos/deployment.html"}},[t._v("Network Deployment")]),t._v(" ,\nso you can deploy and run it as you like without any overhead.")],1),t._v(" "),a("h3",{attrs:{id:"create-application"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-application"}},[t._v("#")]),t._v(" Create application ")]),t._v(" "),a("p",[t._v("Call the contract @1NewApplication to create the application, which has an application name parameter and a modify "),a("RouterLink",{attrs:{to:"/de/concepts/about-the-platform.html#access-rights-control-mechanism"}},[t._v("permission parameter")])],1),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('1  $ ibax-cli console\n2    \n3  Welcome to the IBAX console!\n4  To exit, press ctrl-d or type exit\n5  >callContract @1NewApplication {"Name": "testapp", "Conditions": "ContractConditions(\\"@1DeveloperCondition\\")"}\n6  \n7  {\n8    "block_id": 1217,\n9    "hash": "6327161d2202c33c06d34ab4ed9b509c05fc2cbb15cf260c6d3d404a6f640028",\n10   "penalty": 0,\n11   "err": "31"\n12 }\n')])])]),a("p",[t._v("The following is explained by line:")]),t._v(" "),a("ul",[a("li",[t._v("Line 1, start command line terminal")]),t._v(" "),a("li",[t._v("Line 5, call the contract @1NewApplication to create an application with the application name "),a("code",[t._v("testapp")]),t._v(" and the application modification permission "),a("code",[t._v("@1DeveloperCondition")]),t._v(" with developer permission")]),t._v(" "),a("li",[t._v("Row 8, the block id generated by the transaction")]),t._v(" "),a("li",[t._v("Line 9, the block hash generated by the transaction")]),t._v(" "),a("li",[t._v("Line 10, if the transaction execution fails (0: no penalty 1: penalty)")]),t._v(" "),a("li",[t._v("On line 11, if the transaction execution fails, an error text message is returned, and if the block id is returned, the err field is the id of the application")])]),t._v(" "),a("p",[t._v("Of course if you want to see what fields and field types are available in this contract, you can call the "),a("code",[t._v("getContractInfo")]),t._v(" method, which will return the contract information as follows:")]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('>getContractInfo @1NewApplication\n\n{\n    "id": 5022,\n    "state": 1,\n    "tableid": "22",\n    "walletid": "0",\n    "tokenid": "1",\n    "address": "0000-0000-0000-0000-0000",\n    "fields": [\n        {\n            "name": "Name",\n            "type": "string",\n            "optional": false\n        },\n        {\n            "name": "Conditions",\n            "type": "string",\n            "optional": false\n        },\n        {\n            "name": "VotingId",\n            "type": "int",\n            "optional": true\n        }\n    ],\n    "name": "@1NewApplication",\n    "app_id": 1,\n    "ecosystem": 1,\n    "conditions": "ContractConditions(\\"@1DeveloperCondition\\")"\n}\n')])])]),a("p",[t._v("The "),a("code",[t._v("fields")]),t._v(" field is the parameters of the contract, including the name of the parameter "),a("code",[t._v("name")]),t._v(", "),a("code",[t._v("type")]),t._v(", "),a("code",[t._v("optional")]),t._v(",\n"),a("code",[t._v("Name")]),t._v(" and "),a("code",[t._v("Conditions")]),t._v(" are required, "),a("code",[t._v("VotingId")]),t._v(" is optional, refer to "),a("RouterLink",{attrs:{to:"/de/reference/api2.html#contract-name"}},[t._v("contract/name")]),t._v(" API method")],1),t._v(" "),a("h3",{attrs:{id:"writing-contracts"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#writing-contracts"}},[t._v("#")]),t._v(" Writing contracts ")]),t._v(" "),a("p",[t._v("We use "),a("RouterLink",{attrs:{to:"/de/topics/script.html#needle-contract-language"}},[t._v("Needle")]),t._v(" to write a smart contract that\nWe implement a simple addition operation, the source code of the contract is as follows, we save the contract as "),a("code",[t._v("SumMath.sim")])],1),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("1    contract SumMath {\n2        data {\n3            A int\n4            B int\n5        }\n6        conditions {\n7    \n8        }\n9        action {\n10            var sum int\n11            sum = $A + $B\n12            $result = sum\n13        }\n14    }\n")])])]),a("p",[t._v("The following is explained by line:")]),t._v(" "),a("ul",[a("li",[t._v("In line 1, we define a contract with the name SumMath")]),t._v(" "),a("li",[t._v("Line 2, "),a("RouterLink",{attrs:{to:"/de/topics/script.html#data-section"}},[t._v("Data Section")])],1),t._v(" "),a("li",[t._v("In lines 3-4, we define two input 64-bit integer-type parameters "),a("code",[t._v("A B")])]),t._v(" "),a("li",[t._v("Line 6, "),a("RouterLink",{attrs:{to:"/de/topics/script.html#conditions-section"}},[t._v("Conditional Section")])],1),t._v(" "),a("li",[t._v("Line 9, "),a("RouterLink",{attrs:{to:"/de/topics/script.html#action-section"}},[t._v("Operations Section")]),t._v(" We define a variable sum to receive the result of A+B.\nAssign the value of sum to $result, as the result of the contract. Of course it is possible to assign the value of A+B to $result directly, but it can be shown as an example.")],1)]),t._v(" "),a("h3",{attrs:{id:"create-contract"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-contract"}},[t._v("#")]),t._v(" Create Contract ")]),t._v(" "),a("p",[t._v("There are two ways to create a contract, the first of which is:\nIn the first step we write a contract parameter file in json format:")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ApplicationId"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Value"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"contract SumMath {\\n    data {\\n        A int\\n        B int\\n    }\\n    conditions {\\n\\n    }\\n    action {\\n        var sum int\\n        sum = $A + $B\\n        $result = sum\\n    }\\n}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Conditions"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ContractConditions(\\"@1DeveloperCondition\\")"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("where "),a("code",[t._v("ApplicationId")]),t._v(" is the application id, "),a("code",[t._v("Value")]),t._v(" is the contract source code, need to escape special characters, "),a("code",[t._v("Conditions")]),t._v(" is the contract modification rights")]),t._v(" "),a("p",[t._v("We named it SumMathParams.json")]),t._v(" "),a("p",[t._v("The second step calls to create a contract @1NewContract")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('1    >callContract @1NewContract -f=./data/SumMathParams.json\n2    {\n3        "block_id": 1238,\n4        "hash": "f3fe7aff8a613c96299723b7e9af0682aa8cabe7becf67a485e2a77a974f58b6",\n5        "penalty": 0,\n6        "err": "328"\n7    }\n')])])]),a("p",[t._v("Second method:\nThe saved contract source file is passed directly into the contract parameters in the parameter format "),a("code",[t._v("paramsName")]),t._v(" + "),a("code",[t._v("-")]),t._v(' + "file",'),a("code",[t._v("paramsName-file")]),t._v(" as follows:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1NewContract "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ApplicationId"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Value-file"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SumMath.sim"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Conditions"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("    \n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"block_id"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2055")]),t._v(",\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hash"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cdf25060669cf7cba137278...26ca463fd5d458f3402a5f0137f693db"')]),t._v(",\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"penalty"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(",\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"err"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"368"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("The following is explained by line:")]),t._v(" "),a("ul",[a("li",[t._v("Line 1: Call the contract @1NewContract to create the contract, -f uses the file to import the contract parameters")]),t._v(" "),a("li",[t._v("Row 3, the block id generated by the transaction")]),t._v(" "),a("li",[t._v("Line 4, the block hash generated by the transaction")]),t._v(" "),a("li",[t._v("Line 5, if the transaction execution fails (0: no penalty 1: penalty)")]),t._v(" "),a("li",[t._v("Line 6, if the transaction execution fails, an error text message is returned, and if the block id is returned, the err field is the id of the contract")])]),t._v(" "),a("p",[t._v("Let's try calling the contract we just deployed")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @5SumMath "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"A"')]),t._v(":1, "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"B"')]),t._v(":2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("  \n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"block_id"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1239")]),t._v(",\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hash"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"7fa09da0b9f65634119a910f9d91aaf4927208278efd62961499ef7e4f4c8c9c"')]),t._v(",\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"penalty"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(",\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"err"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("The call is completed and the result is as expected, as explained below by line:")]),t._v(" "),a("ul",[a("li",[t._v("The first line calls the contract, here we deploy the contract to the ecology with ecological id 5, of course, if the current ecological id is 5, in the same ecology, you can also call "),a("code",[t._v('callContract SumMath {"A":1, "B":2}')]),t._v(" in this way")]),t._v(" "),a("li",[t._v("Line 3, the block id generated by the transaction")]),t._v(" "),a("li",[t._v("Line 4, the block hash generated by the transaction")]),t._v(" "),a("li",[t._v("Line 5, if the transaction execution fails (0: no penalty 1: penalty)")]),t._v(" "),a("li",[t._v("Line 6, if the transaction execution fails, an error text message is returned, and if the block id is returned, the err field is the result of the contract, which is the value of "),a("code",[t._v("$result")])])]),t._v(" "),a("h2",{attrs:{id:"command-line-tool-eco-development"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#command-line-tool-eco-development"}},[t._v("#")]),t._v(" Command Line Tool Eco Development ")]),t._v(" "),a("p",[t._v("In this tutorial, you will learn how to:")]),t._v(" "),a("ul",[a("li",[t._v("1."),a("a",{attrs:{href:"#step-1-create-ecosystem"}},[t._v("Create Ecosystem")])]),t._v(" "),a("li",[t._v("2."),a("a",{attrs:{href:"#step-2-create-application"}},[t._v("Create Application")])]),t._v(" "),a("li",[t._v("3."),a("a",{attrs:{href:"#step-3-create-table"}},[t._v("Create Table")])]),t._v(" "),a("li",[t._v("4."),a("a",{attrs:{href:"#step-4-create-application-parameters"}},[t._v("Create Application Parameters")])]),t._v(" "),a("li",[t._v("5."),a("a",{attrs:{href:"#step-5-create-contract-deploy-contract"}},[t._v("Create & Deploy Contract")])]),t._v(" "),a("li",[t._v("6."),a("a",{attrs:{href:"#step-6-create-ecological-parameters"}},[t._v("Create Ecological Parameters")])]),t._v(" "),a("li",[t._v("7."),a("a",{attrs:{href:"#step-7-add-localization"}},[t._v("Add Localization")])]),t._v(" "),a("li",[t._v("8."),a("a",{attrs:{href:"#step-8-modify-the-contract"}},[t._v("Modify Contract")])]),t._v(" "),a("li",[t._v("9."),a("a",{attrs:{href:"#step-9-modify-data-table-permissions"}},[t._v("Modify data table permissions")])])]),t._v(" "),a("p",[t._v("In order to understand more clearly how the IBAX ecology and applications are like and what they do, it is preferred that we understand where the ecology and applications should belong, and we can understand better with a simple mind map:\n"),a("img",{attrs:{src:"/ibax-eco.png",alt:"image"}})]),t._v(" "),a("p",[t._v("It can be seen that IBAX networks can have many "),a("RouterLink",{attrs:{to:"/de/concepts/about-the-platform.html#ecolib"}},[t._v("Ecosystems")]),t._v(".\nEach ecology can have multiple "),a("RouterLink",{attrs:{to:"/de/concepts/about-the-platform.html#applications"}},[t._v("applications")]),t._v(".\nEach application has "),a("RouterLink",{attrs:{to:"/de/concepts/thesaurus.html#smart-contract"}},[t._v("contract")]),t._v(".\n"),a("RouterLink",{attrs:{to:"/de/concepts/about-the-platform.html#tables"}},[t._v("Tables")]),t._v(".\nEcology has ecological parameters, application has application parameters")],1),t._v(" "),a("h3",{attrs:{id:"step-1-create-ecosystem"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-1-create-ecosystem"}},[t._v("#")]),t._v(" Step 1 Create Ecosystem ")]),t._v(" "),a("p",[t._v("We start by creating an ecology using the "),a("a",{attrs:{href:"https://github.com/IBAX-io/ibax-cli",target:"_blank",rel:"noopener noreferrer"}},[t._v("command line tool"),a("OutboundLink")],1),t._v(", calling the contract @1NewEcosystem.\nIf you want to change the ecological name, you can call the "),a("code",[t._v("@1EditEcosystemName")]),t._v(" contract.")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("    $ ibax-cli console\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("    \n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("    Welcome to the IBAX console"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("    To exit, press ctrl-d or "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("type")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1NewEcosystem "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"goodBoy school"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("    \n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"block_id"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1199")]),t._v(",\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hash"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a1dc90c1772545c16394b9521...227676b27b145743556a8973dd"')]),t._v(",\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"penalty"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(",\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"err"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"18"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("The following is explained by line:")]),t._v(" "),a("ul",[a("li",[t._v("Line 1, which starts the command line console program")]),t._v(" "),a("li",[t._v("Line 5, call the contract "),a("code",[t._v("@1NewEcosystem")]),t._v(" to create an ecosystem with the name test ecosystem")]),t._v(" "),a("li",[t._v("Line 8, the block id generated by the transaction")]),t._v(" "),a("li",[t._v("Line 9, the block hash generated by the transaction")]),t._v(" "),a("li",[t._v("Line 10, if the transaction execution fails (0: no penalty 1: penalty)")]),t._v(" "),a("li",[t._v("Line 11, if the transaction execution fails, an error text message is returned, and if the block id is returned, the err field is the id of the ecology as "),a("code",[t._v("18")])])]),t._v(" "),a("p",[t._v("Then we configure the command tool "),a("code",[t._v("config.yml")]),t._v(", set "),a("code",[t._v("ecosystem")]),t._v(" to the created ecid "),a("code",[t._v("18")]),t._v(" and restart the command line console program")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("exit\nINFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("0002"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Exit\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" data/config.yml\n\n$ ibax-cli console\n\nWelcome to the IBAX console"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\nTo exit, press ctrl-d or "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("type")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("h3",{attrs:{id:"step-2-create-application"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-2-create-application"}},[t._v("#")]),t._v(" Step 2 Create Application ")]),t._v(" "),a("p",[t._v("Call the contract "),a("code",[t._v("@1NewApplication")]),t._v(" to create the application, which has an application name parameter and a modify "),a("RouterLink",{attrs:{to:"/de/concepts/about-the-platform.html#access-rights-control-mechanism"}},[t._v("Permission Parameter")])],1),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('1  >callContract @1NewApplication {"Name": "GradesRecorder", "Conditions": "ContractConditions(\\"@1DeveloperCondition\\")"}\n2  \n3  {\n4     "block_id": 1246,\n5     "hash": "85ab8953d26d0d1047fc610866115331babfaf88c80792d50b41826185c9f6f8",\n6     "penalty": 0,\n7     "err": "47"\n8  }\n')])])]),a("p",[t._v("If you need to modify the application permissions, you can call the "),a("code",[t._v("EditApplication")]),t._v(" contract")]),t._v(" "),a("p",[t._v("The following is explained by line:")]),t._v(" "),a("ul",[a("li",[t._v("Line 1, call the contract @1NewApplication to create an application, the application name is "),a("code",[t._v("GradesRecorder")]),t._v(", the application modification permission is developer permission "),a("code",[t._v("@1DeveloperCondition")])]),t._v(" "),a("li",[t._v("Line 4, the block id generated by the transaction")]),t._v(" "),a("li",[t._v("Line 5, the block hash generated by the transaction")]),t._v(" "),a("li",[t._v("Line 6, if the transaction execution fails (0: no penalty 1: penalty)")]),t._v(" "),a("li",[t._v("Line 7, if the transaction execution fails, an error text message is returned, and if the block id is returned, the err field the id of the application is "),a("code",[t._v("47")])])]),t._v(" "),a("p",[t._v("Let's write a simple example of an application that keeps track of students' grades.\nThe data table fields include student information, grade "),a("code",[t._v("grade")]),t._v(", class\n"),a("code",[t._v("class")]),t._v(", subject grades "),a("code",[t._v("mathematics,physics,literature")]),t._v(", and Composite score "),a("code",[t._v("overall_score")]),t._v(", rating "),a("code",[t._v("score")]),t._v(", creation timestamp (ms) "),a("code",[t._v("created_at")])]),t._v(" "),a("h3",{attrs:{id:"step-3-create-table"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-3-create-table"}},[t._v("#")]),t._v(" Step 3 Create Table ")]),t._v(" "),a("p",[t._v("In the first step we write a contract parameter file in json format:")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ApplicationId"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("47")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"grade_info"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ColumnsArr"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"student"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"grade"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"class"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mathematics"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"physics"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"literature"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"overall_score"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"score"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"created_at"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"TypesArr"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"varchar"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"number"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"number"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"number"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"number"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"number"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"number"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"varchar"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"number"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"InsertPerm"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ContractConditions(\\"MainCondition\\")"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"UpdatePerm"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ContractConditions(\\"MainCondition\\")"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ReadPerm"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"NewColumnPerm"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ContractConditions(\\"MainCondition\\")"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("where "),a("code",[t._v("ApplicationId")]),t._v(" is the application id,"),a("code",[t._v("Name")]),t._v(" is the name of the created data table "),a("code",[t._v("test_teble")]),t._v(".\n"),a("code",[t._v("ColumnsArr")]),t._v(" is an array of data table fields, "),a("code",[t._v("TypesArr")]),t._v(" is the type of data table fields, including 9 "),a("RouterLink",{attrs:{to:"/de/concepts/about-the-platform.html#tables"}},[t._v("types")]),t._v(" "),a("code",[t._v("varchar")]),t._v(","),a("code",[t._v("character")]),t._v(","),a("code",[t._v("json")]),t._v(","),a("code",[t._v("number")]),t._v(","),a("code",[t._v("datetime")]),t._v(","),a("code",[t._v("double")]),t._v(","),a("code",[t._v("money")]),t._v(","),a("code",[t._v("text")]),t._v(","),a("code",[t._v("bytea")]),t._v(", the field name and the field type are one-to-one correspondence.\n"),a("code",[t._v("InsertPerm")]),t._v(" for data table new entry permission, "),a("code",[t._v("UpdatePerm")]),t._v(" for data table update entry permission, "),a("code",[t._v("ReadPerm")]),t._v(" for data table data read permission, "),a("code",[t._v("NewColumnPerm")]),t._v(" for new data table field permission\nReferring to "),a("RouterLink",{attrs:{to:"/de/concepts/about-the-platform.html#access-rights-control-mechanism"}},[t._v("Permission Control")]),t._v(" , here"),a("code",[t._v('ContractConditions(\\"MainCondition\\")')]),t._v(" is available for the current ecosystem creator.")],1),t._v(" "),a("p",[t._v("We name it createTable.json, and then call the contract to create the data table "),a("code",[t._v("@1NewTableJoint")])]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v(">callContract @1NewTableJoint -f ./createTestTable.json\n")])])]),a("h4",{attrs:{id:"modify-data-table-field-permissions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#modify-data-table-field-permissions"}},[t._v("#")]),t._v(" Modify data table field permissions ")]),t._v(" "),a("p",[t._v("We can modify the data table field permissions, data table field permissions include read permissions and update permissions, where read permissions,\nin the contract using "),a("code",[t._v("DBFind.Columns")]),t._v(" filter fields or interfaces such as "),a("RouterLink",{attrs:{to:"/de/reference/api2.html#list-name-limit-offset-columns"}},[t._v("list")]),t._v(" query,\nif there is no permission, it will report a permission error.\nThe update permission is the permission to update the data table fields.\nWe set the "),a("code",[t._v("student")]),t._v(" field read and update permissions to "),a("code",[t._v("false")]),t._v(", but of course it can be set to be operable by some contract.\nCall the "),a("code",[t._v("@1EditColumn")]),t._v(" contract to modify the data table field permissions")],1),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1EditColumn "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TableName"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"grade_info"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"student"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UpdatePerm"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"false"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ReadPerm"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"false"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("We can create several application parameters"),a("code",[t._v("grade_best_type")]),t._v(","),a("code",[t._v("grade_type_a+")]),t._v(","),a("code",[t._v("grade_type_a")]),t._v(","),a("code",[t._v("grade_type_b+")]),t._v(","),a("code",[t._v("grade_type_b")]),t._v(","),a("code",[t._v("grade_type_c")]),t._v(", grade rating type")]),t._v(" "),a("h3",{attrs:{id:"step-4-create-application-parameters"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-4-create-application-parameters"}},[t._v("#")]),t._v(" Step 4 Create Application Parameters ")]),t._v(" "),a("p",[t._v("Call the contract "),a("code",[t._v("@1NewAppParam")]),t._v(" to create the application parameters, if you want to modify the application parameters you can call the contract "),a("code",[t._v("@1EditAppParam")]),t._v(".")]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('>callContract @1NewAppParam {"ApplicationId": 47, "Name": "grade_best_type", "Value": "A+", "Conditions": "ContractConditions(\\"MainCondition\\")"}\n>callContract @1NewAppParam {"ApplicationId": 47, "Name": "grade_type_a+", "Value": "{\\"max\\": 101,\\"min\\": 90}", "Conditions": "ContractConditions(\\"MainCondition\\")"}\n>callContract @1NewAppParam {"ApplicationId": 47, "Name": "grade_type_a", "Value": "{\\"max\\": 90,\\"min\\": 80}", "Conditions": "ContractConditions(\\"MainCondition\\")"}\n>callContract @1NewAppParam {"ApplicationId": 47, "Name": "grade_type_b+", "Value": "{\\"max\\": 80,\\"min\\": 70}", "Conditions": "ContractConditions(\\"MainCondition\\")"}\n>callContract @1NewAppParam {"ApplicationId": 47, "Name": "grade_type_b", "Value": "{\\"max\\": 70,\\"min\\": 60}", "Conditions": "ContractConditions(\\"MainCondition\\")"}\n>callContract @1NewAppParam {"ApplicationId": 47, "Name": "grade_type_c", "Value": "{\\"max\\": 60,\\"min\\": 0}", "Conditions": "ContractConditions(\\"MainCondition\\")"}\n')])])]),a("p",[t._v("where "),a("code",[t._v("grade_best_type")]),t._v(" is the best rating type.\n"),a("code",[t._v("grade_type_a+")]),t._v(" is the condition triggered by the rating "),a("code",[t._v("A+")]),t._v(", when the score is greater than or equal to 90 and less than 101, the rating is"),a("code",[t._v("A+")]),t._v(", other parameters are similar")]),t._v(" "),a("h3",{attrs:{id:"step-5-create-contract-deploy-contract"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-5-create-contract-deploy-contract"}},[t._v("#")]),t._v(" Step 5 Create Contract Deploy Contract ")]),t._v(" "),a("p",[t._v("We create a contract to record the student's grade information and final rating for each subject, and enter the student's grade class and grade for each subject when entering the information.\nBased on the input scores of each subject, the average calculation is done to get the overall score "),a("code",[t._v("overallScore")]),t._v(" and the final rating"),a("code",[t._v("score")]),t._v(".\nWhen the contract is called, it will create a record to the data table we just created "),a("code",[t._v("grade_info")])]),t._v(" "),a("p",[t._v("First we write a contract and name it "),a("code",[t._v("NewRecord.sim")])]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('1\tcontract NewRecord {\t\t\t\t\n2\t    data {\t\t\t\t\n3\t        Student string\t\t\t\t\n4\t        Grade int\t\t\t\t\n5\t        Class int\t\t\t\t\n6\t        Mathematics int\t\t\t\t\n7\t        Physics int\t\t\t\t\n8\t        Literature int\t\t\t\t\n9\t    }\t\t\t\t\n10\t    func getScore(a b c int) map{\t\t\t\t\n11\t        var m map\t\t\t\t\n12\t        var overallScore int\t\t\t\t\n13\t        overallScore = (a+b+c) / 3\t\t\t\t\n14\t        m["overallScore"] = overallScore\t\t\t\t\n15\t        if overallScore >= $gradeTypeABest["min"] &amp;&amp; overallScore &lt; $gradeTypeABest["max"] {\t\t\t\t\n16\t            m["score"] = "A+"\t\t\t\t\n17\t        }elif overallScore >= $gradeTypeA["min"] &amp;&amp; overallScore &lt; $gradeTypeA["max"] {\t\t\t\t\n18\t            m["score"] = "A"\t\t\t\t\n19\t        }elif overallScore >= $gradeTypeBBest["min"] &amp;&amp; overallScore &lt; $gradeTypeBBest["max"] {\t\t\t\t\n20\t            m["score"] = "B+"\t\t\t\t\n21\t        }elif overallScore >= $gradeTypeB["min"] &amp;&amp; overallScore &lt; $gradeTypeB["max"] {\t\t\t\t\n22\t            m["score"] = "B"\t\t\t\t\n23\t        }elif overallScore >= $gradeTypeC["min"] &amp;&amp; overallScore &lt; $gradeTypeC["max"]{\t\t\t\t\n24\t            m["score"] = "C"\t\t\t\t\n25\t        }else{\t\t\t\t\n26\t            m["score"] = "Notset"\t\t\t\t\n27\t        }\t\t\t\t\n28\t        return m\t\t\t\t\n29\t    }\t\t\t\t\n30\t    func safeJsonDecode(m string) map {\t\t\t\t\n31\t        var res map\t\t\t\t\n32\t        if Size(m) > 0 {\t\t\t\t\n33\t            res = JSONDecode(m)\t\t\t\t\n34\t        }\t\t\t\t\n35\t        return res\t\t\t\t\n36\t    }\t\t\t\t\n37\t\t\t\t\t\n38\t    conditions {\t\t\t\t\n39\t        if Size($Student) == 0 {\t\t\t\t\n40\t            warning "Student Can not be empty"\t\t\t\t\n41\t        }\t\t\t\t\n42\t        if $Class &lt;= 0{\t\t\t\t\n43\t            warning "Class cannot be less than or equal to zero"\t\t\t\t\n44\t        }\t\t\t\t\n45\t        if $Grade &lt;= 0{\t\t\t\t\n46\t            warning "Grade cannot be less than or equal to zero"\t\t\t\t\n47\t        }\t\t\t\t\n48\t        if $Mathematics &lt; 0 {\t\t\t\t\n49\t            warning "Mathematics cannot be less than zero"\t\t\t\t\n50\t        }\t\t\t\t\n51\t        if $Physics &lt; 0 {\t\t\t\t\n52\t            warning "Physics cannot be less than zero"\t\t\t\t\n53\t        }\t\t\t\t\n54\t        if $Literature &lt; 0 {\t\t\t\t\n55\t            warning "Literature cannot be less than zero"\t\t\t\t\n56\t        }\t\t\t\t\n57\t        if $Mathematics > 100 || $Physics > 100 ||  $Literature > 100{\t\t\t\t\n58\t            warning "Score cannot exceed 100"\t\t\t\t\n59\t        }\t\t\t\t\n60\t        var app map\t\t\t\t\n61\t        app = DBFind("@1applications").Columns("id,ecosystem").Where({"ecosystem": 18,"name":"GradesRecorder","deleted":0}).Row()\t\t\t\t\n62\t        if !app {\t\t\t\t\n63\t            warning LangRes("@1app_not_found")\t\t\t\t\n64\t        }\t\t\t\t\n65\t\t\t\t\t\n66\t        var app_id int\t\t\t\t\n67\t        app_id = Int(app["id"])\t\t\t\t\n68\t        $eId = Int(app["ecosystem"])\t\t\t\t\n69\t        $gradeBestType = AppParam(app_id, "grade_best_type", $eId)\t\t\t\t\n70\t        $gradeTypeABest = safeJsonDecode(AppParam(app_id, "grade_type_a+", $eId))\t\t\t\t\n71\t        $gradeTypeA = safeJsonDecode(AppParam(app_id, "grade_type_a", $eId))\t\t\t\t\n72\t        $gradeTypeBBest = safeJsonDecode(AppParam(app_id, "grade_type_b+", $eId))\t\t\t\t\n73\t        $gradeTypeB = safeJsonDecode(AppParam(app_id, "grade_type_b", $eId))\t\t\t\t\n74\t        $gradeTypeC = safeJsonDecode(AppParam(app_id, "grade_type_c", $eId))\t\t\t\t\n75\t    }\t\t\t\t\n76\t    action {\t\t\t\t\n77\t        var m map \t\t\t\t\n78\t        m = getScore($Mathematics,$Physics,$Literature)\t\t\t\t\n79\t        var in map\t\t\t\t\n80\t        in["student"] = $Student\t\t\t\t\n81\t        in["class"] = $Class\t\t\t\t\n82\t        in["grade"] = $Grade\t\t\t\t\n83\t        in["mathematics"] = $Mathematics\t\t\t\t\n84\t        in["physics"] = $Physics \t\t\t\t\n85\t        in["literature"] = $Literature \t\t\t\t\n86\t        in["overall_score"] = m["overallScore"]\t\t\t\t\n87\t        in["score"] = m["score"]\t\t\t\t\n88\t        in["created_at"] = $time\t\t\t\t\n89\t        DBInsert("@"+ Str($eId)+"grade_info", in)\t\t\t\t\n90\t    }\t\t\t\t\n91\t}\t\t\t\t\n')])])]),a("p",[t._v("The following is explained by line:")]),t._v(" "),a("ul",[a("li",[t._v("Line 2, "),a("RouterLink",{attrs:{to:"/de/topics/script.html#data-section"}},[t._v("data section")]),t._v(" defines the input parameters "),a("code",[t._v("Student")]),t._v(" student name, "),a("code",[t._v("Grade")]),t._v(" grade, "),a("code",[t._v("Class")]),t._v(" class, "),a("code",[t._v("Mathematics")]),t._v(" math score, "),a("code",[t._v("Physics")]),t._v("Physics score,"),a("code",[t._v("Literature")]),t._v("Literature score")],1),t._v(" "),a("li",[t._v("Line 10, the getScore function, produces a composite score and final rating based on each subject's score")]),t._v(" "),a("li",[t._v("Line 30, safeJsonDecode function, json decode the string and convert to map")]),t._v(" "),a("li",[t._v("Line 38, "),a("RouterLink",{attrs:{to:"/de/topics/script.html#conditions-section"}},[t._v("conditional section")])],1),t._v(" "),a("li",[t._v("Line 39, "),a("RouterLink",{attrs:{to:"/de/topics/script.html#action-section"}},[t._v("operation section")])],1)]),t._v(" "),a("p",[t._v("As you can see, when the contract is called, it first goes through the conditional part, verifying that the contract input parameters are valid, such as whether the student name "),a("code",[t._v("if Size($Student) == 0 {")]),t._v(" is empty (line 39), and if it is, then an error message is returned\n"),a("code",[t._v('"Student Can not be empty"')]),t._v(" (line 30), after all input parameters have been verified, on line 61, use "),a("RouterLink",{attrs:{to:"/de/topics/script.html#dbfind"}},[t._v("DBFind")]),t._v(" to retrieve the information from the database for the application with the ecid "),a("code",[t._v("18")]),t._v(" and the application name "),a("code",[t._v("GradesRecorder")]),t._v(" and the application information with "),a("code",[t._v("deleted=0")]),t._v(" is not deleted.\nLines 69-74, use "),a("RouterLink",{attrs:{to:"/de/topics/script.html#appparam"}},[t._v("AppParam")]),t._v(" to retrieve the application parameters, e.g. "),a("code",[t._v('$gradeBestType = AppParam(app_id, "grade_best_type", $ eId)')]),t._v(" (line 69).\nIf the application parameter is stored in json format, such as "),a("code",[t._v("grade_type_a")]),t._v(", you can refer to "),a("code",[t._v('$gradeTypeABest = safeJsonDecode(AppParam(app_id, "grade_type_a+", $eId))')]),t._v(", which will get the application parameter by safeJsonDecode function to map format")],1),t._v(" "),a("p",[t._v("Then execute to the operation part, call the getScore function to get the resulting composite score and final rating (line 10), use map to store, line 79, define a map to store student achievement information, and\n"),a("RouterLink",{attrs:{to:"/de/topics/script.html#dbinsert"}},[t._v("DBInsert")]),t._v(" Insert data to data table"),a("code",[t._v("@18grade_info")]),t._v(".")],1),t._v(" "),a("p",[t._v("There are two ways to create a contract, the first of which is:\nFirst we write a contract parameter file in json format:")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ApplicationId"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("47")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Value"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"contract NewRecord {\\n    data {\\n        Student string\\n        Grade int\\n        Class int\\n        Mathematics int\\n        Physics int\\n        Literature int\\n    }\\n    func getScore(a b c int) map{\\n        var m map\\n        var overallScore int\\n        overallScore = (a+b+c) / 3\\n        m[\\"overallScore\\"] = overallScore\\n        if overallScore >= $gradeTypeABest[\\"min\\"] && overallScore < $gradeTypeABest[\\"max\\"] {\\n            m[\\"score\\"] = \\"A+\\"\\n        }elif overallScore >= $gradeTypeA[\\"min\\"] && overallScore < $gradeTypeA[\\"max\\"] {\\n            m[\\"score\\"] = \\"A\\"\\n        }elif overallScore >= $gradeTypeBBest[\\"min\\"] && overallScore < $gradeTypeBBest[\\"max\\"] {\\n            m[\\"score\\"] = \\"B+\\"\\n        }elif overallScore >= $gradeTypeB[\\"min\\"] && overallScore < $gradeTypeB[\\"max\\"] {\\n            m[\\"score\\"] = \\"B\\"\\n        }elif overallScore >= $gradeTypeC[\\"min\\"] && overallScore < $gradeTypeC[\\"max\\"]{\\n            m[\\"score\\"] = \\"C\\"\\n        }else{\\n            m[\\"score\\"] = \\"Notset\\"\\n        }\\n        return m\\n    }\\n    func safeJsonDecode(m string) map {\\n        var res map\\n        if Size(m) > 0 {\\n            res = JSONDecode(m)\\n        }\\n        return res\\n    }\\n\\n    conditions {\\n        if Size($Student) == 0 {\\n            warning \\"Student Can not be empty\\"\\n        }\\n        if $Class <= 0{\\n            warning \\"Class cannot be less than or equal to zero\\"\\n        }\\n         if $Grade <= 0{\\n            warning \\"Grade cannot be less than or equal to zero\\"\\n        }\\n        if $Mathematics < 0 {\\n            warning \\"Mathematics cannot be less than zero\\"\\n        }\\n        if $Physics < 0 {\\n            warning \\"Physics cannot be less than zero\\"\\n        }\\n        if $Literature < 0 {\\n            warning \\"Literature cannot be less than zero\\"\\n        }\\n        if $Mathematics > 100 || $Physics > 100 ||  $Literature > 100{\\n            warning \\"Score cannot exceed 100\\"\\n        }\\n        var app map\\n        app = DBFind(\\"@1applications\\").Columns(\\"id,ecosystem\\").Where({\\"ecosystem\\": 18,\\"name\\":\\"GradesRecorder\\",\\"deleted\\":0}).Row()\\n        if !app {\\n            warning LangRes(\\"@1app_not_found\\")\\n        }\\n\\n        var app_id int\\n        app_id = Int(app[\\"id\\"])\\n        $eId = Int(app[\\"ecosystem\\"])\\n        $gradeBestType = AppParam(app_id, \\"grade_best_type\\", $eId)\\n        $gradeTypeABest = safeJsonDecode(AppParam(app_id, \\"grade_type_a+\\", $eId))\\n        $gradeTypeA = safeJsonDecode(AppParam(app_id, \\"grade_type_a\\", $eId))\\n        $gradeTypeBBest = safeJsonDecode(AppParam(app_id, \\"grade_type_b+\\", $eId))\\n        $gradeTypeB = safeJsonDecode(AppParam(app_id, \\"grade_type_b\\", $eId))\\n        $gradeTypeC = safeJsonDecode(AppParam(app_id, \\"grade_type_c\\", $eId))\\n    }\\n    action {\\n        var m map \\n        m = getScore($Mathematics,$Physics,$Literature)\\n        var in map\\n        in[\\"student\\"] = $Student\\n        in[\\"class\\"] = $Class\\n        in[\\"grade\\"] = $Grade\\n        in[\\"mathematics\\"] = $Mathematics\\n        in[\\"physics\\"] = $Physics \\n        in[\\"literature\\"] = $Literature \\n        in[\\"overall_score\\"] = m[\\"overallScore\\"]\\n        in[\\"score\\"] = m[\\"score\\"]\\n        in[\\"created_at\\"] = $time\\n        DBInsert(\\"@\\"+ Str($eId)+\\"grade_info\\", in)\\n    }\\n}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Conditions"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ContractConditions(\\"@1DeveloperCondition\\")"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Where "),a("code",[t._v("ApplicationId")]),t._v(" is the application id, which needs to be escaped for special characters, and "),a("code",[t._v("Conditions")]),t._v(" is the contract modification permission.\n"),a("code",[t._v("Value")]),t._v(" contract source code, which we save as "),a("code",[t._v("NewRecordParams.json")]),t._v(":")]),t._v(" "),a("p",[t._v("After writing the contract, we need to deploy the contract by calling CreateContract"),a("code",[t._v("@1NewContract")])]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('1    >>callContract @1NewContract -f=./data/NewRecordParams.json\n2    {\n3        "block_id": 1262,\n4        "hash": "d896f12f685835f6cf71705e1ba...4d8bcc0a1406f7b0b6482b2d230fc",\n5        "penalty": 0,\n6        "err": "348"\n7    }\n')])])]),a("p",[t._v("The following is explained by line:")]),t._v(" "),a("ul",[a("li",[t._v("Line 1: call contract "),a("code",[t._v("@1NewContract")]),t._v(" to create the contract, -f uses the file to import the just created file "),a("code",[t._v("NewRecord.json")]),t._v(" as the contract parameter")]),t._v(" "),a("li",[t._v("Line 3, the block id generated by the transaction")]),t._v(" "),a("li",[t._v("Line 4, the block hash generated by the transaction")]),t._v(" "),a("li",[t._v("Line 5, if the transaction execution fails (0: no penalty 1: penalty)")]),t._v(" "),a("li",[t._v("Line 6, if the transaction execution fails, an error text message is returned, and if the block id is returned, the err field the id of the contract is "),a("code",[t._v("348")])])]),t._v(" "),a("p",[t._v("Second method:\nThe saved contract source file is passed directly into the contract parameters in the parameter format "),a("code",[t._v("paramsName")]),t._v(" + "),a("code",[t._v("-")]),t._v(' + "file",'),a("code",[t._v("paramsName-file")]),t._v(" as follows:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("callContract @1NewContract "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ApplicationId"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("47")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Value-file"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"NewRecord.sim"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Conditions"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ContractConditions('),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v('@1DeveloperCondition\\ "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v('"'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Let's try to call the contract we just created")]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('1  >callContract @18NewRecord {"Student": "tom", "Grade": 1, "Class": 1, "Mathematics": 18, "Physics": 57, "Literature": 93}\n2  \n3  {\n4     "block_id": 1263,\n5     "hash": "1b964a47fe6c5fd43ea55a752d01edb5ad576432fd6f63315344d87999a0473d",\n6     "penalty": 0,\n7     "err": ""\n8  }\n')])])]),a("p",[t._v("The call is complete, and then we check to see if the data table has saved a record")]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('>getList @18grade_info\n{\n    "count": 1,\n    "list": [\n        {\n            "class": "1",\n            "created_at": "1683698914109",\n            "grade": "1",\n            "id": "9",\n            "literature": "93",\n            "mathematics": "18",\n            "overall_score": "56",\n            "physics": "57",\n            "score": "C",\n            "student": "tom"\n        }\n    ]\n}\n')])])]),a("p",[t._v("You can see that there is already a record in the data table, "),a("code",[t._v("student")]),t._v(" tom with an overall rating of 56 and a grade of C")]),t._v(" "),a("p",[t._v("The above example is only for study and research purposes, you need to change the relevant parameters according to the actual situation, such as the data table write permission, contract modification permission, etc.")]),t._v(" "),a("p",[t._v("For example, if we want to specify that only one person can call this new record contract and no one else can call it, we can set an ecological parameter "),a("code",[t._v("new_record_account")])]),t._v(" "),a("h3",{attrs:{id:"step-6-create-ecological-parameters"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-6-create-ecological-parameters"}},[t._v("#")]),t._v(" Step 6 Create Ecological Parameters ")]),t._v(" "),a("p",[t._v("Calling the contract "),a("code",[t._v("@1NewParameter")]),t._v(" will create the eco-parameter\n"),a("code",[t._v("new_record_account")]),t._v(" in the "),a("code",[t._v("@1parameters")]),t._v(" table, if you need to modify the eco-parameter you can call "),a("code",[t._v("@1EditParameter")]),t._v(".")]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('>callContract @1NewParameter {"Name": "new_record_account", "Value": "6667782293976713160", "Conditions": "ContractConditions(\\"MainCondition\\")"}\n\n{\n    "block_id": 1416,\n    "hash": "12fc87ce6a70e2fc993ab9ffe623311f1c50edd1157595ce6183c38c93960cae",\n    "penalty": 0,\n    "err": "273"\n}\n')])])]),a("p",[t._v("We create an ecological parameter "),a("code",[t._v("new_record_account")]),t._v(", set the value to keyId "),a("code",[t._v("6667782293976713160")]),t._v(", modify the permission to"),a("code",[t._v('ContractConditions("MainCondition")')]),t._v(' which means the current ecological creator can modify\nWhen the transaction is executed successfully, the ecological parameter id of the "err" field is '),a("code",[t._v("273")]),t._v(".")]),t._v(" "),a("h3",{attrs:{id:"step-7-add-localization"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-7-add-localization"}},[t._v("#")]),t._v(" Step 7 add localization ")]),t._v(" "),a("p",[t._v("You can call the "),a("code",[t._v("@1NewLangJoint")]),t._v(" contract to create the localization parameter"),a("code",[t._v("account_not_access")]),t._v(", which will create the parameter in the"),a("code",[t._v("@1languages")]),t._v(" table, and you can modify the localization parameter via"),a("code",[t._v("@1EditLangJoint")]),t._v(".")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("callContract @1NewLangJoint "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"account_not_access"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"LocaleArr"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"en"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ja"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ValueArr"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Sorry, you do not have access to this action"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"申し訳ありませんが、このアクションにアクセスする権限がありません"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"step-8-modify-the-contract"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-8-modify-the-contract"}},[t._v("#")]),t._v(" Step 8 Modify the contract ")]),t._v(" "),a("p",[t._v("Next, we need to modify the "),a("code",[t._v("conditions")]),t._v(" section of the contract source code by adding the following code to "),a("code",[t._v("conditions")])]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('conditions {\n  if EcosysParam("new_record_account") != $key_id {\n      warning LangRes("account_not_access")\n  }\n}\n')])])]),a("p",[t._v("Call to modify the contract @1EditContract, where "),a("code",[t._v("Id")]),t._v(" is the contract id, "),a("code",[t._v("Value")]),t._v(": is the contract source code")]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('>callContract @1EditContract {"Id": 348, "Value": "contract NewRecord {\\n    data {\\n        Student string\\n        Grade int\\n        Class int\\n        Mathematics int\\n        Physics int\\n        Literature int\\n    }\\n    func getScore(a b c int) map{\\n        var m map\\n        var overallScore int\\n        overallScore = (a+b+c) / 3\\n        m[\\"overallScore\\"] = overallScore\\n        if overallScore >= $gradeTypeABest[\\"min\\"] &amp;&amp; overallScore &lt; $gradeTypeABest[\\"max\\"] {\\n            m[\\"score\\"] = \\"A+\\"\\n        }elif overallScore >= $gradeTypeA[\\"min\\"] &amp;&amp; overallScore &lt; $gradeTypeA[\\"max\\"] {\\n            m[\\"score\\"] = \\"A\\"\\n        }elif overallScore >= $gradeTypeBBest[\\"min\\"] &amp;&amp; overallScore &lt; $gradeTypeBBest[\\"max\\"] {\\n            m[\\"score\\"] = \\"B+\\"\\n        }elif overallScore >= $gradeTypeB[\\"min\\"] &amp;&amp; overallScore &lt; $gradeTypeB[\\"max\\"] {\\n            m[\\"score\\"] = \\"B\\"\\n        }elif overallScore >= $gradeTypeC[\\"min\\"] &amp;&amp; overallScore &lt; $gradeTypeC[\\"max\\"]{\\n            m[\\"score\\"] = \\"C\\"\\n        }else{\\n            m[\\"score\\"] = \\"Notset\\"\\n        }\\n        return m\\n    }\\n    func safeJsonDecode(m string) map {\\n        var res map\\n        if Size(m) > 0 {\\n            res = JSONDecode(m)\\n        }\\n        return res\\n    }\\n\\n    conditions {\\n        if EcosysParam(\\"new_record_account\\") != $key_id {\\n            warning LangRes(\\"account_not_access\\")\\n        }\\n        if Size($Student) == 0 {\\n            warning \\"Student Can not be empty\\"\\n        }\\n        if $Class &lt;= 0{\\n            warning \\"Class cannot be less than or equal to zero\\"\\n        }\\n         if $Grade &lt;= 0{\\n            warning \\"Grade cannot be less than or equal to zero\\"\\n        }\\n        if $Mathematics &lt; 0 {\\n            warning \\"Mathematics cannot be less than zero\\"\\n        }\\n        if $Physics &lt; 0 {\\n            warning \\"Physics cannot be less than zero\\"\\n        }\\n        if $Literature &lt; 0 {\\n            warning \\"Literature cannot be less than zero\\"\\n        }\\n        if $Mathematics > 100 || $Physics > 100 ||  $Literature > 100{\\n            warning \\"Score cannot exceed 100\\"\\n        }\\n        var app map\\n        app = DBFind(\\"@1applications\\").Columns(\\"id,ecosystem\\").Where({\\"ecosystem\\": 18,\\"name\\":\\"GradesRecorder\\",\\"deleted\\":0}).Row()\\n        if !app {\\n            warning LangRes(\\"@1app_not_found\\")\\n        }\\n\\n        var app_id int\\n        app_id = Int(app[\\"id\\"])\\n        $eId = Int(app[\\"ecosystem\\"])\\n        $gradeBestType = AppParam(app_id, \\"grade_best_type\\", $eId)\\n        $gradeTypeABest = safeJsonDecode(AppParam(app_id, \\"grade_type_a+\\", $eId))\\n        $gradeTypeA = safeJsonDecode(AppParam(app_id, \\"grade_type_a\\", $eId))\\n        $gradeTypeBBest = safeJsonDecode(AppParam(app_id, \\"grade_type_b+\\", $eId))\\n        $gradeTypeB = safeJsonDecode(AppParam(app_id, \\"grade_type_b\\", $eId))\\n        $gradeTypeC = safeJsonDecode(AppParam(app_id, \\"grade_type_c\\", $eId))\\n    }\\n    action {\\n        var m map \\n        m = getScore($Mathematics,$Physics,$Literature)\\n        var in map\\n        in[\\"student\\"] = $Student\\n        in[\\"class\\"] = $Class\\n        in[\\"grade\\"] = $Grade\\n        in[\\"mathematics\\"] = $Mathematics\\n        in[\\"physics\\"] = $Physics \\n        in[\\"literature\\"] = $Literature \\n        in[\\"overall_score\\"] = m[\\"overallScore\\"]\\n        in[\\"score\\"] = m[\\"score\\"]\\n        in[\\"created_at\\"] = $time\\n        DBInsert(\\"@\\"+ Str($eId)+\\"grade_info\\", in)\\n    }\\n}"}\n')])])]),a("h4",{attrs:{id:"step-9-modify-data-table-permissions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-9-modify-data-table-permissions"}},[t._v("#")]),t._v(" Step 9 Modify data table permissions ")]),t._v(" "),a("p",[t._v("Here we need to change the insert permission of the data table, the original permission "),a("code",[t._v('ContractConditions("MainCondition")')]),t._v(" for the ecreator, and the contract setting "),a("code",[t._v("new_record_account")]),t._v(" is not the ecreator.\nSo just change "),a("code",[t._v('ContractConditions("MainCondition")')]),t._v(" to specify that the contract can operate on "),a("code",[t._v('ContractAccess("@18NewRecord")')]),t._v(".\nCall the contract "),a("code",[t._v("@1EditTable")]),t._v(" to modify the data table permissions")]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('>callContract @1EditTable {"Name": "@18grade_info", "InsertPerm": "ContractAccess(\\"@18NewRecord\\")", "UpdatePerm": "ContractConditions(\\"MainCondition\\")", "ReadPerm": "true", "NewColumnPerm": "ContractConditions(\\"MainCondition\\")"}\n')])])]),a("p",[t._v("Then call the contract you just modified and create a new record")]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('1  >callContract @18NewRecord {"Student": "tom", "Grade": 1, "Class": 1, "Mathematics": 18, "Physics": 57, "Literature": 93}\n2  \n3  {\n4      "block_id": 1435,\n5      "hash": "7d4b06d3738133f9c2ec775935478cd2d6c20fd04eca275769afd0f8e6a4f687",\n6      "penalty": 1,\n7      "err": "{\\"type\\":\\"warning\\",\\"error\\":\\"Sorry, you do not have access to this action\\"}"\n8  }\n')])])]),a("p",[t._v("You can see that the localization parameter we just set,"),a("code",[t._v("account_not_access")]),t._v(", is working")]),t._v(" "),a("p",[t._v("We found that the permission error is reported, the current user does not have permission to operate, we switch to the account with keyId "),a("code",[t._v("6667782293976713160")]),t._v(", we can get the current user's information through the command line tool"),a("code",[t._v("account info")]),t._v("\nSet up the command line tool config.yml and switch to the account with keyId "),a("code",[t._v("6667782293976713160")]),t._v("\nAfter the setup is complete, call the contract again")]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('>callContract @18NewRecord {"Student": "tini", "Grade": 1, "Class": 3, "Mathematics": 69, "Physics": 89, "Literature": 98}\n\n{\n    "block_id": 1436,\n    "hash": "93327dafb7bae9f9f66718eb87020a7bca4c00060f4bd0a243b49eea304c52e6",\n    "penalty": 0,\n    "err": ""\n}\n')])])]),a("p",[t._v("The call completes, querying the data table via "),a("code",[t._v("getList @18grade_info")]),t._v(", and the result is as expected")]),t._v(" "),a("p",[t._v("We hope this article has helped you learn more about how the IBAX network works and how to write clear and secure "),a("code",[t._v("Needle")]),t._v(" code.")]),t._v(" "),a("h2",{attrs:{id:"deploy-application-using-command-line-tools"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-application-using-command-line-tools"}},[t._v("#")]),t._v(" Deploy application using command line tools ")]),t._v(" "),a("p",[t._v("In this tutorial, you will learn how to:")]),t._v(" "),a("ul",[a("li",[a("ol",[a("li",[a("a",{attrs:{href:"#export-application"}},[t._v("Export Application")])])])]),t._v(" "),a("li",[a("ol",{attrs:{start:"2"}},[a("li",[a("a",{attrs:{href:"#import-application"}},[t._v("Import Application")])])])])]),t._v(" "),a("p",[t._v("Before starting this tutorial, you need to have an application of your own and know the concept of ecology and application, you can refer to "),a("a",{attrs:{href:"#getting-started-guide"}},[t._v("Getting Started Guide")]),t._v("\nWe will import the application on the IBAX blockchain via the "),a("a",{attrs:{href:"https://github.com/IBAX-io/ibax-cli",target:"_blank",rel:"noopener noreferrer"}},[t._v("command line tool"),a("OutboundLink")],1),t._v(". Exporting an application")]),t._v(" "),a("h3",{attrs:{id:"export-application"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#export-application"}},[t._v("#")]),t._v(" Export Application ")]),t._v(" "),a("p",[t._v("Call "),a("code",[t._v("account info")]),t._v(" to query the current account information, here the login ecid is "),a("code",[t._v("9")]),t._v(", call "),a("code",[t._v("getList")]),t._v(" command to query the current ecid which applications")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("$ ibax-cli console\n   \nWelcome to the IBAX console"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\nTo exit, press ctrl-d or "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("type")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("account info\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"public_key"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"04d11ea197fe23152562c6f54c4...889c074dfd9080099982d8b2d4d100315e1cebc7"')]),t._v(",     \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ecosystem_id"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"key_id"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6660819")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".78795186,\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"account"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0666-0819-...-7879-5186"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("getList @1applications "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-w")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ecosystem"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"list"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"conditions"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"deleted"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ecosystem"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"9"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"36"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"testapp"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"uuid"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"00000000-0000-0000-0000-000000000000"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("We can see that the current ecology has 6 applications, we use the"),a("code",[t._v("export")]),t._v(" command to export the application with "),a("code",[t._v("id")]),t._v(" of "),a("code",[t._v("36")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("export "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("36")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("./data.json\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./data.json"')]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"application/json"')]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("The -f parameter here saves the exported application to the "),a("code",[t._v("data.json")]),t._v(" file in the current directory.\nIf there is no -f parameter, the application data will be output in the command terminal")]),t._v(" "),a("p",[t._v("The "),a("code",[t._v("export")]),t._v(" command encapsulates the steps to export an application. You can use the above command to export an application, or use the following steps, as follows:\nCalling the contract "),a("code",[t._v("@1ExportNewApp")]),t._v(" to export a new application will generate a record in the "),a("code",[t._v("1_buffer_data")]),t._v(" table for the exported application")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1ExportNewApp "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ApplicationId"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("36")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Call the contract "),a("code",[t._v("@1Export")]),t._v(" to export the application, find the selected application in the "),a("code",[t._v("1_buffer_data")]),t._v(" table, and export all application resources to the generated json string.\nThe generated json string will be written to the "),a("code",[t._v("1_binaries")]),t._v(" table of the current ecosystem")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1Export\n")])])]),a("p",[t._v("Query the data in the "),a("code",[t._v("1_binaries")]),t._v(" table with the "),a("code",[t._v("getList")]),t._v(" command")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("getList @1binaries "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-w")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"export"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"account"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0666-0819-...-7879-5186"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ecosystem"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app_id"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("36")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-l")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id,hash"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"list"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hash"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8542cb57b77e0ae2c...92c3e05dbbe35ab646789be5b8ba8"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"14"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Get the binary id and hash\nCall the "),a("code",[t._v("binaryVerify")]),t._v(" command to export the binary file")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("binaryVerify "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v(" 8542cb57b77e0ae2c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".92c3e05dbbe35ab646789be5b8ba8 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("./data.json\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./data.json"')]),t._v(",     \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"application/json"')]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"import-application"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#import-application"}},[t._v("#")]),t._v(" Import Application ")]),t._v(" "),a("p",[t._v("Use the "),a("code",[t._v("import")]),t._v(" command to import an application, with the "),a("code",[t._v("-f")]),t._v(" parameter to specify the application file to be imported")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("$ ibax-cli console\n\nWelcome to the IBAX console"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\nTo exit, press ctrl-d or "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("type")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("import "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" /data.json\n")])])]),a("p",[t._v("The "),a("code",[t._v("import")]),t._v(" command encapsulates the steps to import an application, you can use the above command to import an application")]),t._v(" "),a("p",[t._v("Or use the following steps, which, for ease of study and research, are as follows:")]),t._v(" "),a("ul",[a("li",[t._v("Step 1\nCalling the contract "),a("code",[t._v("@1ImportUpload")]),t._v(" to import a new application will generate a record in the "),a("code",[t._v("1_buffer_data")]),t._v(" table for the exported application\n"),a("code",[t._v("@1ImportUpload")]),t._v(" The contract parameter "),a("code",[t._v("Data")]),t._v(" is "),a("code",[t._v("file")]),t._v(" "),a("RouterLink",{attrs:{to:"/de/topics/vm.html#types"}},[t._v("type")]),t._v(".\nContains the keywords "),a("code",[t._v("Name")]),t._v(" file name (string), "),a("code",[t._v("MimeType")]),t._v(" file type (string), "),a("code",[t._v("Body")]),t._v(" ([]byte) file content\nYou need to base64 encode the application file data and pass it into "),a("code",[t._v("Body")]),t._v(", you can use the "),a("code",[t._v("base64Encode")]),t._v(" command to base64 encode it")],1)]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("base64Encode "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("./data.json\n\nEncode:ewoJIm5hbWUiOiAid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".CQkJIlR5cGUiOiAiY29udHJhY3RzIiwKCQkJIk5hbWUiOiAiSGVsbG9Xb3JsZCIsCgkJCSJWYWx1ZSI6"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1ImportUpload "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Data"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"filename"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MimeType"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mimeType"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Body"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ewoJIm5hbWUiOiAid...CQkJIlR5cGUiOiAiY29udHJhY3RzIiwKCQkJIk5hbWUiOiAiSGVsbG9Xb3JsZCIsCgkJCSJWYWx1ZSI6..."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("Step 2\nAfter the call is completed, use the "),a("code",[t._v("getList")]),t._v(" command to query the data in the "),a("code",[t._v("1_buffer_data")]),t._v(" table")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("getList @1buffer_data "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-w")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"key"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"import"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"account"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0666-0819-xxxx-7879-5186"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ecosystem"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-l")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("value-"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"list"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"22"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value.data"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"[{"')]),t._v("Data"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('": "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("a,b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"}, {"')]),t._v("Data"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('": "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("c,d"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"}]"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("Step 3\nAssemble the data in value.data->Data into a one-dimensional array, [a,b,c,d].\nThen create a contract parameters file "),a("code",[t._v("importParams.json")]),t._v(", with the following content:")])]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Data"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"[a,b,c,d]"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("Step 4\nCall the contract "),a("code",[t._v("@1Import")]),t._v(" to import the application data")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1Import "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("./importParams.json\n")])])]),a("h2",{attrs:{id:"ecological-configuration-using-command-line-tool"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ecological-configuration-using-command-line-tool"}},[t._v("#")]),t._v(" Ecological configuration using command line tool ")]),t._v(" "),a("p",[t._v("In this tutorial, you will learn how to:")]),t._v(" "),a("ul",[a("li",[a("ol",[a("li",[a("a",{attrs:{href:"#apply-to-join-the-ecology"}},[t._v("Apply to join the ecology")])])])]),t._v(" "),a("li",[a("ol",{attrs:{start:"2"}},[a("li",[a("a",{attrs:{href:"#add-ecological-members"}},[t._v("Add ecological members")])])])]),t._v(" "),a("li",[a("ol",{attrs:{start:"3"}},[a("li",[a("a",{attrs:{href:"#role-management"}},[t._v("Role management")])])])]),t._v(" "),a("li",[a("ol",{attrs:{start:"4"}},[a("li",[a("a",{attrs:{href:"#issuance-of-token"}},[t._v("Issuance of Token")])])])]),t._v(" "),a("li",[a("ol",{attrs:{start:"5"}},[a("li",[a("a",{attrs:{href:"#eco-deduction"}},[t._v("Eco Deduction")])])])]),t._v(" "),a("li",[a("ol",{attrs:{start:"6"}},[a("li",[a("a",{attrs:{href:"#dao-governance-ecology"}},[t._v("DAO Governance Ecology")])])])])]),t._v(" "),a("p",[t._v("Before starting this tutorial, you need to have an application of your own and know the concept of ecology and application, you can refer to "),a("a",{attrs:{href:"#getting-started-guide"}},[t._v("Getting Started Guide")]),t._v("\nWe will do the ecological configuration on the IBAX blockchain via "),a("a",{attrs:{href:"https://github.com/IBAX-io/ibax-cli",target:"_blank",rel:"noopener noreferrer"}},[t._v("command line tool"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"apply-to-join-the-ecology"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#apply-to-join-the-ecology"}},[t._v("#")]),t._v(" Apply to join the ecology ")]),t._v(" "),a("p",[t._v("We can call the "),a("code",[t._v("@1MembershipRequest")]),t._v(" contract to request to join the ecology\nThe following example:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1MembershipRequest "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"EcosystemId"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("request to join the ecology with ecological id "),a("code",[t._v("19")]),t._v(", the "),a("code",[t._v("@1MembershipRequest")]),t._v(" contract makes a restriction on calling the ecology, only in the base ecology can be called\nWhen the application is successful, the target ecology manager will receive an application, and only when the application is approved by the ecology manager will it be considered as joining the target ecology.\nOf course, if the target ecology is public, you can join the target ecology directly")]),t._v(" "),a("h3",{attrs:{id:"add-ecological-members"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#add-ecological-members"}},[t._v("#")]),t._v(" Add ecological members ")]),t._v(" "),a("p",[t._v("When the ecology is just created, the ecology member is only the ecology creator, when you need to invite other members to join, you need to know the public key of the invited person, and then call the contract "),a("code",[t._v("@1MembershipAdd")]),t._v(" to add members")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1MembershipAdd "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Keys"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"04f2c1780ca0aa0f343d0e541c77811...3b0d5bf3a9903253aad6e78c966b5f91ffb32703884020"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("If the ecology is public and allows anyone to join, you can set the ecology parameter "),a("code",[t._v("free_membership")]),t._v(" = 1, which is not public by default.\nOnce set up, you don't need to be approved to join your ecosystem")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1NewParameter "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"free_membership"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Value"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Conditions"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ContractConditions('),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("MainCondition"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(')"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("If you don't set the parameter "),a("code",[t._v("free_membership")]),t._v(", when other members apply to join your ecology, you will receive an application notification.")]),t._v(" "),a("p",[t._v("Call "),a("code",[t._v("@1MembershipDecide")]),t._v(" contract approval application, contract parameters "),a("code",[t._v("NotificId")]),t._v(" is the notification id, 'Accept' is the resolution mark, resolution mark "),a("code",[t._v("1")]),t._v(" is passed")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1MembershipDecide "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"NotificId"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Accept"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"freezing-of-accounts"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#freezing-of-accounts"}},[t._v("#")]),t._v(" Freezing of accounts ")]),t._v(" "),a("p",[t._v("Call "),a("code",[t._v("@1DeleteMember")]),t._v(" contract to freeze the account, note that this operation cannot be restored")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1DeleteMember "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MemberAccount"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1539-2715-xxxx-1679-5385"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"role-management"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#role-management"}},[t._v("#")]),t._v(" Role management ")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#new-role-creation"}},[t._v("New role creation")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#adding-role-members"}},[t._v("Add Role Member")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#delete-role-members"}},[t._v("delete role member")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#modify-role-manager"}},[t._v("Modify role manager")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#delete-role"}},[t._v("delete role")])])]),t._v(" "),a("h4",{attrs:{id:"new-role-creation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#new-role-creation"}},[t._v("#")]),t._v(" New role creation ")]),t._v(" "),a("p",[t._v("Call "),a("code",[t._v("@1RolesCreate")]),t._v(" contract to create a new role, role name "),a("code",[t._v("student")]),t._v(", type "),a("code",[t._v("2")]),t._v(" (1 - Assignable 2 - Elected by vote type 3 - System)")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1RolesCreate "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"student"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Type"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"block_id"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1685")]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hash"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"5321f2231a...d0d80158b62766395f14d0ff7"')]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"penalty"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"err"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"21"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("The return result contains the role id "),a("code",[t._v("21")])]),t._v(" "),a("h4",{attrs:{id:"adding-role-members"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#adding-role-members"}},[t._v("#")]),t._v(" Adding Role Members ")]),t._v(" "),a("p",[t._v("There are two methods, the first method, the ecological member to initiate the application, call the contract "),a("code",[t._v("@1RolesRequest")]),t._v(" request to add as a member of the role, where "),a("code",[t._v("Rid")]),t._v(" is the role id")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1RolesRequest "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Rid"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("In the second method, the role manager assigns role members, and the role manager calls the contract "),a("code",[t._v("@1RolesAssign")]),t._v(" to add members to the role")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1RolesAssign "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MemberAccount"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0666-7782-xxxx-7671- 3160"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Rid"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"delete-role-members"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#delete-role-members"}},[t._v("#")]),t._v(" Delete role members ")]),t._v(" "),a("p",[t._v("First we see what members a role has, which we can query via getList, as follows:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("getList @1roles_participants "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-w")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ecosystem"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"role->id"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"21"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"deleted"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"list"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"appointed"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{'),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("account"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(": "),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("1273-2644-xxxx-5846-6598"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("image_id"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(": "),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("0"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("member_name"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(": "),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("founder"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v('}"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"date_created"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1684916023"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"date_deleted"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"deleted"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ecosystem"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"18"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"21"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"member"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{'),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("account"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(": "),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("1273-2644-xxxx-5846-6598"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("image_id"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(": "),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("0"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("member_name"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(": "),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("founder"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v('}"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"role"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{'),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("id"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(": "),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("20"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("name"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(": "),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("teacher"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("type"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(": "),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("1"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("image_id"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(": "),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("0"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v('}"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("where the "),a("code",[t._v("where")]),t._v(" condition "),a("code",[t._v("ecosystem")]),t._v(" specifies ecology, "),a("code",[t._v("role->id")]),t._v(" specifies the role id, and "),a("code",[t._v("deleted")]),t._v(": 0 specifies not deleted.\nWe can see that we have 3 rows, if we want to remove the role with member "),a("code",[t._v("1273-2644-xxxx-5846-6598")]),t._v(", that is, the role with "),a("code",[t._v("id")]),t._v(" of "),a("code",[t._v("21")]),t._v(".\nAdministrators can call the contract "),a("code",[t._v("@1RolesUnassign")]),t._v(" to remove role members, as follows")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1RolesUnassign "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"RowId"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"modify-role-manager"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#modify-role-manager"}},[t._v("#")]),t._v(" Modify Role Manager ")]),t._v(" "),a("p",[t._v("Let's look at the current ecological roles")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("getList @1roles "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-w")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ecosystem"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"list"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"company_id"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"creator"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{'),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("account"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(": "),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("1273-2644-xxxx-5846-6598"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("image_id"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(": "),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("0"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("member_name"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(": "),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("founder"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v('}"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"date_created"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1684910917"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"date_deleted"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default_page"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"deleted"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ecosystem"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"18"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"20"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"image_id"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"role_name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"teacher"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"role_type"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"roles_access"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"[]"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("where "),a("code",[t._v("roles_access")]),t._v(" is the administrative role for the current role, which is an array and can have more than one.\nWe add an administrative role to the role "),a("code",[t._v("teacher")]),t._v(" by calling the "),a("code",[t._v("@1RolesAccessManager")]),t._v(" contract, where the contract parameters "),a("code",[t._v("Action")]),t._v(" administrative operator ("),a("code",[t._v("clean")]),t._v(", "),a("code",[t._v("remove")]),t._v(", "),a("code",[t._v("add")]),t._v("),"),a("code",[t._v("Rid")]),t._v(" the role ID to be managed, "),a("code",[t._v("ManagerRid")]),t._v(" the Rid Manager of the role")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1RolesAccessManager "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Action"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"add"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Rid"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ManagerRid"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"block_id"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1745")]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hash"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"e2eb8ff0dc309ec7652db...bbbe58bca4ca574804e46c2f63653eb73104"')]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"penalty"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"err"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"delete-role"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#delete-role"}},[t._v("#")]),t._v(" Delete Role ")]),t._v(" "),a("p",[t._v("We can call the "),a("code",[t._v("@1RolesDelete")]),t._v(" contract to delete roles, where the contract parameters "),a("code",[t._v("Rid")]),t._v(" is the ID of the role to be managed and "),a("code",[t._v("Ops")]),t._v(" is the operator ("),a("code",[t._v("D")]),t._v(" is delete "),a("code",[t._v("R")]),t._v(" is restore)")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1RolesDelete "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Rid"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Ops"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"D"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"block_id"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1785")]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hash"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1ebf99a04f504fc3d2...4ecfbdfc419bf3dbf39df0013dca913f844"')]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"penalty"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"err"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"issuance-of-token"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#issuance-of-token"}},[t._v("#")]),t._v(" Issuance of Token ")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#create-ecology"}},[t._v("Create Ecology")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#installing-basic-applications"}},[t._v("Installing Basic Applications")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#token-issuance"}},[t._v("Token Issuance")])])]),t._v(" "),a("h4",{attrs:{id:"create-ecology"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-ecology"}},[t._v("#")]),t._v(" Create Ecology ")]),t._v(" "),a("p",[t._v("Create an ecology, call "),a("code",[t._v("@1NewEcosystem")]),t._v(" contract")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1NewEcosystem "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Test Ecosystem"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"block_id"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1787")]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hash"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"384f35ef93243c9dd4f53b9298873b356b25b31cf7c6a6be7600ee7694d77006"')]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"penalty"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"err"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"21"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v('Then we modify the command line tool configuration to log into this newly created ecosystem: "21"')]),t._v(" "),a("h4",{attrs:{id:"installing-basic-applications"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#installing-basic-applications"}},[t._v("#")]),t._v(" Installing Basic Applications ")]),t._v(" "),a("p",[t._v("Call the contract to install the base application, as follows:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1PlatformAppsInstall\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1RolesInstall\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1AppInstall "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ApplicationId"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1AppInstall "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ApplicationId"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Line 1, install the platform application\nLine 2, install default role\nLine 3-4, install the eco-configuration and token issuance application, where the application id "),a("code",[t._v("5,6")]),t._v(" can be queried via getList as follows:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("getList @1applications "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-w")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ecosystem"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$or")]),t._v('"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Token emission"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(","),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Ecosystems catalog"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name,ecosystem"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"list"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ecosystem"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"5"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Token emission"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(",\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ecosystem"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"6"')]),t._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Ecosystems catalog"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"token-issuance"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#token-issuance"}},[t._v("#")]),t._v(" Token Issuance ")]),t._v(" "),a("p",[t._v("Because it is a new ecology, you need to set up the token issuance, call "),a("code",[t._v("@1TeSettings")]),t._v(" contract to specify the roles that can issue tokens")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1TeSettings "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"RoleDeveloper"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("where "),a("code",[t._v("RoleDeveloper")]),t._v(" is the current ecological role id, which can be obtained through the "),a("code",[t._v("@1roles")]),t._v(" data table")]),t._v(" "),a("p",[a("strong",[t._v("Token Issuance")]),t._v(" Call "),a("code",[t._v("@1NewToken")]),t._v(" contract to issue tokens")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1NewToken "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Symbol"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TEST"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TEST Coin"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Amount"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"10000000000000000"')]),t._v(" ,"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Digits"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"12"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("where the contract parameters "),a("code",[t._v("Symbol")]),t._v(" is the token symbol, "),a("code",[t._v("Name")]),t._v(" is the token name, "),a("code",[t._v("Amount")]),t._v(" is the total amount, and "),a("code",[t._v("Digits")]),t._v(" is the precision.")]),t._v(" "),a("p",[a("strong",[t._v("Token Emission")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1TeEmission "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Amount"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000000000000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("strong",[t._v("Destroy tokens")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1TeBurn "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Amount"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000000000000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Default token increment and token destruction is allowed, you can set it off by "),a("code",[t._v("@1TeChange")]),t._v(", where "),a("code",[t._v("TypeChange")]),t._v(" is the type ("),a("code",[t._v("emission")]),t._v(" increment,"),a("code",[t._v("withdraw")]),t._v(" destruction).\n"),a("code",[t._v("Value")]),t._v(" is the on/off status ("),a("code",[t._v("1")]),t._v(" on, "),a("code",[t._v("2")]),t._v(" off), e.g:\n"),a("strong",[t._v("Close Additions")]),t._v(" Note: Cannot be turned on after closing")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1TeChange "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TypeChange"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"emission"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Value"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("strong",[t._v("Turn off destruction")]),t._v(", if you want to turn on destruction again, just set "),a("code",[t._v("Value")]),t._v(" to "),a("code",[t._v("1")]),t._v(".")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1TeChange "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TypeChange"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"withdraw"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Value"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"eco-deduction"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#eco-deduction"}},[t._v("#")]),t._v(" Eco Deduction ")]),t._v(" "),a("p",[t._v("Before setting up eco-deductions, you need to understand the IBAX fee model, which can be found in the "),a("a",{attrs:{href:"https://github.com/IBAX-io/whitepaper",target:"_blank",rel:"noopener noreferrer"}},[t._v("white paper"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("p",[t._v("We first set the eco-wallet address, call the "),a("code",[t._v("@1EditParameter")]),t._v(" contract and modify the eco-parameters")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1EditParameter "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Id"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("334")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Value"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1273-2644-xxxx-5846-6598"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("where "),a("code",[t._v("Id")]),t._v(" is the ecowallet "),a("code",[t._v("ecosystem_wallet")]),t._v(" parameter id, which can be queried as follows:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("getList @1parameters "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-w")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ecosystem"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ecosystem_wallet"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("The "),a("code",[t._v("Value")]),t._v(" value is the address of the ecowallet that will be bound, and the contract generates the gas fee, which is paid by that address. The address must have enough tokens in the current ecology and needs to be agreed by the bound address before the modification will be successful")]),t._v(" "),a("p",[t._v("Call "),a("code",[t._v("@1EcoFeeModeManage")]),t._v(" contract to set up multi-ecological deduction, as follows:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1EcoFeeModeManage "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"FollowFuel"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.01")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CombustionFlag"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"VmCostFlag"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"VmCostConversionRate"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"StorageConversionRate"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"StorageFlag"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ExpediteFlag"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("where the contract parameter fields are defined as follows:")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("FollowFuel")]),t._v(" parameter is a multiple of the follow eco1 rate")]),t._v(" "),a("li",[a("code",[t._v("CombustionFlag")]),t._v(" whether to turn on ecotrade gas fee combustion, 1- no, 2-yes")]),t._v(" "),a("li",[a("code",[t._v("CombustionPercent")]),t._v(" Combustion percentage, only effective when gas fee combustion is turned on, takes values 1 to 100, 0 when not turned on")]),t._v(" "),a("li",[a("code",[t._v("VmCostFlag")]),t._v(" VM cost flag, set direct or proxy payment, 1 - direct payment, 2 - proxy payment")]),t._v(" "),a("li",[a("code",[t._v("StorageFlag")]),t._v(" storage fee flag, set direct payment or proxy payment, 1 - direct payment, 2 - proxy payment")]),t._v(" "),a("li",[a("code",[t._v("ExpediteFlag")]),t._v(" Expedited fee flag, set direct payment or payment on behalf of, 1 - direct payment, 2 - payment on behalf of")]),t._v(" "),a("li",[a("code",[t._v("VmCostConversionRate")]),t._v(" Virtual machine cost conversion rate, 2 decimal places, only in effect for proxy payments, greater than zero")]),t._v(" "),a("li",[a("code",[t._v("StorageConversionRate")]),t._v(" The storage cost conversion rate, 2 decimal places, only in effect for proxy payments, greater than zero")])]),t._v(" "),a("p",[t._v("If you use the above settings, all transaction fees incurred by users invoking contracts within the ecology will be paid by the ecological wallet of the current ecological setup.\nAll users only need to pay for the gas costs incurred within the ecology. Of course you can adjust the cost parameters according to your actual needs")]),t._v(" "),a("h3",{attrs:{id:"dao-governance-ecology"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dao-governance-ecology"}},[t._v("#")]),t._v(" DAO Governance Ecology ")]),t._v(" "),a("p",[t._v("Before modifying to DAO governance ecology, you need to ensure that the current ecology has issued tokens, and after modifying to DAO governance ecology, all proposals of the ecology will be voted on by the members of the governance committee.\nThe DAO Governance Board is no longer managed by the eco-developers alone, and the top 50 representatives of the eco-holdings are elected.")]),t._v(" "),a("p",[t._v("Call the "),a("code",[t._v("@1EditControlMode")]),t._v(" contract to change the eco governance mode to DAO governance mode.")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1EditControlMode "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Value"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("where the "),a("code",[t._v("Value")]),t._v(" parameter "),a("code",[t._v("1")]),t._v(" represents the creator model "),a("code",[t._v("2")]),t._v(" represents the DAO governance model")]),t._v(" "),a("p",[t._v("We can try to create an application")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("callContract @1NewApplication "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"testApp"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Conditions"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ContractConditions('),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("@1DeveloperCondition"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(')"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("At this point a DAO governance proposal is generated and voted on by the DAO Governance Board before the application is created. A valid proposal requires a 68% approval rate out of 75% of the votes cast.\nThe scope of DAO governance includes:")]),t._v(" "),a("ol",[a("li",[t._v("Add, delete and change applications, contracts, pages, code snippets, tabs, menus, application parameters, data tables and fields")]),t._v(" "),a("li",[t._v("Modify multilingual")]),t._v(" "),a("li",[t._v("DAO and creator model switch")]),t._v(" "),a("li",[t._v("Edit ecological parameters")]),t._v(" "),a("li",[t._v("role, assign remove role members")]),t._v(" "),a("li",[t._v("Issue additional destruction currency")]),t._v(" "),a("li",[t._v("Modify the platform parameters")]),t._v(" "),a("li",[t._v("Modify ecological information")]),t._v(" "),a("li",[t._v("Modification of delayed contracts")]),t._v(" "),a("li",[t._v("Modify the voting template")])]),t._v(" "),a("h2",{attrs:{id:"deploy-applications-using-application-packaging-tool"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-applications-using-application-packaging-tool"}},[t._v("#")]),t._v(" Deploy applications using application packaging tool ")]),t._v(" "),a("p",[t._v("Before starting this tutorial, you need to download "),a("a",{attrs:{href:"https://github.com/IBAX-io/app-tool",target:"_blank",rel:"noopener noreferrer"}},[t._v("IBAX Application Packaging Tool"),a("OutboundLink")],1),t._v(" , we need to use this tool to package IBAX application.")]),t._v(" "),a("p",[t._v("We need to store the application files according to the following directory structure")]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("- APP Name\n    - app_params\n        params1.csv\n        params2.csv\n        ...\n    - contracts\n        contract1.sim\n        contract2.sim\n        ...\n    - tables\n        tableName1.json\n        tableName2.json\n        ...\n    config.json\n")])])]),a("p",[t._v("As shown below:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("airdrop$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" *\nconfig.json\n\napp_params:\ndedicated_account.csv  lock_percent.csv  per_period_sec.csv  period_count.csv\n\ncontracts:\nAddAirdrop.sim  ClaimAirdrop.sim  SpeedAirdrop.sim\n\ntables:\nairdrop_info.json\n")])])]),a("p",[t._v("The "),a("code",[t._v("app_params")]),t._v(" directory stores the application parameters file, named using the parameter name + file format "),a("code",[t._v(".csv")]),t._v(", the content of the file is the parameter value.\nThe "),a("code",[t._v("contracts")]),t._v(" directory holds the contracts, in "),a("code",[t._v(".sim")]),t._v(" file format, and the contents of the file are the contract source code.\nThe "),a("code",[t._v("tables")]),t._v(" directory holds the application data table structure in "),a("code",[t._v("json")]),t._v(" file format, as follows:")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"account"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"conditions"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{\\"read\\": \\"true\\", \\"update\\": \\"ContractConditions(\\"MainCondition\\")\\"}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"varchar"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"balance_amount"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"conditions"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"money"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"stake_amount"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"conditions"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"money"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"surplus"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"conditions"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"number"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"total_amount"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"conditions"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"money"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("p",[a("code",[t._v("name")]),t._v(" is the datatable field name, "),a("code",[t._v("conditions")]),t._v(" is the datatable field permission, and "),a("code",[t._v("type")]),t._v(" is the field type.")]),t._v(" "),a("p",[t._v("In step 1, we generate a config.json file and save it to the airdrop directory with the following contents:")]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n    "name": "Airdrop",\n    "conditions": "ContractConditions(\\"@1MainCondition\\")"\n}\n')])])]),a("p",[t._v("Where "),a("code",[t._v("name")]),t._v(" is the name of the application, "),a("code",[t._v("conditions")]),t._v(": is the permission to modify the application, and then save it to the airdrop directory.")]),t._v(" "),a("p",[t._v("Step 2, package the application, the following command will generate the application "),a("code",[t._v("airdrop.json")]),t._v(" in the current directory, if you modify the contract or application parameters, you need to repackage the application.")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("$ ./app-tool airdrop/\n")])])]),a("p",[t._v("We can import the application via "),a("a",{attrs:{href:"https://github.com/IBAX-io/ibax-cli",target:"_blank",rel:"noopener noreferrer"}},[t._v("command line tool"),a("OutboundLink")],1),t._v(" as follows:\nUse the "),a("code",[t._v("import")]),t._v(" command to import an application, with the "),a("code",[t._v("-f")]),t._v(" parameter to specify the application file to be imported")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("$ ibax-cli console\n\nWelcome to the IBAX console"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\nTo exit, press ctrl-d or "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("type")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("import "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" ./airdrop.json\n")])])]),a("p",[t._v("Of course if you have an application, you can also generate the complete directory structure with the following command")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("$ app-tool.exe airdrop.json\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);