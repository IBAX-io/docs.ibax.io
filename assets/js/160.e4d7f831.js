(window.webpackJsonp=window.webpackJsonp||[]).push([[160],{435:function(t,o,s){"use strict";s.r(o);var _=s(14),v=Object(_.a)({},(function(){var t=this,o=t._self._c;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("h1",{attrs:{id:"synchronized-monitoring-tool"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#synchronized-monitoring-tool"}},[t._v("#")]),t._v(" 同步监控工具 ")]),t._v(" "),o("p",[t._v("Desync_monitor是一种特殊工具，可用于验证指定节点上的数据库是否已同步。")]),t._v(" "),o("p",[t._v("该工具可以作为守护进程使用，也可以启动以执行一次性检查。")]),t._v(" "),o("p",[t._v("该工具的操作原理基于以下内容：")]),t._v(" "),o("blockquote",[o("ol",[o("li",[t._v("每个区块包含所有交易的所有更改的哈希，请求指定的节点提供其最后一个区块ID；")]),t._v(" "),o("li",[t._v("然后从所有节点请求具有该ID的区块，并比较上述哈希；")]),t._v(" "),o("li",[t._v("如果哈希不同，会将同步错误消息发送到命令中指定的电子邮件地址。")])])]),t._v(" "),o("h2",{attrs:{id:"location"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#location"}},[t._v("#")]),t._v(" 位置 ")]),t._v(" "),o("p",[t._v("该工具位于 "),o("code",[t._v("tools/desync_monitor/")]),t._v("。")]),t._v(" "),o("h2",{attrs:{id:"command-prompt-flags"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#command-prompt-flags"}},[t._v("#")]),t._v(" 命令提示标志 ")]),t._v(" "),o("p",[t._v("可以从命令提示符使用以下标志：")]),t._v(" "),o("blockquote",[o("ul",[o("li",[o("strong",[t._v("confPath")]),t._v(" -- 配置文件的路径。默认文件名为 "),o("code",[t._v("config.toml")]),t._v("；")]),t._v(" "),o("li",[o("strong",[t._v("nodesList")]),t._v(" -- 请求区块的节点列表，以逗号分隔。默认为"),o("code",[t._v("127.0.0.1:7079")]),t._v("；")]),t._v(" "),o("li",[o("strong",[t._v("daemonMode")]),t._v(" -- 作为守护进程启动，应该在每N秒需要验证的情况下使用。该标志默认设置为 "),o("code",[t._v("false")]),t._v("；")]),t._v(" "),o("li",[o("strong",[t._v("queryingPeriod")]),t._v(" -- 如果工具作为守护进程启动，该参数设置检查之间的时间间隔(以秒为单位)。默认为 "),o("code",[t._v("1")]),t._v(" 秒。")])])]),t._v(" "),o("ul",[o("li",[o("p",[o("strong",[t._v("alertMessageTo")]),t._v(" -- 将向其发送同步警告错误的电子邮件地址。")]),t._v(" "),o("blockquote",[o("ul",[o("li",[o("strong",[t._v("alertMessageSubj")]),t._v(" -- 在警告消息中的消息主题，默认为节点同步问题；")]),t._v(" "),o("li",[o("strong",[t._v("alertMessageFrom")]),t._v(" -- 发送消息的地址。")]),t._v(" "),o("li",[o("strong",[t._v("smtpHost")]),t._v(" -- SMTP服务器主机，用于发送电子邮件，默认为"),o("code",[t._v('""')]),t._v("；")]),t._v(" "),o("li",[o("strong",[t._v("smtpPort")]),t._v(" -- SMTP服务器端口，用于发送电子邮件消息，默认为"),o("code",[t._v("25")]),t._v("；")]),t._v(" "),o("li",[o("strong",[t._v("smtpUsername")]),t._v(" -- SMTP服务器用户名，默认为 "),o("code",[t._v('""')]),t._v("；")]),t._v(" "),o("li",[o("strong",[t._v("smtpPassword")]),t._v(" -- SMTP服务器密码，默认为 "),o("code",[t._v('""')]),t._v("。")])])])])]),t._v(" "),o("h2",{attrs:{id:"configuration"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#configuration"}},[t._v("#")]),t._v(" 配置 ")]),t._v(" "),o("p",[t._v("该工具使用toml格式的配置文件。")]),t._v(" "),o("p",[t._v("默认情况下，它会在启动二进制文件的文件夹中查找 "),o("em",[t._v("config.toml")]),t._v(" 文件。")]),t._v(" "),o("p",[t._v("可以使用 "),o("strong",[t._v("configPath")]),t._v(" 标志更改文件路径。")]),t._v(" "),o("div",{staticClass:"language-text extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v('nodes_list = ["http://127.0.0.1:7079", "http://127.0.0.1:7002"]\n\n[daemon]\ndaemon = false\nquerying_period = 1\n\n[alert_message]\nto = ""\nsubject = "problem with xxx nodes"\nfrom = ""\n\n[smtp]\nhost = ""\nport = 25\nusername = ""\npassword = ""\n')])])]),o("h3",{attrs:{id:"nodes-list"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#nodes-list"}},[t._v("#")]),t._v(" nodes_list ")]),t._v(" "),o("blockquote",[o("ul",[o("li",[o("strong",[t._v("nodes_list")]),t._v(" -- 请求信息的节点（主机）列表。")])])]),t._v(" "),o("h3",{attrs:{id:"daemon"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#daemon"}},[t._v("#")]),t._v(" [daemon] ")]),t._v(" "),o("p",[t._v("守护进程模式配置。")]),t._v(" "),o("blockquote",[o("ul",[o("li",[o("strong",[t._v("daemon_mode")]),t._v(" -- 工具作为守护进程工作并执行同步检查。")]),t._v(" "),o("li",[o("strong",[t._v("querying_period")]),t._v(" -- 同步检查之间的时间间隔。")])])]),t._v(" "),o("h3",{attrs:{id:"alert-message"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#alert-message"}},[t._v("#")]),t._v(" [alert_message] ")]),t._v(" "),o("p",[t._v("警告消息参数。")]),t._v(" "),o("blockquote",[o("ul",[o("li",[o("strong",[t._v("to")]),t._v(" -- 同步错误警告消息的收件地址；")]),t._v(" "),o("li",[o("strong",[t._v("subject")]),t._v(" -- 消息主题；")]),t._v(" "),o("li",[o("strong",[t._v("from")]),t._v(" -- 发件地址。")])])]),t._v(" "),o("h3",{attrs:{id:"smtp"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#smtp"}},[t._v("#")]),t._v(" [smtp] ")]),t._v(" "),o("p",[t._v("简单邮件传输协议 (Simple Mail Transfer Protocol, SMTP) 服务器的参数，用于发送同步错误消息。")]),t._v(" "),o("blockquote",[o("ul",[o("li",[o("strong",[t._v("host")]),t._v(" -- SMTP服务器主机；")]),t._v(" "),o("li",[o("strong",[t._v("port")]),t._v(" --SMTP服务器端口；")]),t._v(" "),o("li",[o("strong",[t._v("username")]),t._v(" -- SMTP服务器用户名；")]),t._v(" "),o("li",[o("strong",[t._v("password")]),t._v(" --SMTP服务器密码；")])])])])}),[],!1,null,null,null);o.default=v.exports}}]);