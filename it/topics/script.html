<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Smart Contracts </a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/it/topics/script.html#contract-structure" class="sidebar-link">Contract Structure </a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/it/topics/script.html#data-section" class="sidebar-link">Data section </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#conditions-section" class="sidebar-link">Conditions section </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#action-section" class="sidebar-link">Action section </a></li></ul></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#variables" class="sidebar-link">Variables </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#nested-contracts" class="sidebar-link">Nested Contracts </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#file-upload" class="sidebar-link">File upload </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#queries-in-json-format" class="sidebar-link">Queries in JSON format </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#queries-with-date-and-time-operations" class="sidebar-link">Queries with date and time operations </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#needle-contract-language" class="sidebar-link">Needle contract language </a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/it/topics/script.html#basic-elements-and-structure" class="sidebar-link">Basic elements and structure </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#data-types-and-variables" class="sidebar-link">Data types and variables </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#array" class="sidebar-link">Array </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#if-and-while-statements" class="sidebar-link">If and While statements </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#functions" class="sidebar-link">Functions </a></li></ul></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#needle-functions-classification" class="sidebar-link">Needle functions classification </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#needle-functions-reference" class="sidebar-link">Needle functions reference </a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/it/topics/script.html#appparam" class="sidebar-link">AppParam </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#dbfind" class="sidebar-link">DBFind </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#dbrow" class="sidebar-link">DBRow </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#dbselectmetrics" class="sidebar-link">DBSelectMetrics </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#ecosysparam" class="sidebar-link">EcosysParam </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#gethistory" class="sidebar-link">GetHistory </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#gethistoryrow" class="sidebar-link">GetHistoryRow </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#getcolumntype" class="sidebar-link">GetColumnType </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#getdatafromxlsx" class="sidebar-link">GetDataFromXLSX </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#getrowscountxlsx" class="sidebar-link">GetRowsCountXLSX </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#langres" class="sidebar-link">LangRes </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#getblock" class="sidebar-link">GetBlock </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#dbinsert" class="sidebar-link">DBInsert </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#dbupdate" class="sidebar-link">DBUpdate </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#dbupdateext" class="sidebar-link">DBUpdateExt </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#delcolumn" class="sidebar-link">DelColumn </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#deltable" class="sidebar-link">DelTable </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#append" class="sidebar-link">Append </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#join" class="sidebar-link">Join </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#split" class="sidebar-link">Split </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#len" class="sidebar-link">Len </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#row" class="sidebar-link">Row </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#one" class="sidebar-link">One </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#getmapkeys" class="sidebar-link">GetMapKeys </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#sortedkeys" class="sidebar-link">SortedKeys </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#callcontract" class="sidebar-link">CallContract </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#contractaccess" class="sidebar-link">ContractAccess </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#contractconditions" class="sidebar-link">ContractConditions </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#evalcondition" class="sidebar-link">EvalCondition </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#getcontractbyid" class="sidebar-link">GetContractById </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#getcontractbyname" class="sidebar-link">GetContractByName </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#roleaccess" class="sidebar-link">RoleAccess </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#transactioninfo" class="sidebar-link">TransactionInfo </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#throw" class="sidebar-link">Throw </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#validatecondition" class="sidebar-link">ValidateCondition </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#addresstoid" class="sidebar-link">AddressToId </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#idtoaddress" class="sidebar-link">IdToAddress </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#pubtoid" class="sidebar-link">PubToID </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#decodebase64" class="sidebar-link">DecodeBase64 </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#encodebase64" class="sidebar-link">EncodeBase64 </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#float" class="sidebar-link">Float </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#hextobytes" class="sidebar-link">HexToBytes </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#formatmoney" class="sidebar-link">FormatMoney </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#random" class="sidebar-link">Random </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#int" class="sidebar-link">Int </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#hash" class="sidebar-link">Hash </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#sha256" class="sidebar-link">Sha256 </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#str" class="sidebar-link">Str </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#jsonencode" class="sidebar-link">JSONEncode </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#jsonencodeindent" class="sidebar-link">JSONEncodeIndent </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#jsondecode" class="sidebar-link">JSONDecode </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#hasprefix" class="sidebar-link">HasPrefix </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#contains" class="sidebar-link">Contains </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#replace" class="sidebar-link">Replace </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#size" class="sidebar-link">Size </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#sprintf" class="sidebar-link">Sprintf </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#substr" class="sidebar-link">Substr </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#tolower" class="sidebar-link">ToLower </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#toupper" class="sidebar-link">ToUpper </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#trimspace" class="sidebar-link">TrimSpace </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#floor" class="sidebar-link">Floor </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#log" class="sidebar-link">Log </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#log10" class="sidebar-link">Log10 </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#pow" class="sidebar-link">Pow </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#round" class="sidebar-link">Round </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#sqrt" class="sidebar-link">Sqrt </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#stringtobytes" class="sidebar-link">StringToBytes </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#bytestostring" class="sidebar-link">BytesToString </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#sysparamstring" class="sidebar-link">SysParamString </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#sysparamint" class="sidebar-link">SysParamInt </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#dbupdatesysparam" class="sidebar-link">DBUpdateSysParam </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#updatenotifications" class="sidebar-link">UpdateNotifications </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#updaterolesnotifications" class="sidebar-link">UpdateRolesNotifications </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#httprequest" class="sidebar-link">HTTPRequest </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#httppostjson" class="sidebar-link">HTTPPostJSON </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#blocktime" class="sidebar-link">BlockTime </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#datetime" class="sidebar-link">DateTime </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#unixdatetime" class="sidebar-link">UnixDateTime </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#createobs" class="sidebar-link">CreateOBS </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#getobslist" class="sidebar-link">GetOBSList </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#runobs" class="sidebar-link">RunOBS </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#stopobs" class="sidebar-link">StopOBS </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#removeobs" class="sidebar-link">RemoveOBS </a></li></ul></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#system-contracts" class="sidebar-link">System Contracts </a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/it/topics/script.html#newecosystem" class="sidebar-link">NewEcosystem </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#editecosystemname" class="sidebar-link">EditEcosystemName </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#newcontract" class="sidebar-link">NewContract </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#editcontract" class="sidebar-link">EditContract </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#bindwallet" class="sidebar-link">BindWallet </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#unbindwallet" class="sidebar-link">UnbindWallet </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#newparameter" class="sidebar-link">NewParameter </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#editparameter" class="sidebar-link">EditParameter </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#newmenu" class="sidebar-link">NewMenu </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#editmenu" class="sidebar-link">EditMenu </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#appendmenu" class="sidebar-link">AppendMenu </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#newpage" class="sidebar-link">NewPage </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#editpage" class="sidebar-link">EditPage </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#appendpage" class="sidebar-link">AppendPage </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#newblock" class="sidebar-link">NewBlock </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#editblock" class="sidebar-link">EditBlock </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#newtable" class="sidebar-link">NewTable </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#edittable" class="sidebar-link">EditTable </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#newcolumn" class="sidebar-link">NewColumn </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#editcolumn" class="sidebar-link">EditColumn </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#newlang" class="sidebar-link">NewLang </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#editlang" class="sidebar-link">EditLang </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#import" class="sidebar-link">Import </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#importupload" class="sidebar-link">ImportUpload </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#newappparam" class="sidebar-link">NewAppParam </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#editappparam" class="sidebar-link">EditAppParam </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#newdelayedcontract" class="sidebar-link">NewDelayedContract </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#editdelayedcontract" class="sidebar-link">EditDelayedContract </a></li><li class="sidebar-sub-header"><a href="/it/topics/script.html#uploadbinary" class="sidebar-link">UploadBinary </a></li></ul></li></ul></li><li><a href="/it/topics/templates2.html" class="sidebar-link">Template Language </a></li><li><a href="/it/topics/vm.html" class="sidebar-link">Compiler and Virtual Machine </a></li><li><a href="/it/topics/daemons.html" class="sidebar-link">Daemon </a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="smart-contracts"><a href="#smart-contracts" class="header-anchor">#</a> Smart Contracts </h1> <ul><li><a href="#contract-structure">Contract Structure</a> <ul><li><a href="#data-section">Data section</a></li> <li><a href="#conditions-section">Conditions section</a></li> <li><a href="#action-section">Action section</a></li></ul></li> <li><a href="#variables">Variables</a></li> <li><a href="#nested-contracts">Nested Contracts</a></li> <li><a href="#file-upload">File upload</a></li> <li><a href="#queries-in-json-format">Queries in JSON format</a></li> <li><a href="#queries-with-date-and-time-operations">Queries with date and time operations</a></li> <li><a href="#needle-contract-language">Needle contract language</a> <ul><li><a href="#basic-elements-and-structure">Basic elements and structure</a></li> <li><a href="#data-types-and-variables">Data types and variables</a></li> <li><a href="#array">Array</a></li> <li><a href="#if-and-while-statements">If and While statements</a></li></ul></li> <li><a href="#functions">Functions</a> <ul><li><a href="#function-declaration">Function declaration</a></li> <li><a href="#variable-length-parameters">Variable-length parameters</a></li> <li><a href="#optional-parameters">Optional parameters</a></li></ul></li> <li><a href="#needle-functions-classification">Needle functions classification</a></li> <li><a href="#needle-functions-reference">Needle functions reference</a> <ul><li><a href="#appparam">AppParam</a></li> <li><a href="#dbfind">DBFind</a></li> <li><a href="#dbrow">DBRow</a></li> <li><a href="#dbselectmetrics">DBSelectMetrics</a></li> <li><a href="#ecosysparam">EcosysParam</a></li> <li><a href="#gethistory">GetHistory</a></li> <li><a href="#gethistoryrow">GetHistoryRow</a></li> <li><a href="#getcolumntype">GetColumnType</a></li> <li><a href="#getdatafromxlsx">GetDataFromXLSX</a></li> <li><a href="#getrowscountxlsx">GetRowsCountXLSX</a></li> <li><a href="#langres">LangRes</a></li> <li><a href="#getblock">GetBlock</a></li> <li><a href="#dbinsert">DBInsert</a></li> <li><a href="#dbupdate">DBUpdate</a></li> <li><a href="#dbupdateext">DBUpdateExt</a></li> <li><a href="#delcolumn">DelColumn</a></li> <li><a href="#deltable">DelTable</a></li> <li><a href="#append">Append</a></li> <li><a href="#join">Join</a></li> <li><a href="#split">Split</a></li> <li><a href="#len">Len</a></li> <li><a href="#row">Row</a></li> <li><a href="#one">One</a></li> <li><a href="#getmapkeys">GetMapKeys</a></li> <li><a href="#sortedkeys">SortedKeys</a></li> <li><a href="#callcontract">CallContract</a></li> <li><a href="#contractaccess">ContractAccess</a></li> <li><a href="#contractconditions">ContractConditions</a></li> <li><a href="#evalcondition">EvalCondition</a></li> <li><a href="#getcontractbyid">GetContractById</a></li> <li><a href="#getcontractbyname">GetContractByName</a></li> <li><a href="#roleaccess">RoleAccess</a></li> <li><a href="#transactioninfo">TransactionInfo</a></li> <li><a href="#throw">Throw</a></li> <li><a href="#validatecondition">ValidateCondition</a></li> <li><a href="#addresstoid">AddressToId</a></li> <li><a href="#idtoaddress">IdToAddress</a></li> <li><a href="#pubtoid">PubToID</a></li> <li><a href="#decodebase64">DecodeBase64</a></li> <li><a href="#encodebase64">EncodeBase64</a></li> <li><a href="#float">Float</a></li> <li><a href="#hextobytes">HexToBytes</a></li> <li><a href="#formatmoney">FormatMoney</a></li> <li><a href="#random">Random</a></li> <li><a href="#int">Int</a></li> <li><a href="#hash">Hash</a></li> <li><a href="#sha256">Sha256</a></li> <li><a href="#str">Str</a></li> <li><a href="#jsonencode">JSONEncode</a></li> <li><a href="#jsonencodeindent">JSONEncodeIndent</a></li> <li><a href="#jsondecode">JSONDecode</a></li> <li><a href="#hasprefix">HasPrefix</a></li> <li><a href="#contains">Contains</a></li> <li><a href="#replace">Replace</a></li> <li><a href="#size">Size</a></li> <li><a href="#sprintf">Sprintf</a></li> <li><a href="#substr">Substr</a></li> <li><a href="#tolower">ToLower</a></li> <li><a href="#toupper">ToUpper</a></li> <li><a href="#trimspace">TrimSpace</a></li> <li><a href="#floor">Floor</a></li> <li><a href="#log">Log</a></li> <li><a href="#log10">Log10</a></li> <li><a href="#pow">Pow</a></li> <li><a href="#round">Round</a></li> <li><a href="#sqrt">Sqrt</a></li> <li><a href="#stringtobytes">StringToBytes</a></li> <li><a href="#bytestostring">BytesToString</a></li> <li><a href="#sysparamstring">SysParamString</a></li> <li><a href="#sysparamint">SysParamInt</a></li> <li><a href="#dbupdatesysparam">DBUpdateSysParam</a></li> <li><a href="#updatenotifications">UpdateNotifications</a></li> <li><a href="#updaterolesnotifications">UpdateRolesNotifications</a></li> <li><a href="#httprequest">HTTPRequest</a></li> <li><a href="#httppostjson">HTTPPostJSON</a></li> <li><a href="#blocktime">BlockTime</a></li> <li><a href="#datetime">DateTime</a></li> <li><a href="#unixdatetime">UnixDateTime</a></li> <li><a href="#createobs">CreateOBS</a></li> <li><a href="#getobslist">GetOBSList</a></li> <li><a href="#runobs">RunOBS</a></li> <li><a href="#stopobs">StopOBS</a></li> <li><a href="#removeobs">RemoveOBS</a></li></ul></li> <li><a href="#system-contracts">System Contracts</a> <ul><li><a href="#newecosystem">NewEcosystem</a></li> <li><a href="#editecosystemname">EditEcosystemName</a></li> <li><a href="#newcontract">NewContract</a></li> <li><a href="#editcontract">EditContract</a></li> <li><a href="#bindwallet">BindWallet</a></li> <li><a href="#unbindwallet">UnbindWallet</a></li> <li><a href="#newparameter">NewParameter</a></li> <li><a href="#editparameter">EditParameter</a></li> <li><a href="#newmenu">NewMenu</a></li> <li><a href="#editmenu">EditMenu</a></li> <li><a href="#appendmenu">AppendMenu</a></li> <li><a href="#newpage">NewPage</a></li> <li><a href="#editpage">EditPage</a></li> <li><a href="#appendpage">AppendPage</a></li> <li><a href="#newblock">NewBlock</a></li> <li><a href="#editblock">EditBlock</a></li> <li><a href="#newtable">NewTable</a></li> <li><a href="#edittable">EditTable</a></li> <li><a href="#newcolumn">NewColumn</a></li> <li><a href="#editcolumn">EditColumn</a></li> <li><a href="#newlang">NewLang</a></li> <li><a href="#editlang">EditLang</a></li> <li><a href="#import">Import</a></li> <li><a href="#importupload">ImportUpload</a></li> <li><a href="#newappparam">NewAppParam</a></li> <li><a href="#editappparam">EditAppParam</a></li> <li><a href="#newdelayedcontract">NewDelayedContract</a></li> <li><a href="#editdelayedcontract">EditDelayedContract</a></li> <li><a href="#uploadbinary">UploadBinary</a></li></ul></li></ul> <p>Smart Contract (hereinafter referred to as Contract) is one of the basic elements of an application. The implementation of a contract on a page by the user is usually a single operation that the purpose is to update or create a database entry. All data operations of an application form a contract system, and these contracts interact with each other through database or contract content functions.</p> <h2 id="contract-structure"><a href="#contract-structure" class="header-anchor">#</a> Contract Structure </h2> <p>Use the keyword <code>contract</code> to declare a contract, followed by the contract name, and the contract content must be enclosed in braces. A contract mainly consists of three sections:</p> <ol><li><p><strong>data</strong> - <a href="#data-section">data section</a>, where declares the variables of the input data, including variable name and variable type;</p></li> <li><p><strong>conditions</strong> - <a href="#conditions-section">conditions section</a>, where validates the correctness of the data;</p></li> <li><p><strong>action</strong> - <a href="#action-section">action section</a>, where defines the data manipulations.</p></li></ol> <div class="language- extra-class"><pre class="language-text"><code>contract MyContract {
  data {
    FromId int
    ToId int
    Amount money
  }
  func conditions {
    ...
  }
  func action {
    ...
  }
}
</code></pre></div><h3 id="data-section"><a href="#data-section" class="header-anchor">#</a> Data section </h3> <p>The <code>data</code> section describes the contract data inputs and the form parameters received.</p> <p>The structure of each line by sequence:</p> <ul><li>Variable name - only receive variables, not arrays;</li> <li>Variable data type - the <a href="#data-types-and-variables">data type</a> of the variable;</li> <li>optional - an optional parameter that do not need to fill in the form element.</li></ul> <div class="language- extra-class"><pre class="language-text"><code>contract my {
  data {
  Name string
  RequestId int
  Photo file &quot;optional&quot;
  Amount money
  Private bytes
  }
  ...
}
</code></pre></div><h3 id="conditions-section"><a href="#conditions-section" class="header-anchor">#</a> Conditions section </h3> <p>The <code>conditions</code> section describes the validation of data received.</p> <p>The following commands are used for error warnings: serious errors <code>error</code>, warning errors <code>warning</code>, suggestive errors <code>info</code>. These three commands will generate an error that terminates the execution of contracts, and each error will print a different type of error log information. For example:</p> <div class="language- extra-class"><pre class="language-text"><code>if fuel == 0 {
    error &quot;fuel cannot be zero!&quot;
}
if money &lt; limit {
    warning Sprintf(&quot;You don't have enough money: %v &lt;%v&quot;, money, limit)
}
if idexist &gt; 0 {
    info &quot;You have already been registered&quot;
}
</code></pre></div><h3 id="action-section"><a href="#action-section" class="header-anchor">#</a> Action section </h3> <p>The <code>action</code> section describes the main code of the contract, which retrieves other data and records the result values in tables. For example:</p> <div class="language- extra-class"><pre class="language-text"><code>action {
DBUpdate(&quot;keys&quot;, $key_id, {&quot;-amount&quot;: $amount})
DBUpdate(&quot;keys&quot;, $recipient, {&quot;+amount&quot;: $amount, &quot;pub&quot;: $Pub})
}
</code></pre></div><h2 id="variables"><a href="#variables" class="header-anchor">#</a> Variables </h2> <p>Variables declared in the data section are passed to other contract sections through the <code>$</code> symbol followed by the variable name. The <code>$</code> symbol can also be used to declare other variables that are not within the data section, which are considered as global variables of this contract and all contracts that this contract is nested.</p> <p>Pre-defined variables can be used in contracts, which contain transaction data that called the contract:</p> <ul><li><code>$time</code> - transaction timestamp;</li> <li><code>$ecosystem_id</code> - ecosystem ID;</li> <li><code>$block</code> - ID of the block containing the transaction;</li> <li><code>$key_id</code> - address of the account that signed the current transaction;</li> <li><code>$type</code> - contract ID in the virtual machine;</li> <li><code>$block_key_id</code> - account address of the node generated the block;</li> <li><code>$block_time</code> - block generation timestamp;</li> <li><code>$original_contract</code> - name of the contract that initially processed the transaction. It means the contract is called during transaction validation if the variable is an empty string. To check whether the contract is called by another contract or directly by the transaction, you need to compare the values of $original_contract and $this_contract. It means that the contract is called by the transaction if they are equal;</li> <li><code>$this_contract</code> - name of the contract currently being executed;</li> <li><code>$guest_key</code> - guest account address;</li> <li><code>$stack</code> - contract array stack with a data type of array, containing all contracts executed. The first element of the array represents the name of the contract currently being executed, while the last element represents the name of the contract that initially processed the transaction;</li> <li><code>$node_position</code> - the index number of the verification node array where the block is located;</li> <li><code>$txhash</code> - transaction hash;</li> <li><code>$contract</code> - the current contract structure array.</li></ul> <p>Predefined variables can be accessed not only in contracts, but also in permission fields that defines the access permission conditions of the application elements. When used in permission fields, predefined variables for block information are always equal to zero, such as <code>$time</code>, <code>$block</code>, etc.</p> <p>A predefined variable <code>$result</code> is assigned with the return result of the contract.</p> <div class="language- extra-class"><pre class="language-text"><code>contract my {
 data {
     Name string
     Amount money
 }
 func conditions {
     if $Amount &lt;= 0 {
     error &quot;Amount cannot be 0&quot;
     }
     $ownerId = 1232
 }
 func action {
     var amount money
     amount = $Amount - 10
     DBUpdate(&quot;mytable&quot;, $ownerId, {name: $Name,amount: amount})
     DBUpdate(&quot;mytable2&quot;, $ownerId, {amount: 10})
 }
}
</code></pre></div><h2 id="nested-contracts"><a href="#nested-contracts" class="header-anchor">#</a> Nested Contracts </h2> <p>You can nest contracts in the conditions and action sections of the contract. Nested contracts can be called directly, and the contract parameters are specified in parentheses after the contract name, for example, <code>@1NameContract(Params)</code>. You may also call nested contracts with the <a href="#callcontract">CallContract</a> function.</p> <h2 id="file-upload"><a href="#file-upload" class="header-anchor">#</a> File upload </h2> <p>To upload a file using a form in the format of <code>multipart/form-data</code>, the data type of the contract must be <code>file</code>.</p> <div class="language- extra-class"><pre class="language-text"><code>contract Upload {
     data {
  	   File file
     }
     ...
}
</code></pre></div><p>The <a href="#uploadbinary">UploadBinary</a> contract is used to upload and store files. With the Logicor language function <a href="/it/topics/templates2.html#binary">Binary</a> in the page editor, you can get the file download link.</p> <h2 id="queries-in-json-format"><a href="#queries-in-json-format" class="header-anchor">#</a> Queries in JSON format </h2> <p>In the contract language, <strong>JSON</strong> can be specified as a field type. You can use the syntax: <strong>columnname-&gt;fieldname</strong> to process the entry field. The value obtained is recorded in <strong>columnname.fieldname</strong>. The above syntax can be used in Columns,One,Where of the <a href="#dbfind">DBFind</a> function.</p> <div class="language- extra-class"><pre class="language-text"><code>var ret map
var val str
var list array
ret = DBFind(&quot;mytable&quot;).Columns(&quot;myname,doc,doc-&gt;ind&quot;).WhereId($Id).Row()
val = ret[&quot;doc.ind&quot;]
val = DBFind(&quot;mytable&quot;).Columns(&quot;myname,doc-&gt;type&quot;).WhereId($Id).One(&quot;doc-&gt;type&quot;)
list = DBFind(&quot;mytable&quot;).Columns(&quot;myname,doc,doc-&gt;ind&quot;).Where(&quot;doc-&gt;ind = ?&quot;, &quot;101&quot;)
val = DBFind(&quot;mytable&quot;).WhereId($Id).One(&quot;doc-&gt;check&quot;)
</code></pre></div><h2 id="queries-with-date-and-time-operations"><a href="#queries-with-date-and-time-operations" class="header-anchor">#</a> Queries with date and time operations </h2> <p>You cannot directly query and update the date and time with the contract language functions, but you can use PostgreSQL functions and features in the Where statement as in the example below. For example, you need to compare the field date_column with the current time. If date_column is a timestamp type, the expression should be <code>date_column &lt;NOW()</code>; if date_column is a Unix type, the expression should be <code>to_timestamp(date_column)&gt; NOW()</code>.</p> <div class="language- extra-class"><pre class="language-text"><code>Where(&quot;to_timestamp(date_column)&gt; NOW()&quot;)
Where(&quot;date_column &lt;NOW() - 30 * interval '1 day'&quot;)
</code></pre></div><p>The following Needle function is used to process date and time in SQL format:</p> <ul><li><a href="#blocktime">BlockTime</a></li> <li><a href="#datetime">DateTime</a></li> <li><a href="#unixdatetime">UnixDateTime</a></li></ul> <h2 id="needle-contract-language"><a href="#needle-contract-language" class="header-anchor">#</a> Needle contract language </h2> <p>The contract language includes a set of functions, operators and structures, which can realize data algorithm processing and database operations.</p> <p>The contract content can be modified if the contract editing permission is not set to <code>false</code>. The complete history of contract changes is stored in the blockchain, which is available in Weaver.</p> <p>Data operations in the blockchain are executed in accordance with the latest version of the contract.</p> <h3 id="basic-elements-and-structure"><a href="#basic-elements-and-structure" class="header-anchor">#</a> Basic elements and structure </h3> <h3 id="data-types-and-variables"><a href="#data-types-and-variables" class="header-anchor">#</a> Data types and variables </h3> <p>Data type must be defined for every variables. Normally, data types are converted automatically. The following data types can be used:</p> <ul><li><code>bool</code> - Boolean, <code>true</code> or <code>false</code>;</li> <li><code>bytes</code> - a byte format;</li> <li><code>Int</code> - a 64-bit integer;</li> <li><code>Array</code> - an array of any type;</li> <li><code>map</code> - an object array;</li> <li><code>money</code> - a big integer;</li> <li><code>float</code> - a 64-bit float number;</li> <li><code>string</code> - a string must be defined with double quotes or escape format: &quot;This is a string&quot; or `This is a string`;</li> <li><code>file</code> - an object array:
<ul><li><code>Name</code> - file name, <code>string</code> type;</li> <li><code>MimeType</code> - <strong>mime-type</strong> file, <code>string</code> type;</li> <li><code>Body</code> - file content, <code>bytes</code> type.</li></ul></li></ul> <p>All identifiers, including the names of variables, functions and contracts, are case sensitive (MyFunc and myFunc are different names).</p> <p>Use the <strong>var</strong> keyword to declare a variable, followed by the name and type of the variable. Variables declared in braces must be used in the same pair of braces.</p> <p>The default value of any variable declared is zero: the zero value of bool type is false, the zero value of all numeric types is 0, and the zero value, for strings, empty strings. An example of variable declaration:</p> <div class="language- extra-class"><pre class="language-text"><code>func myfunc( val int) int {
  var mystr1 mystr2 string, mypar int
  var checked bool
  ...
  if checked {
    var temp int
    ...
  }
}
</code></pre></div><h3 id="array"><a href="#array" class="header-anchor">#</a> Array </h3> <p>The contract language supports two array types:</p> <ul><li><code>Array</code> - an array with index starting from 0;</li> <li><code>map</code> - an array of objects.</li></ul> <p>When allocating and retrieving array elements, the index must be placed in square brackets. Multiple indexes are not supported in the array, and the array elements cannot be treated as myarr[i][j].</p> <div class="language- extra-class"><pre class="language-text"><code>var myarr array
var mymap map
var s string

myarr[0] = 100
myarr[1] = &quot;This is a line&quot;
mymap[&quot;value&quot;] = 777
mymap[&quot;param&quot;] = &quot;Parameter&quot;

s = Sprintf(&quot;%v, %v, %v&quot;, myarr[0] + mymap[&quot;value&quot;], myarr[1], mymap[&quot;param&quot;])
// s = 877, This is a line, Parameter
</code></pre></div><p>You can also define arrays of array type by specifying elements in <code>[]</code>. For map type <code>arrays</code>, please use <code>{}</code>.</p> <div class="language- extra-class"><pre class="language-text"><code>var my map
my={&quot;key1&quot;: &quot;value1&quot;, key2: i, &quot;key3&quot;: $Name}
var mya array
mya=[&quot;value1&quot;, {key2: i}, $Name]
</code></pre></div><p>You can use such initialization in expressions. For example, use it in function parameters.</p> <div class="language- extra-class"><pre class="language-text"><code>DBFind...Where({id: 1})
</code></pre></div><p>For an array of objects, you must specify a key. Key are specified as strings in double quotes (<code>&quot;&quot;</code>). If the key name is limited to letters, numbers and underscores, you can omit the double quotes.</p> <div class="language- extra-class"><pre class="language-text"><code>{key1: &quot;value1&quot;, key2: &quot;value2&quot;}
</code></pre></div><p>An array can contain strings, numbers, variable names of any type, and variable names with the <code>$</code> symbol. It supports nested arrays. You can specify different maps or arrays as values.</p> <p>Expressions cannot be used as array elements. Use a variable to store the expression result and specify this variable as an array element.</p> <div class="language- extra-class"><pre class="language-text"><code>[1+2, myfunc(), name[&quot;param&quot;]] // don't do this
[1, 3.4, mystr, &quot;string&quot;, $ext, myarr, mymap, {&quot;ids&quot;: [1,2, i], company: {&quot;Name&quot;: &quot;MyCompany&quot;}} ] // this is ok

var val string
val = my[&quot;param&quot;]
MyFunc({key: val, sub: {name: &quot;My name&quot;, &quot;color&quot;: &quot;Red&quot;}})
</code></pre></div><h3 id="if-and-while-statements"><a href="#if-and-while-statements" class="header-anchor">#</a> If and While statements </h3> <p>The contract language supports standard <strong>if</strong> conditional statements and <strong>while</strong> loops, which can be used in contracts and functions. These statements can be nested within each other.</p> <p><strong>if</strong> and <strong>while</strong> must be followed by a conditional statement. If the conditional statement returns a number, it is regarded as false when its value is 0.</p> <p>val == 0 is equal to !val, val != 0 is equal to val. The <strong>if</strong> statement can have an <strong>else</strong> code block, and the <strong>else</strong> is executed when the <strong>if</strong> conditional statement is false.</p> <p>The following comparison operators can be used in conditional statements: <code>&lt;, &gt;, &gt;=, &lt;=, ==, !=, ||, &amp;&amp;</code></p> <div class="language- extra-class"><pre class="language-text"><code>if val&gt; 10 || id != $block_key_id {
 ...
} else {
 ...
}
</code></pre></div><p>The code block is executed when the conditional statement of the <strong>while</strong> loop is true. <strong>break</strong> means to terminate the loop of the code block. If you want to start a loop from the beginning, use <strong>continue</strong>.</p> <div class="language- extra-class"><pre class="language-text"><code>var i int
while true {
  if i &gt; 100 {
    break
  }
  ...
  if i == 50 {
    continue
  }
  ...
  i = i + 1
}
</code></pre></div><p>In addition to conditional statements, Needle also supports standard arithmetic operations: <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>.</p> <p>Variables of string and bytes types can be used as a conditional statement. If the length of the type is greater than zero, the condition is true, otherwise it is false.</p> <h3 id="functions"><a href="#functions" class="header-anchor">#</a> Functions </h3> <p>Functions can perform some operations on the data received by the <a href="#data-section">data section</a> of a contract: read and write data from the database, convert the type of value, and establish the interaction between contracts.</p> <h4 id="function-declaration"><a href="#function-declaration" class="header-anchor">#</a> Function declaration </h4> <p>Use the func keyword to declare a function, followed by the name and the list of parameters passed to it and their types. All parameters are enclosed in parentheses and separated by commas. After the parentheses, the data type of the value returned by the function must be declared. The function body must be enclosed in braces. If the function has no parameters, the braces can be omitted. To return a value from a function, use the <code>return</code> keyword.</p> <div class="language- extra-class"><pre class="language-text"><code>func myfunc(left int, right int) int {
    return left*right + left - right
}
func test int {
    return myfunc(10, 30) + myfunc(20, 50)
}
func ooops {
    error &quot;Ooops...&quot;
}
</code></pre></div><p>Function do not return errors, because all error checks are performed automatically. If there is an error in any function, the contract will terminate its operation and present the error description in a window.</p> <h4 id="variable-length-parameters"><a href="#variable-length-parameters" class="header-anchor">#</a> Variable-length parameters </h4> <p>Functions can define variable-length parameters, use the <code>...</code> symbol as the last parameter type of the function to indicate variable-length parameters, with a data type of <code>array</code>. Variable-length parameters include all variables from the time the parameter is passed in the call. All types of variables can be passed, but you need to deal with conflicts of mismatching of data types.</p> <div class="language- extra-class"><pre class="language-text"><code>func sum(out string, values ...) {
var i, res int

while i &lt;Len(values) {

   res = res + values[i]

   i = i + 1

}

Println(out, res)

}

func main() {
  sum(&quot;Sum:&quot;, 10, 20, 30, 40)
}
</code></pre></div><h4 id="optional-parameters"><a href="#optional-parameters" class="header-anchor">#</a> Optional parameters </h4> <p>A function has many parameters, but we only need some of them when calling it. In this case, you can declare optional parameters in the following way: <code>func myfunc(name string).Param1(param string).Param2(param2 int) {...}</code>, then you can call the specified parameters in any order: <code>myfunc(&quot;name&quot;).Param2(100)</code>.</p> <p>In the function body, you can handle these variables normally. If no specified optional parameters called, their default values are zero. You can also use ... to specify a variable-length parameter: <code>func DBFind(table string).Where(request string, params ...)</code> and then call it: <code>DBFind(&quot;mytable&quot;).Where({&quot; id&quot;: $myid, &quot;type&quot;: 2})</code></p> <div class="language- extra-class"><pre class="language-text"><code>func DBFind(table string).Columns(columns string).Where(format string, tail ...)
  .Limit(limit int).Offset(offset int) string {
  ...
}

func names() string {
  ...
  return DBFind(&quot;table&quot;).Columns(&quot;name&quot;).Where({&quot;id&quot;: 100}).Limit(1)
}
</code></pre></div><h2 id="needle-functions-classification"><a href="#needle-functions-classification" class="header-anchor">#</a> Needle functions classification </h2> <p>Retrieving values from the database:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><a href="#appparam">AppParam</a></td> <td><a href="#ecosysparam">EcosysParam</a></td> <td><a href="#getdatafromxlsx">GetDataFromXLSX</a></td></tr> <tr><td><a href="#dbfind">DBFind</a></td> <td><a href="#gethistory">GetHistory</a></td> <td><a href="#getrowscountxlsx">GetRowsCountXLSX</a></td></tr> <tr><td><a href="#dbrow">DBRow</a></td> <td><a href="#gethistoryrow">GetHistoryRow</a></td> <td><a href="#getblock">GetBlock</a></td></tr> <tr><td><a href="#dbselectmetrics">DBSelectMetrics</a></td> <td><a href="#getcolumntype">GetColumnType</a></td> <td><a href="#langres">LangRes</a></td></tr></tbody></table> <p>Updating data in tables:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><a href="#dbinsert">DBInsert</a></td> <td><a href="#dbupdateext">DBUpdateExt</a></td> <td><a href="#deltable">DelTable</a></td></tr> <tr><td><a href="#dbupdate">DBUpdate</a></td> <td><a href="#delcolumn">DelColumn</a></td> <td></td></tr></tbody></table> <p>Operations with arrays:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><a href="#append">Append</a></td> <td><a href="#len">Len</a></td> <td><a href="#getmapkeys">GetMapKeys</a></td></tr> <tr><td><a href="#join">Join</a></td> <td><a href="#row">Row</a></td> <td><a href="#sortedkeys">SortedKeys</a></td></tr> <tr><td><a href="#split">Split</a></td> <td><a href="#one">One</a></td> <td></td></tr></tbody></table> <p>Operations with contracts and permissions:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><a href="#callcontract">CallContract</a></td> <td><a href="#getcontractbyid">GetContractById</a></td> <td><a href="#transactioninfo">TransactionInfo</a></td></tr> <tr><td><a href="#contractaccess">ContractAccess</a></td> <td><a href="#roleaccess">RoleAccess</a></td> <td><a href="#throw">Throw</a></td></tr> <tr><td><a href="#contractconditions">ContractConditions</a></td> <td><a href="#getcontractbyname">GetContractByName</a></td> <td><a href="#validatecondition">ValidateCondition</a></td></tr> <tr><td><a href="#evalcondition">EvalCondition</a></td> <td></td> <td></td></tr></tbody></table> <p>Operations with addresses:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><a href="#addresstoid">AddressToId</a></td> <td><a href="#idtoaddress">IdToAddress</a></td> <td><a href="#pubtoid">PubToID</a></td></tr></tbody></table> <p>Operations with variable values:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><a href="#decodebase64">DecodeBase64</a></td> <td><a href="#formatmoney">FormatMoney</a></td> <td><a href="#hash">Hash</a></td></tr> <tr><td><a href="#encodebase64">EncodeBase64</a></td> <td><a href="#random">Random</a></td> <td><a href="#sha256">Sha256</a></td></tr> <tr><td><a href="#float">Float</a></td> <td><a href="#int">Int</a></td> <td><a href="#str">Str</a></td></tr> <tr><td><a href="#hextobytes">HexToBytes</a></td> <td></td> <td></td></tr></tbody></table> <p>Arithmetic operations:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><a href="#floor">Floor</a></td> <td><a href="#log10">Log10</a></td> <td><a href="#round">Round</a></td></tr> <tr><td><a href="#log">Log</a></td> <td><a href="#pow">Pow</a></td> <td><a href="#sqrt">Sqrt</a></td></tr></tbody></table> <p>Operations with JSON:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><a href="#jsonencode">JSONEncode</a></td> <td><a href="#jsonencodeindent">JSONEncodeIndent</a></td> <td><a href="#jsondecode">JSONDecode</a></td></tr></tbody></table> <p>Operations with strings:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><a href="#hasprefix">HasPrefix</a></td> <td><a href="#size">Size</a></td> <td><a href="#tolower">ToLower</a></td></tr> <tr><td><a href="#contains">Contains</a></td> <td><a href="#sprintf">Sprintf</a></td> <td><a href="#toupper">ToUpper</a></td></tr> <tr><td><a href="#replace">Replace</a></td> <td><a href="#substr">Substr</a></td> <td><a href="#trimspace">TrimSpace</a></td></tr></tbody></table> <p>Operations with bytes:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><a href="#stringtobytes">StringToBytes</a></td> <td><a href="#bytestostring">BytesToString</a></td> <td></td></tr></tbody></table> <p>Operations with date and time in SQL format:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><a href="#blocktime">BlockTime</a></td> <td><a href="#datetime">DateTime</a></td> <td><a href="#unixdatetime">UnixDateTime</a></td></tr></tbody></table> <p>Operations with platform parameters:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><a href="#sysparamstring">SysParamString</a></td> <td><a href="#sysparamint">SysParamInt</a></td> <td><a href="#dbupdatesysparam">DBUpdateSysParam</a></td></tr> <tr><td><a href="#updatenotifications">UpdateNotifications</a></td> <td><a href="#updaterolesnotifications">UpdateRolesNotifications</a></td> <td></td></tr></tbody></table> <p>CLB mode function operation:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><a href="#httprequest">HTTPRequest</a></td> <td><a href="#httppostjson">HTTPPostJSON</a></td> <td></td></tr></tbody></table> <p>Functions for master CLB nodes:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><a href="#createobs">CreateOBS</a></td> <td><a href="#runobs">RunOBS</a></td> <td><a href="#removeobs">RemoveOBS</a></td></tr> <tr><td><a href="#getobslist">GetOBSList</a></td> <td><a href="#stopobs">StopOBS</a></td> <td></td></tr></tbody></table> <h2 id="needle-functions-reference"><a href="#needle-functions-reference" class="header-anchor">#</a> Needle functions reference </h2> <h3 id="appparam"><a href="#appparam" class="header-anchor">#</a> AppParam </h3> <p>Returns the value of a specified application parameter (from the application parameter table app_params).</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>AppParam(app int, name string, ecosystemid int) string
</code></pre></div><ul><li><p><strong>App</strong></p> <p>Application ID.</p></li> <li><p><strong>name</strong></p> <p>Application parameter name.</p></li> <li><p><strong>Ecosystemid</strong></p> <p>Ecosystem ID.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>AppParam(1, &quot;app_account&quot;, 1)
</code></pre></div><h3 id="dbfind"><a href="#dbfind" class="header-anchor">#</a> DBFind </h3> <p>Queries data from a specified table with the specified parameters and returns an array array consisting of an array of objects map.</p> <p><code>.Row()</code> can get the first map element in the query, <code>.One(column string)</code> can get the first map element of a specified column in the query.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>DBFind(table string)
 [.Columns(columns array|string)]
 [.Where(where map)]
 [.WhereId(id int)]
 [.Order(order string)]
 [.Limit(limit int)]
 [.Offset(offset int)]
 [.Row()]
 [.One(column string)]
 [.Ecosystem(ecosystemid int)] array
</code></pre></div><ul><li><p><strong>table</strong></p> <p>Table name.</p></li> <li><p><strong>сolumns</strong></p> <p>Returns a list of columns. If not specified, all columns will be returned.</p> <p>The value is an array or a string separated by commas.</p></li> <li><p><strong>where</strong></p> <p>Query conditions.</p> <p>Example: <code>.Where({name: &quot;John&quot;})</code> or <code>.Where({&quot;id&quot;: {&quot;$gte&quot;: 4}})</code>.</p> <p>This parameter must contain an array of objects with search criteria. The array can contain nested elements.</p> <p>Following syntactic constructions are used:</p> <ul><li><p><code>{&quot;field1&quot;: &quot;value1&quot;, &quot;field2&quot;: &quot;value2&quot;}</code>
Equivalent to <code>field1 = &quot;value1&quot; AND field2 = &quot;value2&quot;</code>.</p></li> <li><p><code>{&quot;field1&quot;: {&quot;$eq&quot;:&quot;value&quot;}}</code>
Equivalent to <code>field = &quot;value&quot;</code>.</p></li> <li><p><code>{&quot;field1&quot;: {&quot;$neq&quot;: &quot;value&quot;}}</code>
Equivalent to <code>field != &quot;value&quot;</code>.</p></li> <li><p><code>{&quot;field1: {&quot;$in&quot;: [1,2,3]}</code>
Equivalent to <code>field IN (1,2,3)</code>.</p></li> <li><p><code>{&quot;field1&quot;: {&quot;$nin&quot;: [1,2,3]}</code>
Equivalent to field NOT IN (1,2,3).</p></li> <li><p><code>{&quot;field&quot;: {&quot;$lt&quot;: 12}}</code>
Equivalent to <code>field &lt;12</code>.</p></li> <li><p><code>{&quot;field&quot;: {&quot;$lte&quot;: 12}}</code>
Equivalent to f<code>ield &lt;= 12</code>.</p></li> <li><p><code>{&quot;field&quot;: {&quot;$gt&quot;: 12}}</code>
Equivalent to <code>field&gt; 12</code>.</p></li> <li><p><code>{&quot;field&quot;: {&quot;$gte&quot;: 12}}</code>
Equivalent to <code>field &gt;= 12</code>.</p></li> <li><p><code>{&quot;$and&quot;: [&lt;expr1&gt;, &lt;expr2&gt;, &lt;expr3&gt;]}</code>
Equivalent to <code>expr1 AND expr2 AND expr3</code>.</p></li> <li><p><code>{&quot;$or&quot;: [&lt;expr1&gt;, &lt;expr2&gt;, &lt;expr3&gt;]}</code>
Equivalent to <code>expr1 OR expr2 OR expr3</code>.</p></li> <li><p><code>{field: {&quot;$like&quot;: &quot;value&quot;}}</code>
Equivalent to <code>field like'%value%'</code> (fuzzy search).</p></li> <li><p><code>{field: {&quot;$begin&quot;: &quot;value&quot;}}</code>
Equivalent to <code>field like'value%'</code> (starts with <code>value</code>).</p></li> <li><p><code>{field: {&quot;$end&quot;: &quot;value&quot;}}</code>
Equivalent to <code>field like'%value'</code> (ends with <code>value</code>).</p></li> <li><p><code>{field: &quot;$isnull&quot;}</code>
Equivalent to field is null.</p></li></ul></li></ul> <p>Make sure not to overwrite the keys of object arrays. For example, if you want to query with <code>id&gt;2 and id&lt;5</code>, you cannot use <code>{id:{&quot;$gt&quot;: 2}, id:{&quot;$lt&quot;: 5}}</code>, because the first element will be overwritten by the second element. You should use the following query structure:</p> <div class="language- extra-class"><pre class="language-text"><code>{id: [{&quot;$gt&quot;: 2}, {&quot;$lt&quot;: 5}]}
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>{&quot;$and&quot;: [{id:{&quot;$gt&quot;: 2}}, {id:{&quot;$lt&quot;: 5}}]}
</code></pre></div><ul><li><p><strong>Id</strong></p> <p>Queries by ID. For example, .WhereId(1).</p></li> <li><p><strong>Order</strong></p> <p>Used to sort the result set by a specified column, or by id by default.</p> <p>If you use only one field for sorting, you can specify it as a string. To sort multiple fields, you need to specify an array of string objects:</p> <p>Descending order: <code>{&quot;field&quot;: &quot;-1&quot;}</code> Equivalent to <code>field desc</code>.</p> <p>Ascending order: <code>{&quot;field&quot;: &quot;1&quot;}</code> Equivalent to <code>field asc</code>.</p></li> <li><p><strong>limit</strong></p> <p>Returns the number of entries. 25, by default. The maximum number is 10,000.</p></li> <li><p><strong>Offset</strong></p> <p>Offset.</p></li> <li><p><strong>Ecosystemid</strong></p> <p>Ecosystem ID. By default, the table of the current ecosystem is queried.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var i int
var ret string
ret = DBFind(&quot;contracts&quot;).Columns(&quot;id,value&quot;).Where({id: [{&quot;$gt&quot;: 2}, {&quot;$lt&quot;: 5}]}).Order( &quot;id&quot;)
while i &lt;Len(ret) {
  var vals map
  vals = ret[0]
  Println(vals[&quot;value&quot;])
  i = i + 1
}
ret = DBFind(&quot;contracts&quot;).Columns(&quot;id,value&quot;).WhereId(10).One(&quot;value&quot;)
if ret != nil {
  Println(ret)
  Println(ret)
  Println(ret)
}
</code></pre></div><h3 id="dbrow"><a href="#dbrow" class="header-anchor">#</a> DBRow </h3> <p>Queries data from a specified table with the specified parameters. Returns an array array consisting of an array of objects map.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>DBRow(table string)
 [.Columns(columns array|string)]
 [.Where(where map)]
 [.WhereId(id int)]
 [.Order(order array|string)]
 [.Ecosystem(ecosystemid int)] map
</code></pre></div><ul><li><p><strong>table</strong></p> <p>Table name.</p></li> <li><p><strong>columns</strong></p> <p>Returns a list of columns. If not specified, all columns will be returned.</p> <p>The value is an array or a string separated by commas.</p></li> <li><p><strong>where</strong></p> <p>Query conditions.</p> <p>For example: <code>.Where({name: &quot;John&quot;})</code> or <code>.Where({&quot;id&quot;: {&quot;$gte&quot;: 4}})</code>.</p> <p>For more details, see <a href="#dbfind">DBFind</a>.</p></li> <li><p><strong>Id</strong></p> <p>Query by ID. For example, <code>.WhereId(1)</code>.</p></li> <li><p><strong>Order</strong></p> <p>Used to sort the result set by a specified column, or by id by default.</p> <p>For more details, see <a href="#dbfind">DBFind</a>.</p></li> <li><p><strong>Ecosystemid</strong></p> <p>Ecosystem ID. By default, the table of the current ecosystem is queried.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var ret map
ret = DBRow(&quot;contracts&quot;).Columns([&quot;id&quot;,&quot;value&quot;]).Where({id: 1})
Println(ret)
</code></pre></div><h3 id="dbselectmetrics"><a href="#dbselectmetrics" class="header-anchor">#</a> DBSelectMetrics </h3> <p>Returns the aggregated data of a metric.</p> <p>The metrics are updated each time 100 blocks are generated. And the aggregated data is stored on a 1-day cycle.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>DBSelectMetrics(metric string, timeInterval string, aggregateFunc string) array

</code></pre></div><ul><li><p><strong>metric</strong></p> <p>Metric name</p> <ul><li><p><strong>ecosystem_pages</strong></p> <p>Number of ecosystem pages.</p> <p>Return value: key - ecosystem ID, value - number of ecosystem pages.</p></li> <li><p><strong>ecosystem_members</strong></p> <p>Number of ecosystem members.</p> <p>Return value: key - ecosystem ID, value - number of ecosystem members.</p></li> <li><p><strong>ecosystem_tx</strong></p> <p>Number of ecosystem transactions.</p> <p>Return value: key - ecosystem ID, value - number of ecosystem transactions.</p></li></ul></li> <li><p><strong>timeInterval</strong></p> <p>The time interval for aggregating metric data. For example: <code>1 day</code>, <code>30 days</code>.</p></li> <li><p><strong>aggregateFunc</strong></p> <p>Aggregate function. For example, <code>max</code>, <code>min</code>, <code>avg</code>.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var rows array
rows = DBSelectMetrics(&quot;ecosystem_tx&quot;, &quot;30 days&quot;, &quot;avg&quot;)
var i int
while(i &lt;Len(rows)) {
  var row map
  row = rows[i]
  i = i + 1
}
</code></pre></div><h3 id="ecosysparam"><a href="#ecosysparam" class="header-anchor">#</a> EcosysParam </h3> <p>Returns the value of a specified parameter in the ecosystem parameters table parameters.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>EcosysParam(name string) string

</code></pre></div><ul><li><p><strong>name</strong></p> <p>Parameter name.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Println(EcosysParam(&quot;founder_account&quot;))
</code></pre></div><h3 id="gethistory"><a href="#gethistory" class="header-anchor">#</a> GetHistory </h3> <p>Returns the history of changes to entries in a specified table.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>GetHistory(table string, id int) array

</code></pre></div><ul><li><p><strong>table</strong></p> <p>Table name.</p></li> <li><p><strong>Id</strong></p> <p>Entry ID.</p></li></ul> <p><strong>Return value</strong></p> <p>Returns an array of objects of type map, which specify the history of changes to entries in tables.</p> <p>Each array contains the fields of a record before making the next change.
The array is sorted by order of most recent changes.</p> <p>The id field in the array points to the id of the rollback_tx table. block_id represents the block ID, while block_time represents the block generation timestamp.</p> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var list array
var item map
list = GetHistory(&quot;blocks&quot;, 1)
if Len(list) &gt; 0 {
  item = list[0]
}
</code></pre></div><h3 id="gethistoryrow"><a href="#gethistoryrow" class="header-anchor">#</a> GetHistoryRow </h3> <p>Returns a single snapshot from the change history of a specified entry in a specified table.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>GetHistoryRow(table string, id int, rollbackId int) map
</code></pre></div><ul><li><p><strong>table</strong></p> <p>Table name.</p></li> <li><p><strong>Id</strong></p> <p>Entry ID.</p></li> <li><p><strong>rollbackId</strong></p> <p>rollback_tx The entry ID of the table.</p></li></ul> <div class="language- extra-class"><pre class="language-text"><code>  $result = GetHistoryRow(&quot;contracts&quot;,205,2358)
</code></pre></div><h3 id="getcolumntype"><a href="#getcolumntype" class="header-anchor">#</a> GetColumnType </h3> <p>Returns the data type of a specified field in a specified table.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>GetColumnType(table, column string) string

</code></pre></div><ul><li><p><strong>table</strong></p> <p>Table name.</p></li> <li><p><strong>column</strong></p> <p>Field Name.</p></li></ul> <blockquote><p><strong>Return value</strong></p></blockquote> <p>The following types can be returned: <code>text, varchar, number, money, double, bytes, json, datetime, double</code>.</p> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var coltype string
coltype = GetColumnType(&quot;members&quot;, &quot;member_name&quot;)
</code></pre></div><h3 id="getdatafromxlsx"><a href="#getdatafromxlsx" class="header-anchor">#</a> GetDataFromXLSX </h3> <p>Returns data from XLSX spreadsheets.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>GetDataFromXLSX(binId int, line int, count int, sheet int) string

</code></pre></div><ul><li><p><strong>binId</strong></p> <p>ID in XLSX format in the binary table binary.</p></li> <li><p><strong>line</strong></p> <p>The starting line number, starting from 0 by default.</p></li> <li><p><strong>count</strong></p> <p>The number of rows that need to be returned.</p></li> <li><p><strong>sheet</strong></p> <p>List number, starting from 1 by default.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var a array
a = GetDataFromXLSX(3, 12, 10, 1)
</code></pre></div><h3 id="getrowscountxlsx"><a href="#getrowscountxlsx" class="header-anchor">#</a> GetRowsCountXLSX </h3> <p>Returns the number of lines in a specified XLSX file.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>GetRowsCountXLSX(binId int, sheet int) int
</code></pre></div><ul><li><p><strong>binId</strong></p> <p>ID in XLSX format in the binary table binary.</p></li> <li><p><strong>sheet</strong></p> <p>List number, starting from 1 by default.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var count int
count = GetRowsCountXLSX(binid, 1)
</code></pre></div><h3 id="langres"><a href="#langres" class="header-anchor">#</a> LangRes </h3> <p>Returns a multilingual resource with name label for language lang, specified as a two-character code, for example: <code>en</code>, <code>zh</code>. If there is no language for a selected language, then the language resource of the <code>en</code> label is returned.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>LangRes(label string, lang string) string
</code></pre></div><ul><li><p><strong>label</strong></p> <p>Language resource name.</p></li> <li><p><strong>lang</strong></p> <p>Two-character language code.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>warning LangRes(&quot;@1confirm&quot;, &quot;en&quot;)
error LangRes(&quot;@1problems&quot;, &quot;zh&quot;)
</code></pre></div><h3 id="getblock"><a href="#getblock" class="header-anchor">#</a> GetBlock </h3> <p>Returns relevant information about a specified block.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>GetBlock(blockID int64) map

</code></pre></div><ul><li><p><strong>blockID</strong></p> <p>Block ID.</p></li></ul> <blockquote><p><strong>Return value</strong></p></blockquote> <p>Return an array of objects:</p> <ul><li><p><strong>id</strong></p> <p>Block ID.</p></li> <li><p><strong>time</strong></p> <p>Block generation timestamp.</p></li> <li><p><strong>key_id</strong></p> <p>The account address of the verification node generated the block.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var b map
b = GetBlock(1)
Println(b)
</code></pre></div><h3 id="dbinsert"><a href="#dbinsert" class="header-anchor">#</a> DBInsert </h3> <p>Adds an entry to a specified table and return the entry ID.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>DBInsert(table string, params map) int

</code></pre></div><ul><li><p><strong>tblname</strong></p> <p>Table name.</p></li> <li><p><strong>params</strong></p> <p>An array of objects where keys are field names and values are inserted values.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>DBInsert(&quot;mytable&quot;, {name: &quot;John Smith&quot;, amount: 100})
</code></pre></div><h3 id="dbupdate"><a href="#dbupdate" class="header-anchor">#</a> DBUpdate </h3> <p>Changes the column value of a specified entry ID in a specified table. If the entry ID does not exist in the table, an error is returned.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>DBUpdate(tblname string, id int, params map)

</code></pre></div><ul><li><p><strong>tblname</strong></p> <p>Table name.</p></li> <li><p><strong>Id</strong></p> <p>Entry ID.</p></li> <li><p><strong>params</strong></p> <p>An array of objects where keys are field names and values are new values after changes.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>DBUpdate(&quot;mytable&quot;, myid, {name: &quot;John Smith&quot;, amount: 100})
</code></pre></div><h3 id="dbupdateext"><a href="#dbupdateext" class="header-anchor">#</a> DBUpdateExt </h3> <p>Changes the value of a column in a specified table that matches the query condition.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>DBUpdateExt(tblname string, where map, params map)

</code></pre></div><ul><li><p><strong>tblname</strong></p> <p>Table name.</p></li> <li><p><strong>where</strong></p> <p>Query conditions.</p> <p>For more details, see <a href="#dbfind">DBFind</a>.</p></li> <li><p><strong>params</strong></p> <p>An array of objects where keys are field names and values are new values after changes.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>DBUpdateExt(&quot;mytable&quot;, {id: $key_id, ecosystem: $ecosystem_id}, {name: &quot;John Smith&quot;, amount: 100})
</code></pre></div><h3 id="delcolumn"><a href="#delcolumn" class="header-anchor">#</a> DelColumn </h3> <p>Deletes a field in a specified table that has no records.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>DelColumn(tblname string, column string)

</code></pre></div><ul><li><p><strong>tblname</strong></p> <p>Table name.</p></li> <li><p><strong>column</strong></p> <p>The field to be deleted.</p></li></ul> <div class="language- extra-class"><pre class="language-text"><code>DelColumn(&quot;mytable&quot;, &quot;mycolumn&quot;)
</code></pre></div><h3 id="deltable"><a href="#deltable" class="header-anchor">#</a> DelTable </h3> <p>Deletes a specified table that has e no records.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>DelTable(tblname string)

</code></pre></div><ul><li><p><strong>tblname</strong></p> <p>Table name.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>DelTable(&quot;mytable&quot;)
</code></pre></div><h3 id="append"><a href="#append" class="header-anchor">#</a> Append </h3> <p>Inserts any type of val into the src array.</p> <p><strong>Syntax</strong></p> <p>Append(src array, val anyType) array</p> <ul><li><p><strong>src</strong></p> <p>The original array.</p></li> <li><p><strong>val</strong></p> <p>The value to be inserted.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var list array
list = Append(list, &quot;new_val&quot;)
</code></pre></div><h3 id="join"><a href="#join" class="header-anchor">#</a> Join </h3> <p>Combines elements of the in array into a string with a specified sep separator.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Join(in array, sep string) string

</code></pre></div><ul><li><p><strong>In</strong></p> <p>Array name.</p></li> <li><p><strong>sep</strong></p> <p>Separator.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code> var val string, myarr array
 myarr[0] = &quot;first&quot;
 myarr[1] = 10
 val = Join(myarr, &quot;,&quot;)
</code></pre></div><h3 id="split"><a href="#split" class="header-anchor">#</a> Split </h3> <p>Uses the sep separator to split the in string into elements and put them into an array.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Split(in string, sep string) array
</code></pre></div><ul><li><p><strong>In</strong></p> <p>String.</p></li> <li><p><strong>sep</strong></p> <p>Separator.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var myarr array
myarr = Split(&quot;first,second,third&quot;, &quot;,&quot;)
</code></pre></div><h3 id="len"><a href="#len" class="header-anchor">#</a> Len </h3> <p>Returns the number of elements in a specified array.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Len(val array) int
</code></pre></div><ul><li><p><strong>val</strong></p> <p>Array.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>if Len(mylist) == 0 {
  ...
}
</code></pre></div><h3 id="row"><a href="#row" class="header-anchor">#</a> Row </h3> <p>The list parameter must not be specified in this case. Return the first object array in the array list. If the list is empty, an empty result is returned. This function is mostly used in conjunction with the <a href="#dbfind">DBFind</a> function. When using this function, you cannot specify parameters.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code> Row(list array) map
</code></pre></div><ul><li><p><strong>list</strong></p> <p>The array of objects returned by the DBFind function.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code> var ret map
 ret = DBFind(&quot;contracts&quot;).Columns(&quot;id,value&quot;).WhereId(10).Row()
 Println(ret)
</code></pre></div><h3 id="one"><a href="#one" class="header-anchor">#</a> One </h3> <p>Returns the field value of the first object array in the array list. If the list array is empty, nil is returned. It is mostly used in conjunction with the <a href="#dbfind">DBFind</a> function. When using this function, you cannot specify parameters.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>One(list array, column string) string
</code></pre></div><ul><li><strong>list</strong></li></ul> <p>The array of objects returned by the DBFind function.</p> <ul><li><p><strong>column</strong></p> <p>Field Name.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var ret string
ret = DBFind(&quot;contracts&quot;).Columns(&quot;id,value&quot;).WhereId(10).One(&quot;value&quot;)
if ret != nil {
  Println(ret)
}
</code></pre></div><h3 id="getmapkeys"><a href="#getmapkeys" class="header-anchor">#</a> GetMapKeys </h3> <p>Returns the key array in the object array.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>GetMapKeys(val map) array
</code></pre></div><ul><li><p><strong>val</strong></p> <p>Object array.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var val map
var arr array
val[&quot;k1&quot;] = &quot;v1&quot;
val[&quot;k2&quot;] = &quot;v2&quot;
arr = GetMapKeys(val)
</code></pre></div><h3 id="sortedkeys"><a href="#sortedkeys" class="header-anchor">#</a> SortedKeys </h3> <p>Returns a sorted key array in the object array.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>SortedKeys(val map) array

</code></pre></div><ul><li><p><strong>val</strong></p> <p>Object array.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var val map
var arr array
val[&quot;k2&quot;] = &quot;v2&quot;
val[&quot;k1&quot;] = &quot;v1&quot;
arr = SortedKeys(val)
</code></pre></div><h3 id="callcontract"><a href="#callcontract" class="header-anchor">#</a> CallContract </h3> <p>Calls the contract with a specified name. All parameters of the data section in the contract must be included in an object array. This function returns the value assigned to the <strong>$result</strong> variable by a specified contract.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>CallContract(name string, params map)

</code></pre></div><ul><li><p><strong>name</strong></p> <p>The name of the contract being called.</p></li> <li><p><strong>params</strong></p> <p>An associative array of the contract input data.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var par map
par[&quot;Name&quot;] = &quot;My Name&quot;
CallContract(&quot;MyContract&quot;, par)
</code></pre></div><h3 id="contractaccess"><a href="#contractaccess" class="header-anchor">#</a> ContractAccess </h3> <p>Checks if the name of contract being executed matches one of the names listed in the parameters. Usually it is used to control contract access to tables. When editing table fields or inserting and adding new column fields in the permissions section of the table, please specify this function in the permissions fields.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>ContractAccess(name string, [name string]) bool
</code></pre></div><ul><li><p><strong>name</strong></p> <p>Contract name.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>ContractAccess(&quot;MyContract&quot;)
ContractAccess(&quot;MyContract&quot;,&quot;SimpleContract&quot;)
</code></pre></div><h3 id="contractconditions"><a href="#contractconditions" class="header-anchor">#</a> ContractConditions </h3> <p>Calls the conditions section in the contract with a specified name.</p> <p>For this type of contracts, the data section must be empty. If the conditions section is executed without error, it returns true. If there is an error during execution, the parent contract will also be terminated due to the error. This function is usually used to control the contract's access to tables and can be called in the permission fields when editing system tables.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>ContractConditions(name string, [name string]) bool

</code></pre></div><ul><li><p><strong>name</strong></p> <p>Contract name.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>ContractConditions(&quot;MainCondition&quot;)
</code></pre></div><h3 id="evalcondition"><a href="#evalcondition" class="header-anchor">#</a> EvalCondition </h3> <p>Gets the value of the condfield field in the record with a 'name' field from the tablename table, and checks the conditions of the condfield field value.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>EvalCondition(tablename string, name string, condfield string)

</code></pre></div><ul><li><p><strong>tablename</strong></p> <p>Table name.</p></li> <li><p><strong>name</strong></p> <p>Queries the value with the 'name' field.</p></li> <li><p><strong>condfield</strong></p> <p>The name of the field whose conditions needs to be checked.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>EvalCondition(`menu`, $Name, `conditions`)
</code></pre></div><h3 id="getcontractbyid"><a href="#getcontractbyid" class="header-anchor">#</a> GetContractById </h3> <p>Returns its contract name by contract ID. If not found the contract, an empty string is returned.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>GetContractById(id int) string

</code></pre></div><ul><li><p><strong>Id</strong></p> <p>The contract ID in the contract table contracts.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var name string
name = GetContractById($IdContract)
</code></pre></div><h3 id="getcontractbyname"><a href="#getcontractbyname" class="header-anchor">#</a> GetContractByName </h3> <p>This function returns its contract ID by contract name. If not found the contract, zero is returned.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>GetContractByName(name string) int
</code></pre></div><ul><li><p><strong>name</strong></p> <p>The contract name in the contract table contracts.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var id int
id = GetContractByName(`NewBlock`)
</code></pre></div><h3 id="roleaccess"><a href="#roleaccess" class="header-anchor">#</a> RoleAccess </h3> <p>Checks whether the role ID of the contract caller matches one of the IDs specified in the parameter.</p> <p>You can use this function to control contract access to tables and other data.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>RoleAccess(id int, [id int]) bool
</code></pre></div><ul><li><p><strong>Id</strong></p> <p>Role ID.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>RoleAccess(1)
RoleAccess(1, 3)
</code></pre></div><h3 id="transactioninfo"><a href="#transactioninfo" class="header-anchor">#</a> TransactionInfo </h3> <p>Queries transactions by specified hash value and returns information about the contract executed and its parameters.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>TransactionInfo(hash: string)
</code></pre></div><ul><li><p><strong>hash</strong></p> <p>Transaction hash in hexadecimal string format.</p></li></ul> <blockquote><p><strong>Return value</strong></p></blockquote> <p>This function returns a string in JSON format:</p> <div class="language- extra-class"><pre class="language-text"><code>{&quot;contract&quot;:&quot;ContractName&quot;, &quot;params&quot;:{&quot;key&quot;: &quot;val&quot;}, &quot;block&quot;: &quot;N&quot;}
</code></pre></div><ul><li><p><strong>contract</strong></p> <p>Contract name.</p></li> <li><p><strong>params</strong></p> <p>Data passed to contract parameters.</p></li> <li><p><strong>block</strong></p> <p>ID of the block that processed the transaction.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var out map
out = JSONDecode(TransactionInfo(hash))
</code></pre></div><h3 id="throw"><a href="#throw" class="header-anchor">#</a> Throw </h3> <p>Generates an error of type exception.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Throw(ErrorId string, ErrDescription string)
</code></pre></div><ul><li><p><strong>ErrorId</strong></p> <p>Error identifier.</p></li> <li><p><strong>ErrDescription</strong></p> <p>Error description.</p></li></ul> <blockquote><p><strong>Return value</strong></p></blockquote> <p>The format of this type of transaction results:</p> <div class="language- extra-class"><pre class="language-text"><code>{&quot;type&quot;:&quot;exception&quot;,&quot;error&quot;:&quot;Error description&quot;,&quot;id&quot;:&quot;Error ID&quot;}
</code></pre></div><p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Throw(&quot;Problem&quot;, &quot;There is a problem&quot;)
</code></pre></div><h3 id="validatecondition"><a href="#validatecondition" class="header-anchor">#</a> ValidateCondition </h3> <p>Tries to compile the conditions specified by the condition parameter. If there is an error during the compilation process, an error is generated and the contract called is terminated. This function is designed to check the correctness of the conditional format.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>ValidateCondition(condition string, state int)
</code></pre></div><ul><li><p><strong>condition</strong></p> <p>The conditional format that needs to be verified.</p></li> <li><p><strong>state</strong></p> <p>Ecosystem ID. If you check the global condition, please specify it as 0.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>ValidateCondition(`ContractAccess(&quot;@1MyContract&quot;)`, 1)
</code></pre></div><h3 id="addresstoid"><a href="#addresstoid" class="header-anchor">#</a> AddressToId </h3> <p>Returns the corresponding account address by wallet address. If an invalid address is specified, '0' is returned.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>AddressToId(address string) int

</code></pre></div><ul><li><p>Address</p> <p>Wallet address in <code>XXXX-...-XXXX</code> format or number format.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>wallet = AddressToId($Recipient)
</code></pre></div><h3 id="idtoaddress"><a href="#idtoaddress" class="header-anchor">#</a> IdToAddress </h3> <p>Returns the corresponding wallet address by account address. If an invalid address is specified, the invalid address 'invalid' is returned.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>IdToAddress(id int) string

</code></pre></div><ul><li><p><strong>Id</strong></p> <p>Account address.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>$address = IdToAddress($id)
</code></pre></div><h3 id="pubtoid"><a href="#pubtoid" class="header-anchor">#</a> PubToID </h3> <p>The account address is returned by public key in hexadecimal format.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>PubToID(hexkey string) int

</code></pre></div><ul><li><p><strong>hexkey</strong></p> <p>The public key in hexadecimal format.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var wallet int
wallet = PubToID(&quot;04fa5e78.....34abd6&quot;)
</code></pre></div><h3 id="decodebase64"><a href="#decodebase64" class="header-anchor">#</a> DecodeBase64 </h3> <p>Returns a string by specifying the base64 format</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>DecodeBase64(input string) string

</code></pre></div><ul><li><p><strong>Input</strong></p> <p>String in base64 format.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>val = DecodeBase64(mybase64)
</code></pre></div><h3 id="encodebase64"><a href="#encodebase64" class="header-anchor">#</a> EncodeBase64 </h3> <p>Returns a string in base64 format by specifying a string.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>EncodeBase64(input string) string

</code></pre></div><ul><li><p><strong>Input</strong></p> <p>The string to be encoded.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var base64str string
base64str = EncodeBase64(&quot;my text&quot;)
</code></pre></div><h3 id="float"><a href="#float" class="header-anchor">#</a> Float </h3> <p>Converts an integer or string to a float number.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Float(val int|string) float

</code></pre></div><ul><li><p><strong>val</strong></p> <p>An integer or string.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>val = Float(&quot;567.989&quot;) + Float(232)
</code></pre></div><h3 id="hextobytes"><a href="#hextobytes" class="header-anchor">#</a> HexToBytes </h3> <p>Converts a string in hexadecimal format to byte type bytes.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>  HexToBytes(hexdata string) bytes

</code></pre></div><ul><li><p><strong>hexdata</strong></p> <p>A string in hexadecimal format.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var val bytes
val = HexToBytes(&quot;34fe4501a4d80094&quot;)
</code></pre></div><h3 id="formatmoney"><a href="#formatmoney" class="header-anchor">#</a> FormatMoney </h3> <p>Returns the string value of exp / 10 ^ digit.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>FormatMoney(exp string, digit int) string
</code></pre></div><ul><li><p><strong>Exp</strong></p> <p>A number in string format.</p></li> <li><p><strong>digit</strong></p> <p>The exponent (positive or negative) of 10 in the expression <code>Exp/10^digit</code>. Positive values determine decimal places.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>  s = FormatMoney(&quot;78236475917384&quot;, 0)
</code></pre></div><h3 id="random"><a href="#random" class="header-anchor">#</a> Random </h3> <div class="language- extra-class"><pre class="language-text"><code>Returns a random number between min and max (min &lt;= result &lt;max). Both min and max must be positive numbers.
</code></pre></div><p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Random(min int, max int) int
</code></pre></div><ul><li><p><strong>min</strong></p> <p>The minimum value among random numbers.</p></li> <li><p><strong>max</strong></p> <p>The upper limit of random numbers. The random number generated will be less than this value.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>i = Random(10,5000)
</code></pre></div><h3 id="int"><a href="#int" class="header-anchor">#</a> Int </h3> <p>Converts a value in string format to an integer.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Int(val string) int
</code></pre></div><ul><li><p><strong>val</strong></p> <p>A number in string format.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>mystr = &quot;-37763499007332&quot;
val = Int(mystr)
</code></pre></div><h3 id="hash"><a href="#hash" class="header-anchor">#</a> Hash </h3> <p>Returns the hash of a specified byte array or string, which is generated by the system encryption library crypto.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Hash(val interface{}) string, error
</code></pre></div><ul><li><p><strong>val</strong></p> <p>A string or byte array.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var hash string
hash = Hash(&quot;Test message&quot;)
</code></pre></div><h3 id="sha256"><a href="#sha256" class="header-anchor">#</a> Sha256 </h3> <p>Returns the SHA256 hash of a specified string.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Sha256(val string) string
</code></pre></div><ul><li><p><strong>val</strong></p> <p>A string requires the Sha256 hash operation.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var sha string
sha = Sha256(&quot;Test message&quot;)
</code></pre></div><h3 id="str"><a href="#str" class="header-anchor">#</a> Str </h3> <p>Converts an integer int or float float number to a string.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Str(val int|float) string
</code></pre></div><ul><li><p><strong>val</strong></p> <p>An integer or float number.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>myfloat = 5.678
val = Str(myfloat)
</code></pre></div><h3 id="jsonencode"><a href="#jsonencode" class="header-anchor">#</a> JSONEncode </h3> <p>Converts a number, string or array to a string in JSON format.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>JSONEncode(src int|float|string|map|array) string

</code></pre></div><ul><li><p><strong>src</strong></p> <p>Data to convert.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var mydata map
mydata[&quot;key&quot;] = 1
var json string
json = JSONEncode(mydata)
</code></pre></div><h3 id="jsonencodeindent"><a href="#jsonencodeindent" class="header-anchor">#</a> JSONEncodeIndent </h3> <p>Uses the specified indentation to convert a number, string, or array to a string in JSON format.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>JSONEncodeIndent(src int|float|string|map|array, indent string) string

</code></pre></div><ul><li><p><strong>src</strong></p> <p>Data to convert.</p></li> <li><p><strong>Indent</strong></p> <p>The string will be used as indentation.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var mydata map
mydata[&quot;key&quot;] = 1
var json string
json = JSONEncodeIndent(mydata, &quot;\t&quot;)
</code></pre></div><h3 id="jsondecode"><a href="#jsondecode" class="header-anchor">#</a> JSONDecode </h3> <p>Converts a string in JSON format to a number, string or array.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>JSONDecode(src string) int|float|string|map|array

</code></pre></div><ul><li><p><strong>src</strong></p> <p>A string containing data in JSON format.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var mydata map
mydata = JSONDecode(`{&quot;name&quot;: &quot;John Smith&quot;, &quot;company&quot;: &quot;Smith's company&quot;}`)
</code></pre></div><h3 id="hasprefix"><a href="#hasprefix" class="header-anchor">#</a> HasPrefix </h3> <p>Checks whether the string starts with a specified string.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>HasPrefix(s string, prefix string) bool
</code></pre></div><ul><li><p><strong>s</strong></p> <p>A string.</p></li> <li><p><strong>prefix</strong></p> <p>The prefix to check.</p></li></ul> <blockquote><p><strong>Return value</strong></p></blockquote> <p>If the string starts with a specified string, <code>true</code> is returned.</p> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>if HasPrefix($Name, `my`) {
  ...
}
</code></pre></div><h3 id="contains"><a href="#contains" class="header-anchor">#</a> Contains </h3> <p>Checks whether the string contains a specified substring.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Contains(s string, substr string) bool
</code></pre></div><ul><li><p><strong>s</strong></p> <p>A string.</p></li> <li><p><strong>substr</strong></p> <p>A substring.</p></li></ul> <blockquote><p><strong>Return value</strong></p></blockquote> <p>If the string contains the substring, it returns <code>true</code>.</p> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>if Contains($Name, `my`) {
  ...
}
</code></pre></div><h3 id="replace"><a href="#replace" class="header-anchor">#</a> Replace </h3> <p>Replaces old (the old string) with new (the new string) in the string.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Replace(s string, old string, new string) string

</code></pre></div><ul><li><p><strong>s</strong></p> <p>The original string.</p></li> <li><p><strong>Old</strong></p> <p>The substring to replace.</p></li> <li><p><strong>new</strong></p> <p>The new string.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>s = Replace($Name, `me`, `you`)
</code></pre></div><h3 id="size"><a href="#size" class="header-anchor">#</a> Size </h3> <p>Returns the number of bytes in a specified string.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Size(val string) int

</code></pre></div><ul><li><p><strong>val</strong></p> <p>A string.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var len int
len = Size($Name)
</code></pre></div><h3 id="sprintf"><a href="#sprintf" class="header-anchor">#</a> Sprintf </h3> <p>This function creates a string using the specified template and parameters.</p> <p>Available wildcards:</p> <ul><li><code>%d</code> (integer)</li> <li><code>%s</code> (string)</li> <li><code>%f</code> (float)</li> <li><code>%v</code> (any type)
<strong>Syntax</strong></li></ul> <div class="language- extra-class"><pre class="language-text"><code>Sprintf(pattern string, val ...) string

</code></pre></div><ul><li><p><strong>pattern</strong></p> <p>A string template.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>out = Sprintf(&quot;%s=%d&quot;, mypar, 6448)
</code></pre></div><h3 id="substr"><a href="#substr" class="header-anchor">#</a> Substr </h3> <p>Returns the substring obtained from a specified string starting from the offset offset (calculated from 0 by default), and the maximum length is limited to length.</p> <p>If the offset or length is less than zero, or the offset is greater than the length, an empty string is returned.</p> <p>If the sum of the offset and length is greater than the string size, then, the substring will be returned starting from the offset to the end of the string.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Substr(s string, offset int, length int) string

</code></pre></div><ul><li><p><strong>val</strong></p> <p>A string.</p></li> <li><p><strong>Offset</strong></p> <p>Offset.</p></li> <li><p><strong>length</strong></p> <p>Length of the substring.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var s string
s = Substr($Name, 1, 10)
</code></pre></div><h3 id="tolower"><a href="#tolower" class="header-anchor">#</a> ToLower </h3> <p>Returns a specified string in lowercase.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>ToLower(val string) string

</code></pre></div><ul><li><p><strong>val</strong></p> <p>A string.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>val = ToLower(val)
</code></pre></div><h3 id="toupper"><a href="#toupper" class="header-anchor">#</a> ToUpper </h3> <p>Returns a specified string in uppercase.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>ToUpper(val string) string

</code></pre></div><ul><li><p><strong>val</strong></p> <p>A string.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>val = ToUpper(val)
</code></pre></div><h3 id="trimspace"><a href="#trimspace" class="header-anchor">#</a> TrimSpace </h3> <p>Deletes the leading and trailing spaces, tabs and newlines of a specified string.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>TrimSpace(val string) string

</code></pre></div><ul><li><p><strong>val</strong></p> <p>A string.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var val string
val = TrimSpace(&quot; mystr &quot;)
</code></pre></div><h3 id="floor"><a href="#floor" class="header-anchor">#</a> Floor </h3> <p>Returns the largest integer value less than or equal to a specified number, float number, and string.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Floor(x float|int|string) int
</code></pre></div><ul><li><p><strong>x</strong></p> <p>A number, float number, and string.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>val = Floor(5.6) // returns 5
</code></pre></div><h3 id="log"><a href="#log" class="header-anchor">#</a> Log </h3> <p>Returns the natural logarithm of a specified number, float number, and string.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Log(x float|int|string) float

</code></pre></div><ul><li><p><strong>x</strong></p> <p>A number, float number, and string.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>val = Log(10)
</code></pre></div><h3 id="log10"><a href="#log10" class="header-anchor">#</a> Log10 </h3> <p>Returns the base-10 logarithm of a specified number, float number, and string.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Log10(x float|int|string) float

</code></pre></div><ul><li><p><strong>x</strong></p> <p>A number, float number, and string.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>val = Log10(100)
</code></pre></div><h3 id="pow"><a href="#pow" class="header-anchor">#</a> Pow </h3> <p>Returns the specified base to the specified power (xy).</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Pow(x float|int|string, y float|int|string) float

</code></pre></div><ul><li><p><strong>x</strong></p> <p>Base number.</p></li> <li><p><strong>y</strong></p> <p>Exponent.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>val = Pow(2, 3)

</code></pre></div><h3 id="round"><a href="#round" class="header-anchor">#</a> Round </h3> <p>Returns the value of a specified number rounded to the nearest integer.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Round(x float|int|string) int

</code></pre></div><ul><li><p><strong>x</strong></p> <p>A number.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>val = Round(5.6)
</code></pre></div><h3 id="sqrt"><a href="#sqrt" class="header-anchor">#</a> Sqrt </h3> <p>Returns the square root of a specified number.</p> <div class="language- extra-class"><pre class="language-text"><code>Sqrt(x float|int|string) float

</code></pre></div><ul><li><p><strong>x</strong></p> <p>A number.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>val = Sqrt(225)
</code></pre></div><h3 id="stringtobytes"><a href="#stringtobytes" class="header-anchor">#</a> StringToBytes </h3> <p>Converts a string to bytes.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>StringToBytes(src string) bytes

</code></pre></div><ul><li><p><strong>src</strong></p> <p>A string.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var b bytes
b = StringToBytes(&quot;my string&quot;)
</code></pre></div><h3 id="bytestostring"><a href="#bytestostring" class="header-anchor">#</a> BytesToString </h3> <p>Converts bytes to string.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>BytesToString(src bytes) string

</code></pre></div><ul><li><p><strong>src</strong></p> <p>Byte.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var s string
s = BytesToString($Bytes)
</code></pre></div><h3 id="sysparamstring"><a href="#sysparamstring" class="header-anchor">#</a> SysParamString </h3> <p>Returns the value of a specified platform parameter.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>SysParamString(name string) string

</code></pre></div><ul><li><p><strong>name</strong></p> <p>Parameter name.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>url = SysParamString(`blockchain_url`)
</code></pre></div><h3 id="sysparamint"><a href="#sysparamint" class="header-anchor">#</a> SysParamInt </h3> <p>Returns the value of a specified platform parameter in the form of a number.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>SysParamInt(name string) int

</code></pre></div><ul><li><p><strong>name</strong></p> <p>Parameter name.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>maxcol = SysParam(`max_columns`)
</code></pre></div><h3 id="dbupdatesysparam"><a href="#dbupdatesysparam" class="header-anchor">#</a> DBUpdateSysParam </h3> <p>Updates the value and conditions of a platform parameter. If you do not need to change the value or conditions, please specify an empty string in the corresponding parameter.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>DBUpdateSysParam(name, value, conditions string)

</code></pre></div><ul><li><p><strong>name</strong></p> <p>Parameter name.</p></li> <li><p><strong>value</strong></p> <p>New value of a parameter.</p></li> <li><p><strong>conditions</strong></p> <p>New conditions for updating a parameter.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>DBUpdateSysParam(`fuel_rate`, `400000000000`, ``)

</code></pre></div><h3 id="updatenotifications"><a href="#updatenotifications" class="header-anchor">#</a> UpdateNotifications </h3> <p>Obtains the notification list of a specified key from the database, and sends the notification obtained to Centrifugo.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>UpdateNotifications(ecosystemID int, keys int...)

</code></pre></div><ul><li><p><strong>EcosystemID</strong></p> <p>Ecosystem ID.</p></li> <li><p><strong>key</strong></p> <p>A list of account addresses, separated by commas. Or you can use an array to specify a list of account addresses.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>UpdateNotifications($ecosystem_id, $key_id, 23345355454, 35545454554)
UpdateNotifications(1, [$key_id, 23345355454, 35545454554])
</code></pre></div><h3 id="updaterolesnotifications"><a href="#updaterolesnotifications" class="header-anchor">#</a> UpdateRolesNotifications </h3> <p>Obtains the notification list of all account addresses of a specified role ID in the database, and sends the notification obtained to Centrifugo.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>UpdateRolesNotifications(ecosystemID int, roles int ...)

</code></pre></div><ul><li><p><strong>EcosystemID</strong></p> <p>Ecosystem ID.</p></li> <li><p><strong>roles</strong></p> <p>A list of role IDs, separated by commas. Or you can use an array to specify a list of role IDs.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>UpdateRolesNotifications(1, 1, 2)

</code></pre></div><h3 id="httprequest"><a href="#httprequest" class="header-anchor">#</a> HTTPRequest </h3> <p>Sends HTTP requests to the specified address.</p> <blockquote><p>Note</p></blockquote> <blockquote><p>This function can only be used in CLB contracts.</p></blockquote> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>HTTPRequest(url string, method string, heads map, pars map) string

</code></pre></div><ul><li><p><strong>Url</strong></p> <p>Address, to which the request will be sent.</p></li> <li><p><strong>method</strong></p> <p>Request type (GET or POST).</p></li> <li><p><strong>heads</strong></p> <p>An array of request headers, objects.</p></li> <li><p><strong>pars</strong></p> <p>Request parameters.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var ret string
var ret string
var ret string
var pars, heads, json map
heads[&quot;Authorization&quot;] = &quot;Bearer &quot;+ $auth_token
pars[&quot;obs&quot;] = &quot;true&quot;
ret = HTTPRequest(&quot;http://localhost:7079/api/v2/content/page/default_page&quot;,&quot;POST&quot;, heads, pars)
json = JSONToMap(ret)
</code></pre></div><h3 id="httppostjson"><a href="#httppostjson" class="header-anchor">#</a> HTTPPostJSON </h3> <p>This function is similar to the HTTPRequest function, but it sends a POST request and the request parameters are strings.</p> <blockquote><p>Note</p></blockquote> <blockquote><p>This function can only be used in CLB contracts</p></blockquote> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>HTTPPostJSON(url string, heads map, pars string) string

</code></pre></div><ul><li><p><strong>Url</strong></p> <p>Address, to which the request will be sent.</p></li> <li><p><strong>heads</strong></p> <p>An array of request headers, objects.</p></li> <li><p><strong>pars</strong></p> <p>Request parameters as a JSON string.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var ret string
var ret string
var ret string
var heads, json map
heads[&quot;Authorization&quot;] = &quot;Bearer &quot;+ $auth_token
ret = HTTPPostJSON(&quot;http://localhost:7079/api/v2/content/page/default_page&quot;, heads, `{&quot;obs&quot;:&quot;true&quot;}`)
json = JSONToMap(ret)
</code></pre></div><h3 id="blocktime"><a href="#blocktime" class="header-anchor">#</a> BlockTime </h3> <p>Returns the generation time of the block in SQL format.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>BlockTime()
</code></pre></div><p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>var mytime string
mytime = BlockTime()
DBInsert(&quot;mytable&quot;, myid, {time: mytime})
</code></pre></div><h3 id="datetime"><a href="#datetime" class="header-anchor">#</a> DateTime </h3> <p>Converts the timestamp unixtime to a string in YYYY-MM-DD HH:MI:SS format.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>DateTime(unixtime int) string
</code></pre></div><p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>DateTime(1532325250)

</code></pre></div><h3 id="unixdatetime"><a href="#unixdatetime" class="header-anchor">#</a> UnixDateTime </h3> <p>Converts a string in YYYY-MM-DD HH:MI:SS format to a timestamp unixtime</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>UnixDateTime(datetime string) int
</code></pre></div><p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>UnixDateTime(&quot;2018-07-20 14:23:10&quot;)
</code></pre></div><h3 id="createobs"><a href="#createobs" class="header-anchor">#</a> CreateOBS </h3> <p>Creates a child CLB.</p> <p>This function can only be used in the master CLB mode.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>CreateOBS(OBSName string, DBUser string, DBPassword string, OBSAPIPort int)

</code></pre></div><ul><li><p><strong>OBSName</strong></p> <p>CLB name.</p></li> <li><p><strong>DBUser</strong></p> <p>The role name of the database.</p></li> <li><p><strong>DBPassword</strong></p> <p>The password of the role.</p></li> <li><p><strong>OBSAPIPort</strong></p> <p>The port of the API request.</p></li></ul> <p><strong>Example</strong></p> <div class="language- extra-class"><pre class="language-text"><code>CreateOBS(&quot;obsname&quot;, &quot;obsuser&quot;, &quot;obspwd&quot;, 8095)

</code></pre></div><h3 id="getobslist"><a href="#getobslist" class="header-anchor">#</a> GetOBSList </h3> <p>Returns the list of child CLBs.</p> <p>This function can only be used in the master CLB mode.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>GetOBSList()

</code></pre></div><blockquote><p><strong>Return value</strong></p></blockquote> <p>An array of objects, where the key is the CLB name and the value is the process state.</p> <h3 id="runobs"><a href="#runobs" class="header-anchor">#</a> RunOBS </h3> <p>A process running the CLB.</p> <p>This function can only be used in the master CLB mode.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>RunOBS(OBSName string)

</code></pre></div><ul><li><p><strong>OBSName</strong></p> <p>CLB name.</p> <p>It can only contain letters and numbers, and the space symbol cannot be used.</p></li></ul> <h3 id="stopobs"><a href="#stopobs" class="header-anchor">#</a> StopOBS </h3> <p>Stop the process of a specified CLB.</p> <p>This function can only be used in the master CLB mode.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>StopOBS(OBSName string)

</code></pre></div><ul><li><p><strong>OBSName</strong></p> <p>CLB name.</p> <p>It can only contain letters and numbers, and the space symbol cannot be used.</p></li></ul> <h3 id="removeobs"><a href="#removeobs" class="header-anchor">#</a> RemoveOBS </h3> <p>Deletes the process of a specified CLB.</p> <p>This function can only be used in the master CLB mode.</p> <p><strong>Syntax</strong></p> <div class="language- extra-class"><pre class="language-text"><code>RemoveOBS(OBSName string)

</code></pre></div><ul><li><strong>OBSName</strong></li></ul> <p>CLB name.</p> <p>It can only contain letters and numbers, and the space symbol cannot be used.</p> <h2 id="system-contracts"><a href="#system-contracts" class="header-anchor">#</a> System Contracts </h2> <p>System contracts are created by default when the IBax blockchain platform is launched. All these contracts were created in the first ecosystem. This is why you need to specify their full names when calling them from other ecosystems, for example, <code>@1NewContract</code>.</p> <h3 id="newecosystem"><a href="#newecosystem" class="header-anchor">#</a> NewEcosystem </h3> <p>This contract creates a new ecosystem. To obtain the ID of the ecosystem created, you must quote the result filed returned in <a href="/it/reference/api2.html#txstatus">txstatus</a>.</p> <p>Parameters:</p> <ul><li><strong>Name</strong> string - name of the ecosystem. It can be changed later.</li></ul> <h3 id="editecosystemname"><a href="#editecosystemname" class="header-anchor">#</a> EditEcosystemName </h3> <p>Changes the name of the ecosystem in the 1_ecosystems table that only exists in the first ecosystem.</p> <p>Parameters:</p> <ul><li><strong>EcosystemID</strong> int - changes the name of the ecosystem ID;</li> <li><strong>NewName</strong> string - new name of the ecosystem.</li></ul> <h3 id="newcontract"><a href="#newcontract" class="header-anchor">#</a> NewContract </h3> <p>Creates a new contract in the current ecosystem.</p> <p>Parameters:</p> <ul><li><strong>ApplicationId</strong> int - the application to which a new contract belongs;</li> <li><strong>Value</strong> string - contract source code. The upper layer must have only one contract;</li> <li><strong>Conditions</strong> string - changes the conditions of the contract;</li> <li><strong>TokenEcosystem</strong> int &quot;optional&quot; - ecosystem ID. It determines which token will be used for transactions when the contract is activated.</li></ul> <h3 id="editcontract"><a href="#editcontract" class="header-anchor">#</a> EditContract </h3> <p>Edits the contract in the current ecosystem.</p> <p>Parameters:</p> <ul><li><strong>Id</strong> int - the contract ID changed;</li> <li><strong>Value</strong> string &quot;optional&quot; - source code of the contract;</li> <li><strong>Conditions</strong> string &quot;optional&quot; - changes the conditions of the contract.</li></ul> <h3 id="bindwallet"><a href="#bindwallet" class="header-anchor">#</a> BindWallet </h3> <p>Binding the contract to the wallet address in the current ecosystem. After binding with the contract, the contract execution fee will be paid under this address.</p> <p>Parameters:</p> <ul><li><strong>Id</strong> int - the contract ID to be bound.</li> <li><strong>WalletId</strong> string &quot;optional&quot; - the wallet address bound to the contract.</li></ul> <h3 id="unbindwallet"><a href="#unbindwallet" class="header-anchor">#</a> UnbindWallet </h3> <p>Unbinding the contract from the wallet address in the current ecosystem. Only addresses bound to the contract can be unbound. After unbinding the contract, users who execute the contract will pay the execution fee.</p> <p>Parameters:</p> <ul><li><strong>Id</strong> int - the ID of the contract being bound.</li></ul> <h3 id="newparameter"><a href="#newparameter" class="header-anchor">#</a> NewParameter </h3> <p>A new ecosystem parameter has been added to the current ecosystem.</p> <p>Parameters:</p> <ul><li><strong>Name</strong> string - parameter name;</li> <li><strong>Value</strong> string - parameter value;</li> <li><strong>Conditions</strong> string - conditions to change the parameter.</li></ul> <h3 id="editparameter"><a href="#editparameter" class="header-anchor">#</a> EditParameter </h3> <p>Changes existing ecosystem parameters in the current ecosystem.</p> <p>Parameters:</p> <ul><li><strong>Name</strong> string - name of the parameter to be changed;</li> <li><strong>Value</strong> string - new parameter value;</li> <li><strong>Conditions</strong> string - new conditions to change the parameter.</li></ul> <h3 id="newmenu"><a href="#newmenu" class="header-anchor">#</a> NewMenu </h3> <p>Adds a new menu in the current ecosystem.</p> <p>Parameters:</p> <ul><li><strong>Name</strong> string - menu name;</li> <li><strong>Value</strong> string - menu source code;</li> <li><strong>Title</strong> string &quot;optional&quot; - menu title;</li> <li><strong>Conditions</strong> string - conditions to change the menu.</li></ul> <h3 id="editmenu"><a href="#editmenu" class="header-anchor">#</a> EditMenu </h3> <p>Changes the existing menu in the current ecosystem.</p> <p>Parameters:</p> <ul><li><strong>Id</strong> int - menu ID to be changed;</li> <li><strong>Value</strong> string &quot;optional&quot; - source code of the new menu;</li> <li><strong>Title</strong> string &quot;optional&quot; - title of the new menu;</li> <li><strong>Conditions</strong> string &quot;optional&quot; - new conditions to change the menu.</li></ul> <h3 id="appendmenu"><a href="#appendmenu" class="header-anchor">#</a> AppendMenu </h3> <p>Adds the source code content to existing menus in the current ecosystem</p> <p>Parameters:</p> <ul><li><strong>Id</strong> int - menu ID;</li> <li><strong>Value</strong> string - source code to be added.</li></ul> <h3 id="newpage"><a href="#newpage" class="header-anchor">#</a> NewPage </h3> <p>Adds a new page in the current ecosystem.</p> <p>Parameters:</p> <ul><li><p><strong>Name</strong> string - name of the page;</p></li> <li><p><strong>Value</strong> string - source code of the page;</p></li> <li><p><strong>Menu</strong> string - name of the menu associated with the page;</p></li> <li><p><strong>Conditions</strong> string - conditions to change the page;</p></li> <li><p><strong>ValidateCount</strong> int &quot;optional&quot; - number of nodes required for page validation. If this parameter is not specified, the min_page_validate_count ecosystem parameter value is used. The value of this parameter cannot be less than min_page_validate_count and greater than max_page_validate_count;</p></li> <li><p><strong>ValidateMode</strong> int &quot;optional&quot; - mode of page validity check. The page will be checked when it is loaded if the value of this parameter is 0; or checked when it is loaded or exit the page if the value of this parameter is 1.</p></li></ul> <h3 id="editpage"><a href="#editpage" class="header-anchor">#</a> EditPage </h3> <p>Changes existing pages in the current ecosystem.</p> <p>Parameters:</p> <ul><li><strong>Id</strong> int - ID of the page to be changed;</li> <li><strong>Value</strong> string &quot;optional&quot; - source code of the new page;</li> <li><strong>Menu</strong> string &quot;optional&quot; - name of the new menu associated with the page;</li> <li><strong>Conditions</strong> string &quot;optional&quot; - new conditions to change the page;</li> <li><strong>ValidateCount</strong> int &quot;optional&quot; - number of nodes required for page validation. If this parameter is not specified, the min_page_validate_count ecosystem parameter value is used. The value of this parameter cannot be less than min_page_validate_count and greater than max_page_validate_count;</li> <li><strong>ValidateMode</strong> int &quot;optional&quot; - mode of page validity check. The page will be checked when it is loaded if the value of this parameter is 0; or checked when it is loaded or exit the page if the value of this parameter is 1.</li></ul> <h3 id="appendpage"><a href="#appendpage" class="header-anchor">#</a> AppendPage </h3> <p>Adds the source content to existing pages in the current ecosystem.</p> <p>Parameters:</p> <ul><li><strong>Id</strong> int - ID of the page to be changed;</li> <li><strong>Value</strong> string - the source code to be added.</li></ul> <h3 id="newblock"><a href="#newblock" class="header-anchor">#</a> NewBlock </h3> <p>Adds a page module to the current ecosystem.</p> <p>Parameters:</p> <ul><li><strong>Name</strong> string - name of the module;</li> <li><strong>Value</strong> string - source code of the module;</li> <li><strong>Conditions</strong> string - conditions to change the module.</li></ul> <h3 id="editblock"><a href="#editblock" class="header-anchor">#</a> EditBlock </h3> <p>Changes existing page modules in the current ecosystem.</p> <p>Parameters:</p> <ul><li>Id int - module ID to be changed;</li> <li>Value string - source code of the new module;</li> <li>Conditions string - new conditions to change the module.</li></ul> <h3 id="newtable"><a href="#newtable" class="header-anchor">#</a> NewTable </h3> <p>Adds a new table to the current ecosystem.</p> <p>Parameters:</p> <ul><li><strong>ApplicationId</strong> int - application ID of the associated table;</li> <li><strong>Name</strong> string - name of the new table;</li> <li><strong>Columns</strong> string - field array in JSON format <code>[{&quot;name&quot;:&quot;...&quot;, &quot;type&quot;:&quot;...&quot;,&quot;index&quot;: &quot;0&quot;, &quot;conditions&quot;:&quot;.. .&quot;},...]</code>, where
<ul><li><strong>name</strong> - field name, only Latin characters;</li> <li><strong>type</strong> - data type <code>varchar,bytea,number,datetime,money,text,double,character</code>;</li> <li><strong>index</strong> - non-primary key field <code>0</code>, primary key <code>1</code>;</li> <li><strong>conditions</strong> - conditions to change the field data, and the access permissions must be specified in JSON format &quot;<code>{&quot;update&quot;:&quot;ContractConditions(MainCondition)&quot;, &quot;read&quot;:&quot;ContractConditions(MainCondition)&quot;}</code>;</li></ul></li> <li><strong>Permissions</strong> string - access permissions in JSON format <code>{&quot;insert&quot;: &quot;...&quot;, &quot;new_column&quot;: &quot;...&quot;, &quot;update&quot;: &quot;...&quot;, &quot;read&quot;: &quot;.. .&quot;}</code>.
<ul><li><strong>insert</strong> - permission to insert entries;</li> <li><strong>new_column</strong> - permission to add a new column;</li> <li><strong>update</strong> - permission to change entry data;</li> <li><strong>read</strong> - permission to read entry data.</li></ul></li></ul> <h3 id="edittable"><a href="#edittable" class="header-anchor">#</a> EditTable </h3> <p>Changes the access permissions of a table in the current ecosystem.</p> <p>Parameters:</p> <ul><li><strong>Name</strong> string - name of the table;</li> <li><strong>InsertPerm</strong> string - permission to insert entries into the table;</li> <li><strong>UpdatePerm</strong> string - permission to update entries in the table;</li> <li><strong>ReadPerm</strong> string - permission to read entries in the table;</li> <li><strong>NewColumnPerm</strong> string - permission to create a new column;</li></ul> <h3 id="newcolumn"><a href="#newcolumn" class="header-anchor">#</a> NewColumn </h3> <p>Adds a new field to the table of the current ecosystem.</p> <p>Parameters:</p> <ul><li><strong>TableName</strong> string - table name;</li> <li><strong>Name</strong> string - field name in Latin characters;</li> <li><strong>Type</strong> string - data type <code>varchar,bytea,number,money,datetime,text,double,character</code>;</li> <li><strong>UpdatePerm</strong> string - permission to change the value in the column;</li> <li><strong>ReadPerm</strong> string - permission to read the value in the column.</li></ul> <h3 id="editcolumn"><a href="#editcolumn" class="header-anchor">#</a> EditColumn </h3> <p>Changes the permission of a specified table field in the current ecosystem.</p> <p>Parameters:</p> <ul><li><strong>TableName</strong> string - table name;</li> <li><strong>Name</strong> string - field name in Latin characters to be changed;</li> <li><strong>UpdatePerm</strong> string - new permission to change the value in the column;</li> <li><strong>ReadPerm</strong> string - new permission to read the value in the column.</li></ul> <h3 id="newlang"><a href="#newlang" class="header-anchor">#</a> NewLang </h3> <p>Adds language resources to the current ecosystem, and the permission to do so is set in the changing_language parameter of the ecosystem parameters.</p> <p>Parameters:</p> <ul><li><strong>Name</strong> string - name of the language resources in Latin characters;</li> <li><strong>Trans</strong> string - string in JSON format, with a two-character lang code as the key and the translated string as the value. For example, <code>{&quot;en&quot;: &quot;English text&quot;, &quot;zh&quot;: &quot;Chinese text&quot;}</code>.</li></ul> <h3 id="editlang"><a href="#editlang" class="header-anchor">#</a> EditLang </h3> <p>Changes the language resources in the current ecosystem, and the permission to do so is set in the changing_language parameter of the ecosystem parameter.</p> <p>Parameters:</p> <ul><li><strong>Id</strong> int - language resources ID.</li> <li><strong>Trans</strong> - string in JSON format, with a two-character lang code as the key and the translated string as the value. For example, <code>{&quot;en&quot;: &quot;English text&quot;, &quot;zh&quot;: &quot;Chinese text&quot;}</code>.</li></ul> <h3 id="import"><a href="#import" class="header-anchor">#</a> Import </h3> <p>Imports an application into the current ecosystem and imports the data loaded from the <a href="#importupload">ImportUpload</a> contract.</p> <p>Parameters:</p> <ul><li><strong>Data</strong> string - data imported in text format, which comes from a file exported by the ecosystem.</li></ul> <h3 id="importupload"><a href="#importupload" class="header-anchor">#</a> ImportUpload </h3> <p>Loads an external application file into the buffer_data table of the current ecosystem for subsequent import.</p> <p>Parameters:</p> <ul><li><strong>InputFile</strong> file - a file written to the buffer_data table of the current ecosystem.</li></ul> <h3 id="newappparam"><a href="#newappparam" class="header-anchor">#</a> NewAppParam </h3> <p>Adds new application parameters to the current ecosystem.</p> <p>Parameters:</p> <ul><li><strong>ApplicationId</strong> int - application ID;</li> <li><strong>Name</strong> string - parameter name;</li> <li><strong>Value</strong> string - parameter value;</li> <li><strong>Conditions</strong> string - permission to change the parameter.</li></ul> <h3 id="editappparam"><a href="#editappparam" class="header-anchor">#</a> EditAppParam </h3> <p>Changes existing application parameters in the current ecosystem.</p> <p>Parameters:</p> <ul><li><strong>Id</strong> int - application parameter ID;</li> <li><strong>Value</strong> string &quot;optional&quot; - new parameter value;</li> <li><strong>Conditions</strong> string &quot;optional&quot; - new permissions to change the parameter.</li></ul> <h3 id="newdelayedcontract"><a href="#newdelayedcontract" class="header-anchor">#</a> NewDelayedContract </h3> <p>Adds a new task to the delayed contracts scheduler daemon.</p> <p>The delayered contracts scheduler runs contracts required by the currently generated block.</p> <p>Parameters:</p> <ul><li><strong>Contract</strong> string - contract name;</li> <li><strong>EveryBlock</strong> int - the contract will be executed every such amount of blocks;</li> <li>Conditions string - permission to change the task;</li> <li><strong>BlockID</strong> int &quot;optional&quot; - the block ID where the contract must be executed. If not specified, it will be calculated automatically by adding the &quot;current block ID&quot; + EveryBlock;</li> <li><strong>Limit</strong> int &quot;optional&quot; - the maximum number of task execution. If not specified, the task will be executed for an unlimited times.</li></ul> <h3 id="editdelayedcontract"><a href="#editdelayedcontract" class="header-anchor">#</a> EditDelayedContract </h3> <p>Changes a task in the delayed contracts scheduler daemon.</p> <p>Parameters:</p> <ul><li><strong>Id</strong> int - task ID;</li> <li><strong>Contract</strong> string - contract name;</li> <li><strong>EveryBlock</strong> int - the contract will be executed every such amount of blocks;</li> <li><strong>Conditions</strong> string - permission to change the task;</li> <li><strong>BlockID</strong> int &quot;optional&quot; - the block ID where the contract must be executed. If not specified, it will be calculated automatically by adding the &quot;current block ID&quot; + EveryBlock;</li> <li><strong>Limit</strong> int &quot;optional&quot; - the maximum number of task execution. If not specified, the task will be executed for an unlimited times.</li> <li><strong>Deleted</strong> int &quot;optional&quot; - task switching. A value of <code>1</code> will disable the task. A value of <code>0</code> will enable the task.</li></ul> <h3 id="uploadbinary"><a href="#uploadbinary" class="header-anchor">#</a> UploadBinary </h3> <p>Adds or overwrites a static file in the X_binaries table. When calling a contract via HTTP API, the request must be in <code>multipart/form-data</code> format; the DataMimeType parameter will be used in conjunction with the form data.</p> <p>Parameters:</p> <ul><li><strong>Name</strong> string - name of the static file;</li> <li><strong>Data</strong> bytes - content of the static file;</li> <li><strong>DataMimeType</strong> string &quot;optional&quot; - a static file in mime-type format;</li> <li><strong>ApplicationId</strong> int - the application ID associated with the X_binaries table.</li></ul> <p>If the DataMimeType parameter is not passed, the <code>application/octet-stream</code> format is used by default.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/IBAX-io/documentation/edit/master/docs/it/topics/script.md" target="_blank" rel="noopener noreferrer">Modifica questa pagina su GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Ultimo aggiornamento:</span> <span class="time">25/6/2023, 15:46:02</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/it/topics/templates2.html">
        Template Language 
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8ffd1d30.js" defer></script><script src="/assets/js/2.8d94a0db.js" defer></script><script src="/assets/js/81.99d389ed.js" defer></script>
  </body>
</html>
