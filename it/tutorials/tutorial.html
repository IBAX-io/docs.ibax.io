<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>IBAX Development Tutorial | IBAX Documentazione</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="apple-touch-icon" size="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" size="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" size="16x16" href="/favicon-16x16.png">
    <link rel="mask-icon" color="#5bbad5" href="/safari-pinned-tab.svg">
    <link rel="manifest" href="/manifest.webmanifest">
    <meta name="description" content="A Decentralized Commercial Cross-Chain infrastructure Network">
    
    <link rel="preload" href="/assets/css/0.styles.7f0f2da6.css" as="style"><link rel="preload" href="/assets/js/app.ed2354d3.js" as="script"><link rel="preload" href="/assets/js/2.14a295a1.js" as="script"><link rel="preload" href="/assets/js/85.3341d558.js" as="script"><link rel="prefetch" href="/assets/js/10.a104077a.js"><link rel="prefetch" href="/assets/js/100.dcda4418.js"><link rel="prefetch" href="/assets/js/101.3f002483.js"><link rel="prefetch" href="/assets/js/102.cd09eeac.js"><link rel="prefetch" href="/assets/js/103.16fa40de.js"><link rel="prefetch" href="/assets/js/104.8698471e.js"><link rel="prefetch" href="/assets/js/105.2db9a241.js"><link rel="prefetch" href="/assets/js/106.d34f9773.js"><link rel="prefetch" href="/assets/js/107.b7bef053.js"><link rel="prefetch" href="/assets/js/108.95e66204.js"><link rel="prefetch" href="/assets/js/109.e903b5a2.js"><link rel="prefetch" href="/assets/js/11.02a59c96.js"><link rel="prefetch" href="/assets/js/110.4114438c.js"><link rel="prefetch" href="/assets/js/111.19b4aae0.js"><link rel="prefetch" href="/assets/js/112.c9503c25.js"><link rel="prefetch" href="/assets/js/113.fc4cffc4.js"><link rel="prefetch" href="/assets/js/114.59f7a81c.js"><link rel="prefetch" href="/assets/js/115.d42ba1ec.js"><link rel="prefetch" href="/assets/js/116.bd5b4011.js"><link rel="prefetch" href="/assets/js/117.9d52ab3d.js"><link rel="prefetch" href="/assets/js/118.f513f593.js"><link rel="prefetch" href="/assets/js/119.078cd29d.js"><link rel="prefetch" href="/assets/js/12.ce6d8e00.js"><link rel="prefetch" href="/assets/js/120.017e1c20.js"><link rel="prefetch" href="/assets/js/121.cec73b04.js"><link rel="prefetch" href="/assets/js/122.8dff3a57.js"><link rel="prefetch" href="/assets/js/123.d7928c13.js"><link rel="prefetch" href="/assets/js/124.e3732c93.js"><link rel="prefetch" href="/assets/js/125.e0b91456.js"><link rel="prefetch" href="/assets/js/126.6718f6ab.js"><link rel="prefetch" href="/assets/js/127.3b445fcd.js"><link rel="prefetch" href="/assets/js/128.b29f5cf2.js"><link rel="prefetch" href="/assets/js/129.eeddd15b.js"><link rel="prefetch" href="/assets/js/13.32bb9e8c.js"><link rel="prefetch" href="/assets/js/130.dcc3b606.js"><link rel="prefetch" href="/assets/js/131.0ce33a04.js"><link rel="prefetch" href="/assets/js/132.db5ef214.js"><link rel="prefetch" href="/assets/js/133.33afab4d.js"><link rel="prefetch" href="/assets/js/134.84f28a6f.js"><link rel="prefetch" href="/assets/js/135.7858dd33.js"><link rel="prefetch" href="/assets/js/136.79fa1a1e.js"><link rel="prefetch" href="/assets/js/137.d48f478a.js"><link rel="prefetch" href="/assets/js/138.bd6c2fd9.js"><link rel="prefetch" href="/assets/js/139.6ee53aa4.js"><link rel="prefetch" href="/assets/js/14.d492bd0f.js"><link rel="prefetch" href="/assets/js/140.ab030c6a.js"><link rel="prefetch" href="/assets/js/141.b71bc8c6.js"><link rel="prefetch" href="/assets/js/142.837769b4.js"><link rel="prefetch" href="/assets/js/143.a934de75.js"><link rel="prefetch" href="/assets/js/144.33bc1488.js"><link rel="prefetch" href="/assets/js/145.ce11df15.js"><link rel="prefetch" href="/assets/js/146.da6f9125.js"><link rel="prefetch" href="/assets/js/147.e3e6894e.js"><link rel="prefetch" href="/assets/js/148.aba3ae3a.js"><link rel="prefetch" href="/assets/js/149.273acb61.js"><link rel="prefetch" href="/assets/js/15.04e9cdd9.js"><link rel="prefetch" href="/assets/js/150.1537541e.js"><link rel="prefetch" href="/assets/js/16.1a8393dc.js"><link rel="prefetch" href="/assets/js/17.abddf148.js"><link rel="prefetch" href="/assets/js/18.1cff6c24.js"><link rel="prefetch" href="/assets/js/19.0e2cfbc3.js"><link rel="prefetch" href="/assets/js/20.01e8066c.js"><link rel="prefetch" href="/assets/js/21.4776481c.js"><link rel="prefetch" href="/assets/js/22.39b444af.js"><link rel="prefetch" href="/assets/js/23.2892f1bb.js"><link rel="prefetch" href="/assets/js/24.57e15656.js"><link rel="prefetch" href="/assets/js/25.08e6622a.js"><link rel="prefetch" href="/assets/js/26.57296ca7.js"><link rel="prefetch" href="/assets/js/27.bb3cd6a8.js"><link rel="prefetch" href="/assets/js/28.d2dff34a.js"><link rel="prefetch" href="/assets/js/29.8f845fe9.js"><link rel="prefetch" href="/assets/js/3.8d28154b.js"><link rel="prefetch" href="/assets/js/30.ea0e974b.js"><link rel="prefetch" href="/assets/js/31.4b4c7d4b.js"><link rel="prefetch" href="/assets/js/32.067561ac.js"><link rel="prefetch" href="/assets/js/33.29e9d8fb.js"><link rel="prefetch" href="/assets/js/34.789ca12e.js"><link rel="prefetch" href="/assets/js/35.2b42f8e4.js"><link rel="prefetch" href="/assets/js/36.fba2560a.js"><link rel="prefetch" href="/assets/js/37.d9363eaf.js"><link rel="prefetch" href="/assets/js/38.d62d2f87.js"><link rel="prefetch" href="/assets/js/39.d32d57ec.js"><link rel="prefetch" href="/assets/js/4.79290685.js"><link rel="prefetch" href="/assets/js/40.c1393e87.js"><link rel="prefetch" href="/assets/js/41.04c6038d.js"><link rel="prefetch" href="/assets/js/42.905da8ae.js"><link rel="prefetch" href="/assets/js/43.19649e28.js"><link rel="prefetch" href="/assets/js/44.b0f6b8e9.js"><link rel="prefetch" href="/assets/js/45.5d19e959.js"><link rel="prefetch" href="/assets/js/46.8687d0eb.js"><link rel="prefetch" href="/assets/js/47.aff2b61b.js"><link rel="prefetch" href="/assets/js/48.f154ba5f.js"><link rel="prefetch" href="/assets/js/49.dc83ea0d.js"><link rel="prefetch" href="/assets/js/5.50ebf2b0.js"><link rel="prefetch" href="/assets/js/50.f38bbdae.js"><link rel="prefetch" href="/assets/js/51.229db107.js"><link rel="prefetch" href="/assets/js/52.63b36668.js"><link rel="prefetch" href="/assets/js/53.96aace2f.js"><link rel="prefetch" href="/assets/js/54.58c1c613.js"><link rel="prefetch" href="/assets/js/55.d9ffd6d6.js"><link rel="prefetch" href="/assets/js/56.f888d1d5.js"><link rel="prefetch" href="/assets/js/57.df15705e.js"><link rel="prefetch" href="/assets/js/58.e749d9b2.js"><link rel="prefetch" href="/assets/js/59.b36e04a6.js"><link rel="prefetch" href="/assets/js/6.b72a56bb.js"><link rel="prefetch" href="/assets/js/60.b2e91e30.js"><link rel="prefetch" href="/assets/js/61.692e75d6.js"><link rel="prefetch" href="/assets/js/62.5a57fa28.js"><link rel="prefetch" href="/assets/js/63.648d2341.js"><link rel="prefetch" href="/assets/js/64.33fca94f.js"><link rel="prefetch" href="/assets/js/65.13440155.js"><link rel="prefetch" href="/assets/js/66.de8e5b74.js"><link rel="prefetch" href="/assets/js/67.b3bfcbbe.js"><link rel="prefetch" href="/assets/js/68.70e1fec1.js"><link rel="prefetch" href="/assets/js/69.59a1ff4e.js"><link rel="prefetch" href="/assets/js/7.97328cfb.js"><link rel="prefetch" href="/assets/js/70.d08c86af.js"><link rel="prefetch" href="/assets/js/71.a3d3f1cd.js"><link rel="prefetch" href="/assets/js/72.03370bd4.js"><link rel="prefetch" href="/assets/js/73.a5e6fbb3.js"><link rel="prefetch" href="/assets/js/74.3ed5a665.js"><link rel="prefetch" href="/assets/js/75.ddf691ed.js"><link rel="prefetch" href="/assets/js/76.20b05096.js"><link rel="prefetch" href="/assets/js/77.2586d174.js"><link rel="prefetch" href="/assets/js/78.3fb56785.js"><link rel="prefetch" href="/assets/js/79.fec1765f.js"><link rel="prefetch" href="/assets/js/8.500d8954.js"><link rel="prefetch" href="/assets/js/80.d5974e7f.js"><link rel="prefetch" href="/assets/js/81.c70e41a0.js"><link rel="prefetch" href="/assets/js/82.ffbae7df.js"><link rel="prefetch" href="/assets/js/83.b2ae7c60.js"><link rel="prefetch" href="/assets/js/84.e36356eb.js"><link rel="prefetch" href="/assets/js/86.92e9c8e8.js"><link rel="prefetch" href="/assets/js/87.32878110.js"><link rel="prefetch" href="/assets/js/88.ddffedd6.js"><link rel="prefetch" href="/assets/js/89.0715a479.js"><link rel="prefetch" href="/assets/js/9.caae5b5a.js"><link rel="prefetch" href="/assets/js/90.7aed6c12.js"><link rel="prefetch" href="/assets/js/91.7ca1606c.js"><link rel="prefetch" href="/assets/js/92.3726c36e.js"><link rel="prefetch" href="/assets/js/93.9b6ae4dd.js"><link rel="prefetch" href="/assets/js/94.cf9dd272.js"><link rel="prefetch" href="/assets/js/95.dc1f3866.js"><link rel="prefetch" href="/assets/js/96.7d2e294a.js"><link rel="prefetch" href="/assets/js/97.3c6e04b7.js"><link rel="prefetch" href="/assets/js/98.32aeff0a.js"><link rel="prefetch" href="/assets/js/99.c50280d4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7f0f2da6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/it/" class="home-link router-link-active"><img src="/ibax.ico" alt="IBAX Documentazione" class="logo"> <span class="site-name can-hide">IBAX Documentazione</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/it/concepts/about-the-platform.html" class="nav-link">
  Concetto
</a></div><div class="nav-item"><a href="/it/tutorials/app_tutorial.html" class="nav-link">
  Tutorial
</a></div><div class="nav-item"><a href="/it/topics/script.html" class="nav-link">
  Guida
</a></div><div class="nav-item"><a href="/it/reference/api2.html" class="nav-link">
  Riferimento
</a></div><div class="nav-item"><a href="/it/howtos/deployment.html" class="nav-link">
  Distribuzione
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Seleziona la lingua" class="dropdown-title"><span class="title">Le lingue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Seleziona la lingua" class="mobile-dropdown-title"><span class="title">Le lingue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tutorials/tutorial.html" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/de/tutorials/tutorial.html" class="nav-link">
  Deutsch
</a></li><li class="dropdown-item"><!----> <a href="/es/tutorials/tutorial.html" class="nav-link">
  Español
</a></li><li class="dropdown-item"><!----> <a href="/fr/tutorials/tutorial.html" class="nav-link">
  Français
</a></li><li class="dropdown-item"><!----> <a href="/it/tutorials/tutorial.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Italiano
</a></li><li class="dropdown-item"><!----> <a href="/ja/tutorials/tutorial.html" class="nav-link">
  日本語
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/tutorials/tutorial.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/tr-TR/tutorials/tutorial.html" class="nav-link">
  Türkçe
</a></li></ul></div></div> <a href="https://github.com/IBAX-io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/it/concepts/about-the-platform.html" class="nav-link">
  Concetto
</a></div><div class="nav-item"><a href="/it/tutorials/app_tutorial.html" class="nav-link">
  Tutorial
</a></div><div class="nav-item"><a href="/it/topics/script.html" class="nav-link">
  Guida
</a></div><div class="nav-item"><a href="/it/reference/api2.html" class="nav-link">
  Riferimento
</a></div><div class="nav-item"><a href="/it/howtos/deployment.html" class="nav-link">
  Distribuzione
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Seleziona la lingua" class="dropdown-title"><span class="title">Le lingue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Seleziona la lingua" class="mobile-dropdown-title"><span class="title">Le lingue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tutorials/tutorial.html" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/de/tutorials/tutorial.html" class="nav-link">
  Deutsch
</a></li><li class="dropdown-item"><!----> <a href="/es/tutorials/tutorial.html" class="nav-link">
  Español
</a></li><li class="dropdown-item"><!----> <a href="/fr/tutorials/tutorial.html" class="nav-link">
  Français
</a></li><li class="dropdown-item"><!----> <a href="/it/tutorials/tutorial.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Italiano
</a></li><li class="dropdown-item"><!----> <a href="/ja/tutorials/tutorial.html" class="nav-link">
  日本語
</a></li><li class="dropdown-item"><!----> <a href="/zh-CN/tutorials/tutorial.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/tr-TR/tutorials/tutorial.html" class="nav-link">
  Türkçe
</a></li></ul></div></div> <a href="https://github.com/IBAX-io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Tutorial</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/it/tutorials/app_tutorial.html" class="sidebar-link">Tutorial for application development</a></li><li><a href="/it/tutorials/tutorial.html" aria-current="page" class="active sidebar-link">IBAX Development Tutorial</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/it/tutorials/tutorial.html#getting-started-guide" class="sidebar-link">Getting Started Guide</a></li><li class="sidebar-sub-header"><a href="/it/tutorials/tutorial.html#deployment" class="sidebar-link">Deployment</a></li><li class="sidebar-sub-header"><a href="/it/tutorials/tutorial.html#advanced-guide" class="sidebar-link">Advanced Guide</a></li><li class="sidebar-sub-header"><a href="/it/tutorials/tutorial.html#deploy-first-smart-contract-via-command-line-tool" class="sidebar-link">Deploy first smart contract via command line tool</a></li><li class="sidebar-sub-header"><a href="/it/tutorials/tutorial.html#command-line-tool-eco-development" class="sidebar-link">Command Line Tool Eco Development</a></li><li class="sidebar-sub-header"><a href="/it/tutorials/tutorial.html#deploy-application-using-command-line-tools" class="sidebar-link">Deploy application using command line tools</a></li><li class="sidebar-sub-header"><a href="/it/tutorials/tutorial.html#ecological-configuration-using-command-line-tool" class="sidebar-link">Ecological configuration using command line tool</a></li><li class="sidebar-sub-header"><a href="/it/tutorials/tutorial.html#deploy-applications-using-application-packaging-tool" class="sidebar-link">Deploy applications using application packaging tool</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ibax-development-tutorial"><a href="#ibax-development-tutorial" class="header-anchor">#</a> IBAX Development Tutorial</h1> <h2 id="getting-started-guide"><a href="#getting-started-guide" class="header-anchor">#</a> Getting Started Guide</h2> <ul><li><a href="#deploy-first-smart-contract-via-command-line-tool">Deploy first smart contract via command line tool</a></li> <li><a href="#command-line-tool-eco-development">Command Line Tool Eco Development</a></li></ul> <h2 id="deployment"><a href="#deployment" class="header-anchor">#</a> Deployment</h2> <ul><li><a href="#deploy-application-using-command-line-tools">Deploy application using command line tools</a></li> <li><a href="#ecological-configuration-using-command-line-tool">Ecological configuration using command line tool</a></li></ul> <h2 id="advanced-guide"><a href="#advanced-guide" class="header-anchor">#</a> Advanced Guide</h2> <ul><li><a href="#deploy-applications-using-application-packaging-tool">Deploy applications using application packaging tool</a></li></ul> <h2 id="deploy-first-smart-contract-via-command-line-tool"><a href="#deploy-first-smart-contract-via-command-line-tool" class="header-anchor">#</a> Deploy first smart contract via command line tool</h2> <p>We will deploy <a href="/it/concepts/thesaurus.html#smart-contract">smart contracts</a> on the IBAX blockchain via the <a href="https://github.com/IBAX-io/ibax-cli" target="_blank" rel="noopener noreferrer">command line tool<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, and learn how to invoke smart contracts.
As our first smart contract, we deployed it to <a href="/it/concepts/blockchain-layers.html">local test network</a> How to deploy a local network you can refer to <a href="/it/howtos/deployment.html">Network Deployment</a> ,
so you can deploy and run it as you like without any overhead.</p> <h3 id="create-application"><a href="#create-application" class="header-anchor">#</a> Create application</h3> <p>Call the contract @1NewApplication to create the application, which has an application name parameter and a modify <a href="/it/concepts/about-the-platform.html#access-rights-control-mechanism">permission parameter</a></p> <div class="language-text extra-class"><pre class="language-text"><code>1  $ ibax-cli console
2    
3  Welcome to the IBAX console!
4  To exit, press ctrl-d or type exit
5  &gt;callContract @1NewApplication {&quot;Name&quot;: &quot;testapp&quot;, &quot;Conditions&quot;: &quot;ContractConditions(\&quot;@1DeveloperCondition\&quot;)&quot;}
6  
7  {
8    &quot;block_id&quot;: 1217,
9    &quot;hash&quot;: &quot;6327161d2202c33c06d34ab4ed9b509c05fc2cbb15cf260c6d3d404a6f640028&quot;,
10   &quot;penalty&quot;: 0,
11   &quot;err&quot;: &quot;31&quot;
12 }
</code></pre></div><p>The following is explained by line:</p> <ul><li>Line 1, start command line terminal</li> <li>Line 5, call the contract @1NewApplication to create an application with the application name <code>testapp</code> and the application modification permission <code>@1DeveloperCondition</code> with developer permission</li> <li>Row 8, the block id generated by the transaction</li> <li>Line 9, the block hash generated by the transaction</li> <li>Line 10, if the transaction execution fails (0: no penalty 1: penalty)</li> <li>On line 11, if the transaction execution fails, an error text message is returned, and if the block id is returned, the err field is the id of the application</li></ul> <p>Of course if you want to see what fields and field types are available in this contract, you can call the <code>getContractInfo</code> method, which will return the contract information as follows:</p> <div class="language-text extra-class"><pre class="language-text"><code>&gt;getContractInfo @1NewApplication

{
    &quot;id&quot;: 5022,
    &quot;state&quot;: 1,
    &quot;tableid&quot;: &quot;22&quot;,
    &quot;walletid&quot;: &quot;0&quot;,
    &quot;tokenid&quot;: &quot;1&quot;,
    &quot;address&quot;: &quot;0000-0000-0000-0000-0000&quot;,
    &quot;fields&quot;: [
        {
            &quot;name&quot;: &quot;Name&quot;,
            &quot;type&quot;: &quot;string&quot;,
            &quot;optional&quot;: false
        },
        {
            &quot;name&quot;: &quot;Conditions&quot;,
            &quot;type&quot;: &quot;string&quot;,
            &quot;optional&quot;: false
        },
        {
            &quot;name&quot;: &quot;VotingId&quot;,
            &quot;type&quot;: &quot;int&quot;,
            &quot;optional&quot;: true
        }
    ],
    &quot;name&quot;: &quot;@1NewApplication&quot;,
    &quot;app_id&quot;: 1,
    &quot;ecosystem&quot;: 1,
    &quot;conditions&quot;: &quot;ContractConditions(\&quot;@1DeveloperCondition\&quot;)&quot;
}
</code></pre></div><p>The <code>fields</code> field is the parameters of the contract, including the name of the parameter <code>name</code>, <code>type</code>, <code>optional</code>,
<code>Name</code> and <code>Conditions</code> are required, <code>VotingId</code> is optional, refer to <a href="/it/reference/api2.html#contract-name">contract/name</a> API method</p> <h3 id="writing-contracts"><a href="#writing-contracts" class="header-anchor">#</a> Writing contracts</h3> <p>We use <a href="/it/topics/script.html#needle-contract-language">Needle</a> to write a smart contract that
We implement a simple addition operation, the source code of the contract is as follows, we save the contract as <code>SumMath.sim</code></p> <div class="language-text extra-class"><pre class="language-text"><code>1    contract SumMath {
2        data {
3            A int
4            B int
5        }
6        conditions {
7    
8        }
9        action {
10            var sum int
11            sum = $A + $B
12            $result = sum
13        }
14    }
</code></pre></div><p>The following is explained by line:</p> <ul><li>In line 1, we define a contract with the name SumMath</li> <li>Line 2, <a href="/it/topics/script.html#data-section">Data Section</a></li> <li>In lines 3-4, we define two input 64-bit integer-type parameters <code>A B</code></li> <li>Line 6, <a href="/it/topics/script.html#conditions-section">Conditional Section</a></li> <li>Line 9, <a href="/it/topics/script.html#action-section">Operations Section</a> We define a variable sum to receive the result of A+B.
Assign the value of sum to $result, as the result of the contract. Of course it is possible to assign the value of A+B to $result directly, but it can be shown as an example.</li></ul> <h3 id="create-contract"><a href="#create-contract" class="header-anchor">#</a> Create Contract</h3> <p>There are two ways to create a contract, the first of which is:
In the first step we write a contract parameter file in json format:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;ApplicationId&quot;</span><span class="token operator">:</span> <span class="token number">31</span><span class="token punctuation">,</span>
  <span class="token property">&quot;Value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;contract SumMath {\n    data {\n        A int\n        B int\n    }\n    conditions {\n\n    }\n    action {\n        var sum int\n        sum = $A + $B\n        $result = sum\n    }\n}&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;Conditions&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ContractConditions(\&quot;@1DeveloperCondition\&quot;)&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>where <code>ApplicationId</code> is the application id, <code>Value</code> is the contract source code, need to escape special characters, <code>Conditions</code> is the contract modification rights</p> <p>We named it SumMathParams.json</p> <p>The second step calls to create a contract @1NewContract</p> <div class="language- extra-class"><pre class="language-text"><code>1    &gt;callContract @1NewContract -f=./data/SumMathParams.json
2    {
3        &quot;block_id&quot;: 1238,
4        &quot;hash&quot;: &quot;f3fe7aff8a613c96299723b7e9af0682aa8cabe7becf67a485e2a77a974f58b6&quot;,
5        &quot;penalty&quot;: 0,
6        &quot;err&quot;: &quot;328&quot;
7    }
</code></pre></div><p>Second method:
The saved contract source file is passed directly into the contract parameters in the parameter format <code>paramsName</code> + <code>-</code> + &quot;file&quot;,<code>paramsName-file</code> as follows:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">1</span>    <span class="token operator">&gt;</span>callContract @1NewContract <span class="token punctuation">{</span><span class="token string">&quot;ApplicationId&quot;</span><span class="token builtin class-name">:</span> <span class="token number">31</span>, <span class="token string">&quot;Value-file&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;SumMath.sim&quot;</span>, <span class="token string">&quot;Conditions&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">}</span>    
<span class="token number">2</span>    <span class="token punctuation">{</span>
<span class="token number">3</span>        <span class="token string">&quot;block_id&quot;</span><span class="token builtin class-name">:</span> <span class="token number">2055</span>,
<span class="token number">4</span>        <span class="token string">&quot;hash&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;cdf25060669cf7cba137278...26ca463fd5d458f3402a5f0137f693db&quot;</span>,
<span class="token number">5</span>        <span class="token string">&quot;penalty&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
<span class="token number">6</span>        <span class="token string">&quot;err&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;368&quot;</span>
<span class="token number">7</span>    <span class="token punctuation">}</span>
</code></pre></div><p>The following is explained by line:</p> <ul><li>Line 1: Call the contract @1NewContract to create the contract, -f uses the file to import the contract parameters</li> <li>Row 3, the block id generated by the transaction</li> <li>Line 4, the block hash generated by the transaction</li> <li>Line 5, if the transaction execution fails (0: no penalty 1: penalty)</li> <li>Line 6, if the transaction execution fails, an error text message is returned, and if the block id is returned, the err field is the id of the contract</li></ul> <p>Let's try calling the contract we just deployed</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">1</span>  <span class="token operator">&gt;</span>callContract @5SumMath <span class="token punctuation">{</span><span class="token string">&quot;A&quot;</span>:1, <span class="token string">&quot;B&quot;</span>:2<span class="token punctuation">}</span>
<span class="token number">2</span>  
<span class="token number">3</span>  <span class="token punctuation">{</span>
<span class="token number">4</span>      <span class="token string">&quot;block_id&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1239</span>,
<span class="token number">5</span>      <span class="token string">&quot;hash&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;7fa09da0b9f65634119a910f9d91aaf4927208278efd62961499ef7e4f4c8c9c&quot;</span>,
<span class="token number">6</span>      <span class="token string">&quot;penalty&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
<span class="token number">7</span>      <span class="token string">&quot;err&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;3&quot;</span>
<span class="token number">8</span>  <span class="token punctuation">}</span>
</code></pre></div><p>The call is completed and the result is as expected, as explained below by line:</p> <ul><li>The first line calls the contract, here we deploy the contract to the ecology with ecological id 5, of course, if the current ecological id is 5, in the same ecology, you can also call <code>callContract SumMath {&quot;A&quot;:1, &quot;B&quot;:2}</code> in this way</li> <li>Line 3, the block id generated by the transaction</li> <li>Line 4, the block hash generated by the transaction</li> <li>Line 5, if the transaction execution fails (0: no penalty 1: penalty)</li> <li>Line 6, if the transaction execution fails, an error text message is returned, and if the block id is returned, the err field is the result of the contract, which is the value of <code>$result</code></li></ul> <h2 id="command-line-tool-eco-development"><a href="#command-line-tool-eco-development" class="header-anchor">#</a> Command Line Tool Eco Development</h2> <p>In this tutorial, you will learn how to:</p> <ul><li>1.<a href="#step-1-create-ecosystem">Create Ecosystem</a></li> <li>2.<a href="#step-2-create-application">Create Application</a></li> <li>3.<a href="#step-3-create-table">Create Table</a></li> <li>4.<a href="#step-4-create-application-parameters">Create Application Parameters</a></li> <li>5.<a href="#step-5-create-contract-deploy-contract">Create &amp; Deploy Contract</a></li> <li>6.<a href="#step-6-create-ecological-parameters">Create Ecological Parameters</a></li> <li>7.<a href="#step-7-add-localization">Add Localization</a></li> <li>8.<a href="#step-8-modify-the-contract">Modify Contract</a></li> <li>9.<a href="#step-9-modify-data-table-permissions">Modify data table permissions</a></li></ul> <p>In order to understand more clearly how the IBAX ecology and applications are like and what they do, it is preferred that we understand where the ecology and applications should belong, and we can understand better with a simple mind map:
<img src="/ibax-eco.png" alt="image"></p> <p>It can be seen that IBAX networks can have many <a href="/it/concepts/about-the-platform.html#ecolib">Ecosystems</a>.
Each ecology can have multiple <a href="/it/concepts/about-the-platform.html#applications">applications</a>.
Each application has <a href="/it/concepts/thesaurus.html#smart-contract">contract</a>.
<a href="/it/concepts/about-the-platform.html#tables">Tables</a>.
Ecology has ecological parameters, application has application parameters</p> <h3 id="step-1-create-ecosystem"><a href="#step-1-create-ecosystem" class="header-anchor">#</a> Step 1 Create Ecosystem</h3> <p>We start by creating an ecology using the <a href="https://github.com/IBAX-io/ibax-cli" target="_blank" rel="noopener noreferrer">command line tool<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, calling the contract @1NewEcosystem.
If you want to change the ecological name, you can call the <code>@1EditEcosystemName</code> contract.</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">1</span>    $ ibax-cli console
<span class="token number">2</span>    
<span class="token number">3</span>    Welcome to the IBAX console<span class="token operator">!</span>
<span class="token number">4</span>    To exit, press ctrl-d or <span class="token builtin class-name">type</span> <span class="token builtin class-name">exit</span>
<span class="token number">5</span>    <span class="token operator">&gt;</span>callContract @1NewEcosystem <span class="token punctuation">{</span><span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;goodBoy school&quot;</span><span class="token punctuation">}</span>
<span class="token number">6</span>    
<span class="token number">7</span>    <span class="token punctuation">{</span>
<span class="token number">8</span>        <span class="token string">&quot;block_id&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1199</span>,
<span class="token number">9</span>        <span class="token string">&quot;hash&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;a1dc90c1772545c16394b9521...227676b27b145743556a8973dd&quot;</span>,
<span class="token number">10</span>       <span class="token string">&quot;penalty&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
<span class="token number">11</span>       <span class="token string">&quot;err&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;18&quot;</span>
<span class="token number">12</span>   <span class="token punctuation">}</span>
</code></pre></div><p>The following is explained by line:</p> <ul><li>Line 1, which starts the command line console program</li> <li>Line 5, call the contract <code>@1NewEcosystem</code> to create an ecosystem with the name test ecosystem</li> <li>Line 8, the block id generated by the transaction</li> <li>Line 9, the block hash generated by the transaction</li> <li>Line 10, if the transaction execution fails (0: no penalty 1: penalty)</li> <li>Line 11, if the transaction execution fails, an error text message is returned, and if the block id is returned, the err field is the id of the ecology as <code>18</code></li></ul> <p>Then we configure the command tool <code>config.yml</code>, set <code>ecosystem</code> to the created ecid <code>18</code> and restart the command line console program</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>exit
INFO<span class="token punctuation">[</span>0002<span class="token punctuation">]</span> Exit

$ <span class="token function">vim</span> data/config.yml

$ ibax-cli console

Welcome to the IBAX console<span class="token operator">!</span>
To exit, press ctrl-d or <span class="token builtin class-name">type</span> <span class="token builtin class-name">exit</span>
<span class="token operator">&gt;</span>
</code></pre></div><h3 id="step-2-create-application"><a href="#step-2-create-application" class="header-anchor">#</a> Step 2 Create Application</h3> <p>Call the contract <code>@1NewApplication</code> to create the application, which has an application name parameter and a modify <a href="/it/concepts/about-the-platform.html#access-rights-control-mechanism">Permission Parameter</a></p> <div class="language-text extra-class"><pre class="language-text"><code>1  &gt;callContract @1NewApplication {&quot;Name&quot;: &quot;GradesRecorder&quot;, &quot;Conditions&quot;: &quot;ContractConditions(\&quot;@1DeveloperCondition\&quot;)&quot;}
2  
3  {
4     &quot;block_id&quot;: 1246,
5     &quot;hash&quot;: &quot;85ab8953d26d0d1047fc610866115331babfaf88c80792d50b41826185c9f6f8&quot;,
6     &quot;penalty&quot;: 0,
7     &quot;err&quot;: &quot;47&quot;
8  }
</code></pre></div><p>If you need to modify the application permissions, you can call the <code>EditApplication</code> contract</p> <p>The following is explained by line:</p> <ul><li>Line 1, call the contract @1NewApplication to create an application, the application name is <code>GradesRecorder</code>, the application modification permission is developer permission <code>@1DeveloperCondition</code></li> <li>Line 4, the block id generated by the transaction</li> <li>Line 5, the block hash generated by the transaction</li> <li>Line 6, if the transaction execution fails (0: no penalty 1: penalty)</li> <li>Line 7, if the transaction execution fails, an error text message is returned, and if the block id is returned, the err field the id of the application is <code>47</code></li></ul> <p>Let's write a simple example of an application that keeps track of students' grades.
The data table fields include student information, grade <code>grade</code>, class
<code>class</code>, subject grades <code>mathematics,physics,literature</code>, and Composite score <code>overall_score</code>, rating <code>score</code>, creation timestamp (ms) <code>created_at</code></p> <h3 id="step-3-create-table"><a href="#step-3-create-table" class="header-anchor">#</a> Step 3 Create Table</h3> <p>In the first step we write a contract parameter file in json format:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;ApplicationId&quot;</span><span class="token operator">:</span> <span class="token number">47</span><span class="token punctuation">,</span>
  <span class="token property">&quot;Name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;grade_info&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;ColumnsArr&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;student&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;grade&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;mathematics&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;physics&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;literature&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;overall_score&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;score&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;created_at&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;TypesArr&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;varchar&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;varchar&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;number&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;InsertPerm&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ContractConditions(\&quot;MainCondition\&quot;)&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;UpdatePerm&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ContractConditions(\&quot;MainCondition\&quot;)&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;ReadPerm&quot;</span><span class="token operator">:</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;NewColumnPerm&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ContractConditions(\&quot;MainCondition\&quot;)&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>where <code>ApplicationId</code> is the application id,<code>Name</code> is the name of the created data table <code>test_teble</code>.
<code>ColumnsArr</code> is an array of data table fields, <code>TypesArr</code> is the type of data table fields, including 9 <a href="/it/concepts/about-the-platform.html#tables">types</a> <code>varchar</code>,<code>character</code>,<code>json</code>,<code>number</code>,<code>datetime</code>,<code>double</code>,<code>money</code>,<code>text</code>,<code>bytea</code>, the field name and the field type are one-to-one correspondence.
<code>InsertPerm</code> for data table new entry permission, <code>UpdatePerm</code> for data table update entry permission, <code>ReadPerm</code> for data table data read permission, <code>NewColumnPerm</code> for new data table field permission
Referring to <a href="/it/concepts/about-the-platform.html#access-rights-control-mechanism">Permission Control</a> , here<code>ContractConditions(\&quot;MainCondition\&quot;)</code> is available for the current ecosystem creator.</p> <p>We name it createTable.json, and then call the contract to create the data table <code>@1NewTableJoint</code></p> <div class="language-text extra-class"><pre class="language-text"><code>&gt;callContract @1NewTableJoint -f ./createTestTable.json
</code></pre></div><h3 id="modify-data-table-field-permissions"><a href="#modify-data-table-field-permissions" class="header-anchor">#</a> Modify data table field permissions</h3> <p>We can modify the data table field permissions, data table field permissions include read permissions and update permissions, where read permissions,
in the contract using <code>DBFind.Columns</code> filter fields or interfaces such as <a href="/it/reference/api2.html#list-name-limit-offset-columns">list</a> query,
if there is no permission, it will report a permission error.
The update permission is the permission to update the data table fields.
We set the <code>student</code> field read and update permissions to <code>false</code>, but of course it can be set to be operable by some contract.
Call the <code>@1EditColumn</code> contract to modify the data table field permissions</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>callContract @1EditColumn <span class="token punctuation">{</span><span class="token string">&quot;TableName&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;grade_info&quot;</span>, <span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;student&quot;</span>, <span class="token string">&quot;UpdatePerm&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;false&quot;</span>, <span class="token string">&quot;ReadPerm&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;false&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p>We can create several application parameters<code>grade_best_type</code>,<code>grade_type_a+</code>,<code>grade_type_a</code>,<code>grade_type_b+</code>,<code>grade_type_b</code>,<code>grade_type_c</code>, grade rating type</p> <h3 id="step-4-create-application-parameters"><a href="#step-4-create-application-parameters" class="header-anchor">#</a> Step 4 Create Application Parameters</h3> <p>Call the contract <code>@1NewAppParam</code> to create the application parameters, if you want to modify the application parameters you can call the contract <code>@1EditAppParam</code>.</p> <div class="language-text extra-class"><pre class="language-text"><code>&gt;callContract @1NewAppParam {&quot;ApplicationId&quot;: 47, &quot;Name&quot;: &quot;grade_best_type&quot;, &quot;Value&quot;: &quot;A+&quot;, &quot;Conditions&quot;: &quot;ContractConditions(\&quot;MainCondition\&quot;)&quot;}
&gt;callContract @1NewAppParam {&quot;ApplicationId&quot;: 47, &quot;Name&quot;: &quot;grade_type_a+&quot;, &quot;Value&quot;: &quot;{\&quot;max\&quot;: 101,\&quot;min\&quot;: 90}&quot;, &quot;Conditions&quot;: &quot;ContractConditions(\&quot;MainCondition\&quot;)&quot;}
&gt;callContract @1NewAppParam {&quot;ApplicationId&quot;: 47, &quot;Name&quot;: &quot;grade_type_a&quot;, &quot;Value&quot;: &quot;{\&quot;max\&quot;: 90,\&quot;min\&quot;: 80}&quot;, &quot;Conditions&quot;: &quot;ContractConditions(\&quot;MainCondition\&quot;)&quot;}
&gt;callContract @1NewAppParam {&quot;ApplicationId&quot;: 47, &quot;Name&quot;: &quot;grade_type_b+&quot;, &quot;Value&quot;: &quot;{\&quot;max\&quot;: 80,\&quot;min\&quot;: 70}&quot;, &quot;Conditions&quot;: &quot;ContractConditions(\&quot;MainCondition\&quot;)&quot;}
&gt;callContract @1NewAppParam {&quot;ApplicationId&quot;: 47, &quot;Name&quot;: &quot;grade_type_b&quot;, &quot;Value&quot;: &quot;{\&quot;max\&quot;: 70,\&quot;min\&quot;: 60}&quot;, &quot;Conditions&quot;: &quot;ContractConditions(\&quot;MainCondition\&quot;)&quot;}
&gt;callContract @1NewAppParam {&quot;ApplicationId&quot;: 47, &quot;Name&quot;: &quot;grade_type_c&quot;, &quot;Value&quot;: &quot;{\&quot;max\&quot;: 60,\&quot;min\&quot;: 0}&quot;, &quot;Conditions&quot;: &quot;ContractConditions(\&quot;MainCondition\&quot;)&quot;}
</code></pre></div><p>where <code>grade_best_type</code> is the best rating type.
<code>grade_type_a+</code> is the condition triggered by the rating <code>A+</code>, when the score is greater than or equal to 90 and less than 101, the rating is<code>A+</code>, other parameters are similar</p> <h3 id="step-5-create-contract-deploy-contract"><a href="#step-5-create-contract-deploy-contract" class="header-anchor">#</a> Step 5 Create Contract Deploy Contract</h3> <p>We create a contract to record the student's grade information and final rating for each subject, and enter the student's grade class and grade for each subject when entering the information.
Based on the input scores of each subject, the average calculation is done to get the overall score <code>overallScore</code> and the final rating<code>score</code>.
When the contract is called, it will create a record to the data table we just created <code>grade_info</code></p> <p>First we write a contract and name it <code>NewRecord.sim</code></p> <div class="language-text extra-class"><pre class="language-text"><code>1	contract NewRecord {				
2	    data {				
3	        Student string				
4	        Grade int				
5	        Class int				
6	        Mathematics int				
7	        Physics int				
8	        Literature int				
9	    }				
10	    func getScore(a b c int) map{				
11	        var m map				
12	        var overallScore int				
13	        overallScore = (a+b+c) / 3				
14	        m[&quot;overallScore&quot;] = overallScore				
15	        if overallScore &gt;= $gradeTypeABest[&quot;min&quot;] &amp;amp;&amp;amp; overallScore &amp;lt; $gradeTypeABest[&quot;max&quot;] {				
16	            m[&quot;score&quot;] = &quot;A+&quot;				
17	        }elif overallScore &gt;= $gradeTypeA[&quot;min&quot;] &amp;amp;&amp;amp; overallScore &amp;lt; $gradeTypeA[&quot;max&quot;] {				
18	            m[&quot;score&quot;] = &quot;A&quot;				
19	        }elif overallScore &gt;= $gradeTypeBBest[&quot;min&quot;] &amp;amp;&amp;amp; overallScore &amp;lt; $gradeTypeBBest[&quot;max&quot;] {				
20	            m[&quot;score&quot;] = &quot;B+&quot;				
21	        }elif overallScore &gt;= $gradeTypeB[&quot;min&quot;] &amp;amp;&amp;amp; overallScore &amp;lt; $gradeTypeB[&quot;max&quot;] {				
22	            m[&quot;score&quot;] = &quot;B&quot;				
23	        }elif overallScore &gt;= $gradeTypeC[&quot;min&quot;] &amp;amp;&amp;amp; overallScore &amp;lt; $gradeTypeC[&quot;max&quot;]{				
24	            m[&quot;score&quot;] = &quot;C&quot;				
25	        }else{				
26	            m[&quot;score&quot;] = &quot;Notset&quot;				
27	        }				
28	        return m				
29	    }				
30	    func safeJsonDecode(m string) map {				
31	        var res map				
32	        if Size(m) &gt; 0 {				
33	            res = JSONDecode(m)				
34	        }				
35	        return res				
36	    }				
37					
38	    conditions {				
39	        if Size($Student) == 0 {				
40	            warning &quot;Student Can not be empty&quot;				
41	        }				
42	        if $Class &amp;lt;= 0{				
43	            warning &quot;Class cannot be less than or equal to zero&quot;				
44	        }				
45	        if $Grade &amp;lt;= 0{				
46	            warning &quot;Grade cannot be less than or equal to zero&quot;				
47	        }				
48	        if $Mathematics &amp;lt; 0 {				
49	            warning &quot;Mathematics cannot be less than zero&quot;				
50	        }				
51	        if $Physics &amp;lt; 0 {				
52	            warning &quot;Physics cannot be less than zero&quot;				
53	        }				
54	        if $Literature &amp;lt; 0 {				
55	            warning &quot;Literature cannot be less than zero&quot;				
56	        }				
57	        if $Mathematics &gt; 100 || $Physics &gt; 100 ||  $Literature &gt; 100{				
58	            warning &quot;Score cannot exceed 100&quot;				
59	        }				
60	        var app map				
61	        app = DBFind(&quot;@1applications&quot;).Columns(&quot;id,ecosystem&quot;).Where({&quot;ecosystem&quot;: 18,&quot;name&quot;:&quot;GradesRecorder&quot;,&quot;deleted&quot;:0}).Row()				
62	        if !app {				
63	            warning LangRes(&quot;@1app_not_found&quot;)				
64	        }				
65					
66	        var app_id int				
67	        app_id = Int(app[&quot;id&quot;])				
68	        $eId = Int(app[&quot;ecosystem&quot;])				
69	        $gradeBestType = AppParam(app_id, &quot;grade_best_type&quot;, $eId)				
70	        $gradeTypeABest = safeJsonDecode(AppParam(app_id, &quot;grade_type_a+&quot;, $eId))				
71	        $gradeTypeA = safeJsonDecode(AppParam(app_id, &quot;grade_type_a&quot;, $eId))				
72	        $gradeTypeBBest = safeJsonDecode(AppParam(app_id, &quot;grade_type_b+&quot;, $eId))				
73	        $gradeTypeB = safeJsonDecode(AppParam(app_id, &quot;grade_type_b&quot;, $eId))				
74	        $gradeTypeC = safeJsonDecode(AppParam(app_id, &quot;grade_type_c&quot;, $eId))				
75	    }				
76	    action {				
77	        var m map 				
78	        m = getScore($Mathematics,$Physics,$Literature)				
79	        var in map				
80	        in[&quot;student&quot;] = $Student				
81	        in[&quot;class&quot;] = $Class				
82	        in[&quot;grade&quot;] = $Grade				
83	        in[&quot;mathematics&quot;] = $Mathematics				
84	        in[&quot;physics&quot;] = $Physics 				
85	        in[&quot;literature&quot;] = $Literature 				
86	        in[&quot;overall_score&quot;] = m[&quot;overallScore&quot;]				
87	        in[&quot;score&quot;] = m[&quot;score&quot;]				
88	        in[&quot;created_at&quot;] = $time				
89	        DBInsert(&quot;@&quot;+ Str($eId)+&quot;grade_info&quot;, in)				
90	    }				
91	}				
</code></pre></div><p>The following is explained by line:</p> <ul><li>Line 2, <a href="/it/topics/script.html#data-section">data section</a> defines the input parameters <code>Student</code> student name, <code>Grade</code> grade, <code>Class</code> class, <code>Mathematics</code> math score, <code>Physics</code>Physics score,<code>Literature</code>Literature score</li> <li>Line 10, the getScore function, produces a composite score and final rating based on each subject's score</li> <li>Line 30, safeJsonDecode function, json decode the string and convert to map</li> <li>Line 38, <a href="/it/topics/script.html#conditions-section">conditional section</a></li> <li>Line 39, <a href="/it/topics/script.html#action-section">operation section</a></li></ul> <p>As you can see, when the contract is called, it first goes through the conditional part, verifying that the contract input parameters are valid, such as whether the student name <code>if Size($Student) == 0 {</code> is empty (line 39), and if it is, then an error message is returned
<code>&quot;Student Can not be empty&quot;</code> (line 30), after all input parameters have been verified, on line 61, use <a href="/it/topics/script.html#dbfind">DBFind</a> to retrieve the information from the database for the application with the ecid <code>18</code> and the application name <code>GradesRecorder</code> and the application information with <code>deleted=0</code> is not deleted.
Lines 69-74, use <a href="/it/topics/script.html#appparam">AppParam</a> to retrieve the application parameters, e.g. <code>$gradeBestType = AppParam(app_id, &quot;grade_best_type&quot;, $ eId)</code> (line 69).
If the application parameter is stored in json format, such as <code>grade_type_a</code>, you can refer to <code>$gradeTypeABest = safeJsonDecode(AppParam(app_id, &quot;grade_type_a+&quot;, $eId))</code>, which will get the application parameter by safeJsonDecode function to map format</p> <p>Then execute to the operation part, call the getScore function to get the resulting composite score and final rating (line 10), use map to store, line 79, define a map to store student achievement information, and
<a href="/it/topics/script.html#dbinsert">DBInsert</a> Insert data to data table<code>@18grade_info</code>.</p> <p>There are two ways to create a contract, the first of which is:
First we write a contract parameter file in json format:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;ApplicationId&quot;</span><span class="token operator">:</span> <span class="token number">47</span><span class="token punctuation">,</span>
  <span class="token property">&quot;Value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;contract NewRecord {\n    data {\n        Student string\n        Grade int\n        Class int\n        Mathematics int\n        Physics int\n        Literature int\n    }\n    func getScore(a b c int) map{\n        var m map\n        var overallScore int\n        overallScore = (a+b+c) / 3\n        m[\&quot;overallScore\&quot;] = overallScore\n        if overallScore &gt;= $gradeTypeABest[\&quot;min\&quot;] &amp;&amp; overallScore &lt; $gradeTypeABest[\&quot;max\&quot;] {\n            m[\&quot;score\&quot;] = \&quot;A+\&quot;\n        }elif overallScore &gt;= $gradeTypeA[\&quot;min\&quot;] &amp;&amp; overallScore &lt; $gradeTypeA[\&quot;max\&quot;] {\n            m[\&quot;score\&quot;] = \&quot;A\&quot;\n        }elif overallScore &gt;= $gradeTypeBBest[\&quot;min\&quot;] &amp;&amp; overallScore &lt; $gradeTypeBBest[\&quot;max\&quot;] {\n            m[\&quot;score\&quot;] = \&quot;B+\&quot;\n        }elif overallScore &gt;= $gradeTypeB[\&quot;min\&quot;] &amp;&amp; overallScore &lt; $gradeTypeB[\&quot;max\&quot;] {\n            m[\&quot;score\&quot;] = \&quot;B\&quot;\n        }elif overallScore &gt;= $gradeTypeC[\&quot;min\&quot;] &amp;&amp; overallScore &lt; $gradeTypeC[\&quot;max\&quot;]{\n            m[\&quot;score\&quot;] = \&quot;C\&quot;\n        }else{\n            m[\&quot;score\&quot;] = \&quot;Notset\&quot;\n        }\n        return m\n    }\n    func safeJsonDecode(m string) map {\n        var res map\n        if Size(m) &gt; 0 {\n            res = JSONDecode(m)\n        }\n        return res\n    }\n\n    conditions {\n        if Size($Student) == 0 {\n            warning \&quot;Student Can not be empty\&quot;\n        }\n        if $Class &lt;= 0{\n            warning \&quot;Class cannot be less than or equal to zero\&quot;\n        }\n         if $Grade &lt;= 0{\n            warning \&quot;Grade cannot be less than or equal to zero\&quot;\n        }\n        if $Mathematics &lt; 0 {\n            warning \&quot;Mathematics cannot be less than zero\&quot;\n        }\n        if $Physics &lt; 0 {\n            warning \&quot;Physics cannot be less than zero\&quot;\n        }\n        if $Literature &lt; 0 {\n            warning \&quot;Literature cannot be less than zero\&quot;\n        }\n        if $Mathematics &gt; 100 || $Physics &gt; 100 ||  $Literature &gt; 100{\n            warning \&quot;Score cannot exceed 100\&quot;\n        }\n        var app map\n        app = DBFind(\&quot;@1applications\&quot;).Columns(\&quot;id,ecosystem\&quot;).Where({\&quot;ecosystem\&quot;: 18,\&quot;name\&quot;:\&quot;GradesRecorder\&quot;,\&quot;deleted\&quot;:0}).Row()\n        if !app {\n            warning LangRes(\&quot;@1app_not_found\&quot;)\n        }\n\n        var app_id int\n        app_id = Int(app[\&quot;id\&quot;])\n        $eId = Int(app[\&quot;ecosystem\&quot;])\n        $gradeBestType = AppParam(app_id, \&quot;grade_best_type\&quot;, $eId)\n        $gradeTypeABest = safeJsonDecode(AppParam(app_id, \&quot;grade_type_a+\&quot;, $eId))\n        $gradeTypeA = safeJsonDecode(AppParam(app_id, \&quot;grade_type_a\&quot;, $eId))\n        $gradeTypeBBest = safeJsonDecode(AppParam(app_id, \&quot;grade_type_b+\&quot;, $eId))\n        $gradeTypeB = safeJsonDecode(AppParam(app_id, \&quot;grade_type_b\&quot;, $eId))\n        $gradeTypeC = safeJsonDecode(AppParam(app_id, \&quot;grade_type_c\&quot;, $eId))\n    }\n    action {\n        var m map \n        m = getScore($Mathematics,$Physics,$Literature)\n        var in map\n        in[\&quot;student\&quot;] = $Student\n        in[\&quot;class\&quot;] = $Class\n        in[\&quot;grade\&quot;] = $Grade\n        in[\&quot;mathematics\&quot;] = $Mathematics\n        in[\&quot;physics\&quot;] = $Physics \n        in[\&quot;literature\&quot;] = $Literature \n        in[\&quot;overall_score\&quot;] = m[\&quot;overallScore\&quot;]\n        in[\&quot;score\&quot;] = m[\&quot;score\&quot;]\n        in[\&quot;created_at\&quot;] = $time\n        DBInsert(\&quot;@\&quot;+ Str($eId)+\&quot;grade_info\&quot;, in)\n    }\n}&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;Conditions&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ContractConditions(\&quot;@1DeveloperCondition\&quot;)&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Where <code>ApplicationId</code> is the application id, which needs to be escaped for special characters, and <code>Conditions</code> is the contract modification permission.
<code>Value</code> contract source code, which we save as <code>NewRecordParams.json</code>:</p> <p>After writing the contract, we need to deploy the contract by calling CreateContract<code>@1NewContract</code></p> <div class="language-text extra-class"><pre class="language-text"><code>1    &gt;&gt;callContract @1NewContract -f=./data/NewRecordParams.json
2    {
3        &quot;block_id&quot;: 1262,
4        &quot;hash&quot;: &quot;d896f12f685835f6cf71705e1ba...4d8bcc0a1406f7b0b6482b2d230fc&quot;,
5        &quot;penalty&quot;: 0,
6        &quot;err&quot;: &quot;348&quot;
7    }
</code></pre></div><p>The following is explained by line:</p> <ul><li>Line 1: call contract <code>@1NewContract</code> to create the contract, -f uses the file to import the just created file <code>NewRecord.json</code> as the contract parameter</li> <li>Line 3, the block id generated by the transaction</li> <li>Line 4, the block hash generated by the transaction</li> <li>Line 5, if the transaction execution fails (0: no penalty 1: penalty)</li> <li>Line 6, if the transaction execution fails, an error text message is returned, and if the block id is returned, the err field the id of the contract is <code>348</code></li></ul> <p>Second method:
The saved contract source file is passed directly into the contract parameters in the parameter format <code>paramsName</code> + <code>-</code> + &quot;file&quot;,<code>paramsName-file</code> as follows:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>callContract @1NewContract <span class="token punctuation">{</span><span class="token string">&quot;ApplicationId&quot;</span><span class="token builtin class-name">:</span> <span class="token number">47</span>, <span class="token string">&quot;Value-file&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;NewRecord.sim&quot;</span>, <span class="token string">&quot;Conditions&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;ContractConditions(<span class="token entity" title="\&quot;">\&quot;</span>@1DeveloperCondition\ &quot;</span><span class="token punctuation">)</span>&quot;<span class="token punctuation">}</span>
</code></pre></div><p>Let's try to call the contract we just created</p> <div class="language-text extra-class"><pre class="language-text"><code>1  &gt;callContract @18NewRecord {&quot;Student&quot;: &quot;tom&quot;, &quot;Grade&quot;: 1, &quot;Class&quot;: 1, &quot;Mathematics&quot;: 18, &quot;Physics&quot;: 57, &quot;Literature&quot;: 93}
2  
3  {
4     &quot;block_id&quot;: 1263,
5     &quot;hash&quot;: &quot;1b964a47fe6c5fd43ea55a752d01edb5ad576432fd6f63315344d87999a0473d&quot;,
6     &quot;penalty&quot;: 0,
7     &quot;err&quot;: &quot;&quot;
8  }
</code></pre></div><p>The call is complete, and then we check to see if the data table has saved a record</p> <div class="language-text extra-class"><pre class="language-text"><code>&gt;getList @18grade_info
{
    &quot;count&quot;: 1,
    &quot;list&quot;: [
        {
            &quot;class&quot;: &quot;1&quot;,
            &quot;created_at&quot;: &quot;1683698914109&quot;,
            &quot;grade&quot;: &quot;1&quot;,
            &quot;id&quot;: &quot;9&quot;,
            &quot;literature&quot;: &quot;93&quot;,
            &quot;mathematics&quot;: &quot;18&quot;,
            &quot;overall_score&quot;: &quot;56&quot;,
            &quot;physics&quot;: &quot;57&quot;,
            &quot;score&quot;: &quot;C&quot;,
            &quot;student&quot;: &quot;tom&quot;
        }
    ]
}
</code></pre></div><p>You can see that there is already a record in the data table, <code>student</code> tom with an overall rating of 56 and a grade of C</p> <p>The above example is only for study and research purposes, you need to change the relevant parameters according to the actual situation, such as the data table write permission, contract modification permission, etc.</p> <p>For example, if we want to specify that only one person can call this new record contract and no one else can call it, we can set an ecological parameter <code>new_record_account</code></p> <h3 id="step-6-create-ecological-parameters"><a href="#step-6-create-ecological-parameters" class="header-anchor">#</a> Step 6 Create Ecological Parameters</h3> <p>Calling the contract <code>@1NewParameter</code> will create the eco-parameter
<code>new_record_account</code> in the <code>@1parameters</code> table, if you need to modify the eco-parameter you can call <code>@1EditParameter</code>.</p> <div class="language-text extra-class"><pre class="language-text"><code>&gt;callContract @1NewParameter {&quot;Name&quot;: &quot;new_record_account&quot;, &quot;Value&quot;: &quot;6667782293976713160&quot;, &quot;Conditions&quot;: &quot;ContractConditions(\&quot;MainCondition\&quot;)&quot;}

{
    &quot;block_id&quot;: 1416,
    &quot;hash&quot;: &quot;12fc87ce6a70e2fc993ab9ffe623311f1c50edd1157595ce6183c38c93960cae&quot;,
    &quot;penalty&quot;: 0,
    &quot;err&quot;: &quot;273&quot;
}
</code></pre></div><p>We create an ecological parameter <code>new_record_account</code>, set the value to keyId <code>6667782293976713160</code>, modify the permission to<code>ContractConditions(&quot;MainCondition&quot;)</code> which means the current ecological creator can modify
When the transaction is executed successfully, the ecological parameter id of the &quot;err&quot; field is <code>273</code>.</p> <h3 id="step-7-add-localization"><a href="#step-7-add-localization" class="header-anchor">#</a> Step 7 add localization</h3> <p>You can call the <code>@1NewLangJoint</code> contract to create the localization parameter<code>account_not_access</code>, which will create the parameter in the<code>@1languages</code> table, and you can modify the localization parameter via<code>@1EditLangJoint</code>.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>callContract @1NewLangJoint <span class="token punctuation">{</span><span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;account_not_access&quot;</span>, <span class="token string">&quot;LocaleArr&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">&quot;en&quot;</span>, <span class="token string">&quot;ja&quot;</span><span class="token punctuation">]</span>, <span class="token string">&quot;ValueArr&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Sorry, you do not have access to this action&quot;</span>, <span class="token string">&quot;申し訳ありませんが、このアクションにアクセスする権限がありません&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="step-8-modify-the-contract"><a href="#step-8-modify-the-contract" class="header-anchor">#</a> Step 8 Modify the contract</h3> <p>Next, we need to modify the <code>conditions</code> section of the contract source code by adding the following code to <code>conditions</code></p> <div class="language-text extra-class"><pre class="language-text"><code>conditions {
  if EcosysParam(&quot;new_record_account&quot;) != $key_id {
      warning LangRes(&quot;account_not_access&quot;)
  }
}
</code></pre></div><p>Call to modify the contract @1EditContract, where <code>Id</code> is the contract id, <code>Value</code>: is the contract source code</p> <div class="language-text extra-class"><pre class="language-text"><code>&gt;callContract @1EditContract {&quot;Id&quot;: 348, &quot;Value&quot;: &quot;contract NewRecord {\n    data {\n        Student string\n        Grade int\n        Class int\n        Mathematics int\n        Physics int\n        Literature int\n    }\n    func getScore(a b c int) map{\n        var m map\n        var overallScore int\n        overallScore = (a+b+c) / 3\n        m[\&quot;overallScore\&quot;] = overallScore\n        if overallScore &gt;= $gradeTypeABest[\&quot;min\&quot;] &amp;amp;&amp;amp; overallScore &amp;lt; $gradeTypeABest[\&quot;max\&quot;] {\n            m[\&quot;score\&quot;] = \&quot;A+\&quot;\n        }elif overallScore &gt;= $gradeTypeA[\&quot;min\&quot;] &amp;amp;&amp;amp; overallScore &amp;lt; $gradeTypeA[\&quot;max\&quot;] {\n            m[\&quot;score\&quot;] = \&quot;A\&quot;\n        }elif overallScore &gt;= $gradeTypeBBest[\&quot;min\&quot;] &amp;amp;&amp;amp; overallScore &amp;lt; $gradeTypeBBest[\&quot;max\&quot;] {\n            m[\&quot;score\&quot;] = \&quot;B+\&quot;\n        }elif overallScore &gt;= $gradeTypeB[\&quot;min\&quot;] &amp;amp;&amp;amp; overallScore &amp;lt; $gradeTypeB[\&quot;max\&quot;] {\n            m[\&quot;score\&quot;] = \&quot;B\&quot;\n        }elif overallScore &gt;= $gradeTypeC[\&quot;min\&quot;] &amp;amp;&amp;amp; overallScore &amp;lt; $gradeTypeC[\&quot;max\&quot;]{\n            m[\&quot;score\&quot;] = \&quot;C\&quot;\n        }else{\n            m[\&quot;score\&quot;] = \&quot;Notset\&quot;\n        }\n        return m\n    }\n    func safeJsonDecode(m string) map {\n        var res map\n        if Size(m) &gt; 0 {\n            res = JSONDecode(m)\n        }\n        return res\n    }\n\n    conditions {\n        if EcosysParam(\&quot;new_record_account\&quot;) != $key_id {\n            warning LangRes(\&quot;account_not_access\&quot;)\n        }\n        if Size($Student) == 0 {\n            warning \&quot;Student Can not be empty\&quot;\n        }\n        if $Class &amp;lt;= 0{\n            warning \&quot;Class cannot be less than or equal to zero\&quot;\n        }\n         if $Grade &amp;lt;= 0{\n            warning \&quot;Grade cannot be less than or equal to zero\&quot;\n        }\n        if $Mathematics &amp;lt; 0 {\n            warning \&quot;Mathematics cannot be less than zero\&quot;\n        }\n        if $Physics &amp;lt; 0 {\n            warning \&quot;Physics cannot be less than zero\&quot;\n        }\n        if $Literature &amp;lt; 0 {\n            warning \&quot;Literature cannot be less than zero\&quot;\n        }\n        if $Mathematics &gt; 100 || $Physics &gt; 100 ||  $Literature &gt; 100{\n            warning \&quot;Score cannot exceed 100\&quot;\n        }\n        var app map\n        app = DBFind(\&quot;@1applications\&quot;).Columns(\&quot;id,ecosystem\&quot;).Where({\&quot;ecosystem\&quot;: 18,\&quot;name\&quot;:\&quot;GradesRecorder\&quot;,\&quot;deleted\&quot;:0}).Row()\n        if !app {\n            warning LangRes(\&quot;@1app_not_found\&quot;)\n        }\n\n        var app_id int\n        app_id = Int(app[\&quot;id\&quot;])\n        $eId = Int(app[\&quot;ecosystem\&quot;])\n        $gradeBestType = AppParam(app_id, \&quot;grade_best_type\&quot;, $eId)\n        $gradeTypeABest = safeJsonDecode(AppParam(app_id, \&quot;grade_type_a+\&quot;, $eId))\n        $gradeTypeA = safeJsonDecode(AppParam(app_id, \&quot;grade_type_a\&quot;, $eId))\n        $gradeTypeBBest = safeJsonDecode(AppParam(app_id, \&quot;grade_type_b+\&quot;, $eId))\n        $gradeTypeB = safeJsonDecode(AppParam(app_id, \&quot;grade_type_b\&quot;, $eId))\n        $gradeTypeC = safeJsonDecode(AppParam(app_id, \&quot;grade_type_c\&quot;, $eId))\n    }\n    action {\n        var m map \n        m = getScore($Mathematics,$Physics,$Literature)\n        var in map\n        in[\&quot;student\&quot;] = $Student\n        in[\&quot;class\&quot;] = $Class\n        in[\&quot;grade\&quot;] = $Grade\n        in[\&quot;mathematics\&quot;] = $Mathematics\n        in[\&quot;physics\&quot;] = $Physics \n        in[\&quot;literature\&quot;] = $Literature \n        in[\&quot;overall_score\&quot;] = m[\&quot;overallScore\&quot;]\n        in[\&quot;score\&quot;] = m[\&quot;score\&quot;]\n        in[\&quot;created_at\&quot;] = $time\n        DBInsert(\&quot;@\&quot;+ Str($eId)+\&quot;grade_info\&quot;, in)\n    }\n}&quot;}
</code></pre></div><h4 id="step-9-modify-data-table-permissions"><a href="#step-9-modify-data-table-permissions" class="header-anchor">#</a> Step 9 Modify data table permissions</h4> <p>Here we need to change the insert permission of the data table, the original permission <code>ContractConditions(&quot;MainCondition&quot;)</code> for the ecreator, and the contract setting <code>new_record_account</code> is not the ecreator.
So just change <code>ContractConditions(&quot;MainCondition&quot;)</code> to specify that the contract can operate on <code>ContractAccess(&quot;@18NewRecord&quot;)</code>.
Call the contract <code>@1EditTable</code> to modify the data table permissions</p> <div class="language-text extra-class"><pre class="language-text"><code>&gt;callContract @1EditTable {&quot;Name&quot;: &quot;@18grade_info&quot;, &quot;InsertPerm&quot;: &quot;ContractAccess(\&quot;@18NewRecord\&quot;)&quot;, &quot;UpdatePerm&quot;: &quot;ContractConditions(\&quot;MainCondition\&quot;)&quot;, &quot;ReadPerm&quot;: &quot;true&quot;, &quot;NewColumnPerm&quot;: &quot;ContractConditions(\&quot;MainCondition\&quot;)&quot;}
</code></pre></div><p>Then call the contract you just modified and create a new record</p> <div class="language-text extra-class"><pre class="language-text"><code>1  &gt;callContract @18NewRecord {&quot;Student&quot;: &quot;tom&quot;, &quot;Grade&quot;: 1, &quot;Class&quot;: 1, &quot;Mathematics&quot;: 18, &quot;Physics&quot;: 57, &quot;Literature&quot;: 93}
2  
3  {
4      &quot;block_id&quot;: 1435,
5      &quot;hash&quot;: &quot;7d4b06d3738133f9c2ec775935478cd2d6c20fd04eca275769afd0f8e6a4f687&quot;,
6      &quot;penalty&quot;: 1,
7      &quot;err&quot;: &quot;{\&quot;type\&quot;:\&quot;warning\&quot;,\&quot;error\&quot;:\&quot;Sorry, you do not have access to this action\&quot;}&quot;
8  }
</code></pre></div><p>You can see that the localization parameter we just set,<code>account_not_access</code>, is working</p> <p>We found that the permission error is reported, the current user does not have permission to operate, we switch to the account with keyId <code>6667782293976713160</code>, we can get the current user's information through the command line tool<code>account info</code>
Set up the command line tool config.yml and switch to the account with keyId <code>6667782293976713160</code>
After the setup is complete, call the contract again</p> <div class="language-text extra-class"><pre class="language-text"><code>&gt;callContract @18NewRecord {&quot;Student&quot;: &quot;tini&quot;, &quot;Grade&quot;: 1, &quot;Class&quot;: 3, &quot;Mathematics&quot;: 69, &quot;Physics&quot;: 89, &quot;Literature&quot;: 98}

{
    &quot;block_id&quot;: 1436,
    &quot;hash&quot;: &quot;93327dafb7bae9f9f66718eb87020a7bca4c00060f4bd0a243b49eea304c52e6&quot;,
    &quot;penalty&quot;: 0,
    &quot;err&quot;: &quot;&quot;
}
</code></pre></div><p>The call completes, querying the data table via <code>getList @18grade_info</code>, and the result is as expected</p> <p>We hope this article has helped you learn more about how the IBAX network works and how to write clear and secure <code>Needle</code> code.</p> <h2 id="deploy-application-using-command-line-tools"><a href="#deploy-application-using-command-line-tools" class="header-anchor">#</a> Deploy application using command line tools</h2> <p>In this tutorial, you will learn how to:</p> <ul><li><ol><li><a href="#export-application">Export Application</a></li></ol></li> <li><ol start="2"><li><a href="#import-application">Import Application</a></li></ol></li></ul> <p>Before starting this tutorial, you need to have an application of your own and know the concept of ecology and application, you can refer to <a href="#getting-started-guide">Getting Started Guide</a>
We will import the application on the IBAX blockchain via the <a href="https://github.com/IBAX-io/ibax-cli" target="_blank" rel="noopener noreferrer">command line tool<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Exporting an application</p> <h3 id="export-application"><a href="#export-application" class="header-anchor">#</a> Export Application</h3> <p>Call <code>account info</code> to query the current account information, here the login ecid is <code>9</code>, call <code>getList</code> command to query the current ecid which applications</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ ibax-cli console
   
Welcome to the IBAX console<span class="token operator">!</span>
To exit, press ctrl-d or <span class="token builtin class-name">type</span> <span class="token builtin class-name">exit</span>
<span class="token operator">&gt;</span>account info
<span class="token punctuation">{</span>
    <span class="token string">&quot;public_key&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;04d11ea197fe23152562c6f54c4...889c074dfd9080099982d8b2d4d100315e1cebc7&quot;</span>,     
    <span class="token string">&quot;ecosystem_id&quot;</span><span class="token builtin class-name">:</span> <span class="token number">9</span>,
    <span class="token string">&quot;key_id&quot;</span><span class="token builtin class-name">:</span> <span class="token number">6660819</span><span class="token punctuation">..</span>.78795186,
    <span class="token string">&quot;account&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;0666-0819-...-7879-5186&quot;</span>
<span class="token punctuation">}</span>

<span class="token operator">&gt;</span>getList @1applications -w<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;ecosystem&quot;</span><span class="token builtin class-name">:</span> <span class="token number">9</span><span class="token punctuation">}</span>

<span class="token punctuation">{</span>
    <span class="token string">&quot;count&quot;</span><span class="token builtin class-name">:</span> <span class="token number">6</span>,
    <span class="token string">&quot;list&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token string">&quot;conditions&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;true&quot;</span>,
            <span class="token string">&quot;deleted&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;0&quot;</span>,
            <span class="token string">&quot;ecosystem&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;9&quot;</span>,
            <span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;36&quot;</span>,
            <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;testapp&quot;</span>,
            <span class="token string">&quot;uuid&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;00000000-0000-0000-0000-000000000000&quot;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">..</span>.
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We can see that the current ecology has 6 applications, we use the<code>export</code> command to export the application with <code>id</code> of <code>36</code></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>export <span class="token number">36</span> -f<span class="token operator">=</span>./data.json

<span class="token punctuation">{</span>
    <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;./data.json&quot;</span>,
    <span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;application/json&quot;</span>,
    <span class="token string">&quot;value&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The -f parameter here saves the exported application to the <code>data.json</code> file in the current directory.
If there is no -f parameter, the application data will be output in the command terminal</p> <p>The <code>export</code> command encapsulates the steps to export an application. You can use the above command to export an application, or use the following steps, as follows:
Calling the contract <code>@1ExportNewApp</code> to export a new application will generate a record in the <code>1_buffer_data</code> table for the exported application</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>callContract @1ExportNewApp <span class="token punctuation">{</span><span class="token string">&quot;ApplicationId&quot;</span><span class="token builtin class-name">:</span> <span class="token number">36</span><span class="token punctuation">}</span>
</code></pre></div><p>Call the contract <code>@1Export</code> to export the application, find the selected application in the <code>1_buffer_data</code> table, and export all application resources to the generated json string.
The generated json string will be written to the <code>1_binaries</code> table of the current ecosystem</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>callContract @1Export
</code></pre></div><p>Query the data in the <code>1_binaries</code> table with the <code>getList</code> command</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>getList @1binaries -w<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;export&quot;</span>, <span class="token string">&quot;account&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;0666-0819-...-7879-5186&quot;</span>, <span class="token string">&quot;ecosystem&quot;</span><span class="token builtin class-name">:</span> <span class="token number">9</span>, <span class="token string">&quot;app_id&quot;</span><span class="token builtin class-name">:</span> <span class="token number">36</span><span class="token punctuation">}</span> -l<span class="token operator">=</span><span class="token number">1</span> -c<span class="token operator">=</span><span class="token string">&quot;id,hash&quot;</span>

<span class="token punctuation">{</span>
    <span class="token string">&quot;count&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1</span>,
    <span class="token string">&quot;list&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token string">&quot;hash&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;8542cb57b77e0ae2c...92c3e05dbbe35ab646789be5b8ba8&quot;</span>,
            <span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;14&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Get the binary id and hash
Call the <code>binaryVerify</code> command to export the binary file</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>binaryVerify <span class="token number">14</span> 8542cb57b77e0ae2c<span class="token punctuation">..</span>.92c3e05dbbe35ab646789be5b8ba8 -f<span class="token operator">=</span>./data.json

<span class="token punctuation">{</span>
    <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;./data.json&quot;</span>,     
    <span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;application/json&quot;</span>,
    <span class="token string">&quot;value&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="import-application"><a href="#import-application" class="header-anchor">#</a> Import Application</h3> <p>Use the <code>import</code> command to import an application, with the <code>-f</code> parameter to specify the application file to be imported</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ ibax-cli console

Welcome to the IBAX console<span class="token operator">!</span>
To exit, press ctrl-d or <span class="token builtin class-name">type</span> <span class="token builtin class-name">exit</span>

<span class="token operator">&gt;</span>import -f <span class="token builtin class-name">.</span> /data.json
</code></pre></div><p>The <code>import</code> command encapsulates the steps to import an application, you can use the above command to import an application</p> <p>Or use the following steps, which, for ease of study and research, are as follows:</p> <ul><li>Step 1
Calling the contract <code>@1ImportUpload</code> to import a new application will generate a record in the <code>1_buffer_data</code> table for the exported application
<code>@1ImportUpload</code> The contract parameter <code>Data</code> is <code>file</code> <a href="/it/topics/vm.html#types">type</a>.
Contains the keywords <code>Name</code> file name (string), <code>MimeType</code> file type (string), <code>Body</code> ([]byte) file content
You need to base64 encode the application file data and pass it into <code>Body</code>, you can use the <code>base64Encode</code> command to base64 encode it</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>base64Encode -f<span class="token operator">=</span>./data.json

Encode:ewoJIm5hbWUiOiAid<span class="token punctuation">..</span>.CQkJIlR5cGUiOiAiY29udHJhY3RzIiwKCQkJIk5hbWUiOiAiSGVsbG9Xb3JsZCIsCgkJCSJWYWx1ZSI6<span class="token punctuation">..</span>.

<span class="token operator">&gt;</span>callContract @1ImportUpload <span class="token punctuation">{</span><span class="token string">&quot;Data&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;filename&quot;</span>, <span class="token string">&quot;MimeType&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;mimeType&quot;</span>, <span class="token string">&quot;Body&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;ewoJIm5hbWUiOiAid...CQkJIlR5cGUiOiAiY29udHJhY3RzIiwKCQkJIk5hbWUiOiAiSGVsbG9Xb3JsZCIsCgkJCSJWYWx1ZSI6...&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><ul><li>Step 2
After the call is completed, use the <code>getList</code> command to query the data in the <code>1_buffer_data</code> table</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>getList @1buffer_data -w<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;key&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;import&quot;</span>, <span class="token string">&quot;account&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;0666-0819-xxxx-7879-5186&quot;</span>, <span class="token string">&quot;ecosystem&quot;</span><span class="token builtin class-name">:</span> <span class="token number">19</span><span class="token punctuation">}</span> -l<span class="token operator">=</span><span class="token number">1</span> -c<span class="token operator">=</span>value-<span class="token operator">&gt;</span><span class="token string">'data'</span>

<span class="token punctuation">{</span>
    <span class="token string">&quot;count&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1</span>,
    <span class="token string">&quot;list&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;22&quot;</span>,
            <span class="token string">&quot;value.data&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;[{&quot;</span>Data<span class="token string">&quot;: &quot;</span><span class="token punctuation">[</span>a,b<span class="token punctuation">]</span><span class="token string">&quot;}, {&quot;</span>Data<span class="token string">&quot;: &quot;</span><span class="token punctuation">[</span>c,d<span class="token punctuation">]</span><span class="token string">&quot;}]&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>Step 3
Assemble the data in value.data-&gt;Data into a one-dimensional array, [a,b,c,d].
Then create a contract parameters file <code>importParams.json</code>, with the following content:</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span><span class="token property">&quot;Data&quot;</span><span class="token operator">:</span><span class="token string">&quot;[a,b,c,d]&quot;</span><span class="token punctuation">}</span>
</code></pre></div><ul><li>Step 4
Call the contract <code>@1Import</code> to import the application data</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>callContract @1Import -f<span class="token operator">=</span>./importParams.json
</code></pre></div><h2 id="ecological-configuration-using-command-line-tool"><a href="#ecological-configuration-using-command-line-tool" class="header-anchor">#</a> Ecological configuration using command line tool</h2> <p>In this tutorial, you will learn how to:</p> <ul><li><ol><li><a href="#apply-to-join-the-ecology">Apply to join the ecology</a></li></ol></li> <li><ol start="2"><li><a href="#add-ecological-members">Add ecological members</a></li></ol></li> <li><ol start="3"><li><a href="#role-management">Role management</a></li></ol></li> <li><ol start="4"><li><a href="#issuance-of-token">Issuance of Token</a></li></ol></li> <li><ol start="5"><li><a href="#eco-deduction">Eco Deduction</a></li></ol></li> <li><ol start="6"><li><a href="#dao-governance-ecology">DAO Governance Ecology</a></li></ol></li></ul> <p>Before starting this tutorial, you need to have an application of your own and know the concept of ecology and application, you can refer to <a href="#getting-started-guide">Getting Started Guide</a>
We will do the ecological configuration on the IBAX blockchain via <a href="https://github.com/IBAX-io/ibax-cli" target="_blank" rel="noopener noreferrer">command line tool<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="apply-to-join-the-ecology"><a href="#apply-to-join-the-ecology" class="header-anchor">#</a> Apply to join the ecology</h3> <p>We can call the <code>@1MembershipRequest</code> contract to request to join the ecology
The following example:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>callContract @1MembershipRequest <span class="token punctuation">{</span><span class="token string">&quot;EcosystemId&quot;</span><span class="token builtin class-name">:</span> <span class="token number">19</span><span class="token punctuation">}</span>
</code></pre></div><p>request to join the ecology with ecological id <code>19</code>, the <code>@1MembershipRequest</code> contract makes a restriction on calling the ecology, only in the base ecology can be called
When the application is successful, the target ecology manager will receive an application, and only when the application is approved by the ecology manager will it be considered as joining the target ecology.
Of course, if the target ecology is public, you can join the target ecology directly</p> <h3 id="add-ecological-members"><a href="#add-ecological-members" class="header-anchor">#</a> Add ecological members</h3> <p>When the ecology is just created, the ecology member is only the ecology creator, when you need to invite other members to join, you need to know the public key of the invited person, and then call the contract <code>@1MembershipAdd</code> to add members</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>callContract @1MembershipAdd <span class="token punctuation">{</span><span class="token string">&quot;Keys&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;04f2c1780ca0aa0f343d0e541c77811...3b0d5bf3a9903253aad6e78c966b5f91ffb32703884020&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p>If the ecology is public and allows anyone to join, you can set the ecology parameter <code>free_membership</code> = 1, which is not public by default.
Once set up, you don't need to be approved to join your ecosystem</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>callContract @1NewParameter <span class="token punctuation">{</span><span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;free_membership&quot;</span>, <span class="token string">&quot;Value&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;1&quot;</span>, <span class="token string">&quot;Conditions&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;ContractConditions(<span class="token entity" title="\&quot;">\&quot;</span>MainCondition<span class="token entity" title="\&quot;">\&quot;</span>)&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p>If you don't set the parameter <code>free_membership</code>, when other members apply to join your ecology, you will receive an application notification.</p> <p>Call <code>@1MembershipDecide</code> contract approval application, contract parameters <code>NotificId</code> is the notification id, 'Accept' is the resolution mark, resolution mark <code>1</code> is passed</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>callContract @1MembershipDecide <span class="token punctuation">{</span><span class="token string">&quot;NotificId&quot;</span><span class="token builtin class-name">:</span> <span class="token number">6</span>, <span class="token string">&quot;Accept&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="freezing-of-accounts"><a href="#freezing-of-accounts" class="header-anchor">#</a> Freezing of accounts</h3> <p>Call <code>@1DeleteMember</code> contract to freeze the account, note that this operation cannot be restored</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>callContract @1DeleteMember <span class="token punctuation">{</span><span class="token string">&quot;MemberAccount&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;1539-2715-xxxx-1679-5385&quot;</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="role-management"><a href="#role-management" class="header-anchor">#</a> Role management</h3> <ul><li><a href="#new-role-creation">New role creation</a></li> <li><a href="#adding-role-members">Add Role Member</a></li> <li><a href="#delete-role-members">delete role member</a></li> <li><a href="#modify-role-manager">Modify role manager</a></li> <li><a href="#delete-role">delete role</a></li></ul> <h4 id="new-role-creation"><a href="#new-role-creation" class="header-anchor">#</a> New role creation</h4> <p>Call <code>@1RolesCreate</code> contract to create a new role, role name <code>student</code>, type <code>2</code> (1 - Assignable 2 - Elected by vote type 3 - System)</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>callContract @1RolesCreate <span class="token punctuation">{</span><span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;student&quot;</span>, <span class="token string">&quot;Type&quot;</span><span class="token builtin class-name">:</span> <span class="token number">2</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span>
    <span class="token string">&quot;block_id&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1685</span>,
    <span class="token string">&quot;hash&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;5321f2231a...d0d80158b62766395f14d0ff7&quot;</span>,
    <span class="token string">&quot;penalty&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
    <span class="token string">&quot;err&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;21&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The return result contains the role id <code>21</code></p> <h4 id="adding-role-members"><a href="#adding-role-members" class="header-anchor">#</a> Adding Role Members</h4> <p>There are two methods, the first method, the ecological member to initiate the application, call the contract <code>@1RolesRequest</code> request to add as a member of the role, where <code>Rid</code> is the role id</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>callContract @1RolesRequest <span class="token punctuation">{</span><span class="token string">&quot;Rid&quot;</span><span class="token builtin class-name">:</span> <span class="token number">21</span><span class="token punctuation">}</span>
</code></pre></div><p>In the second method, the role manager assigns role members, and the role manager calls the contract <code>@1RolesAssign</code> to add members to the role</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>callContract @1RolesAssign <span class="token punctuation">{</span><span class="token string">&quot;MemberAccount&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;0666-7782-xxxx-7671- 3160&quot;</span>, <span class="token string">&quot;Rid&quot;</span><span class="token builtin class-name">:</span> <span class="token number">21</span><span class="token punctuation">}</span>
</code></pre></div><h4 id="delete-role-members"><a href="#delete-role-members" class="header-anchor">#</a> Delete role members</h4> <p>First we see what members a role has, which we can query via getList, as follows:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>getList @1roles_participants -w<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;ecosystem&quot;</span><span class="token builtin class-name">:</span> <span class="token number">18</span>, <span class="token string">&quot;role-&gt;id&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;21&quot;</span>, <span class="token string">&quot;deleted&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span><span class="token punctuation">}</span>

<span class="token punctuation">{</span>
    <span class="token string">&quot;count&quot;</span><span class="token builtin class-name">:</span> <span class="token number">3</span>,
    <span class="token string">&quot;list&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token string">&quot;appointed&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;{<span class="token entity" title="\&quot;">\&quot;</span>account<span class="token entity" title="\&quot;">\&quot;</span>: <span class="token entity" title="\&quot;">\&quot;</span>1273-2644-xxxx-5846-6598<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>image_id<span class="token entity" title="\&quot;">\&quot;</span>: <span class="token entity" title="\&quot;">\&quot;</span>0<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>member_name<span class="token entity" title="\&quot;">\&quot;</span>: <span class="token entity" title="\&quot;">\&quot;</span>founder<span class="token entity" title="\&quot;">\&quot;</span>}&quot;</span>,
            <span class="token string">&quot;date_created&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;1684916023&quot;</span>,
            <span class="token string">&quot;date_deleted&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;0&quot;</span>,
            <span class="token string">&quot;deleted&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;0&quot;</span>,
            <span class="token string">&quot;ecosystem&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;18&quot;</span>,
            <span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;21&quot;</span>,
            <span class="token string">&quot;member&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;{<span class="token entity" title="\&quot;">\&quot;</span>account<span class="token entity" title="\&quot;">\&quot;</span>: <span class="token entity" title="\&quot;">\&quot;</span>1273-2644-xxxx-5846-6598<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>image_id<span class="token entity" title="\&quot;">\&quot;</span>: <span class="token entity" title="\&quot;">\&quot;</span>0<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>member_name<span class="token entity" title="\&quot;">\&quot;</span>: <span class="token entity" title="\&quot;">\&quot;</span>founder<span class="token entity" title="\&quot;">\&quot;</span>}&quot;</span>,
            <span class="token string">&quot;role&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;{<span class="token entity" title="\&quot;">\&quot;</span>id<span class="token entity" title="\&quot;">\&quot;</span>: <span class="token entity" title="\&quot;">\&quot;</span>20<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>name<span class="token entity" title="\&quot;">\&quot;</span>: <span class="token entity" title="\&quot;">\&quot;</span>teacher<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>type<span class="token entity" title="\&quot;">\&quot;</span>: <span class="token entity" title="\&quot;">\&quot;</span>1<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>image_id<span class="token entity" title="\&quot;">\&quot;</span>: <span class="token entity" title="\&quot;">\&quot;</span>0<span class="token entity" title="\&quot;">\&quot;</span>}&quot;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">..</span>.
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>where the <code>where</code> condition <code>ecosystem</code> specifies ecology, <code>role-&gt;id</code> specifies the role id, and <code>deleted</code>: 0 specifies not deleted.
We can see that we have 3 rows, if we want to remove the role with member <code>1273-2644-xxxx-5846-6598</code>, that is, the role with <code>id</code> of <code>21</code>.
Administrators can call the contract <code>@1RolesUnassign</code> to remove role members, as follows</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>callContract @1RolesUnassign <span class="token punctuation">{</span><span class="token string">&quot;RowId&quot;</span><span class="token builtin class-name">:</span> <span class="token number">21</span><span class="token punctuation">}</span>
</code></pre></div><h4 id="modify-role-manager"><a href="#modify-role-manager" class="header-anchor">#</a> Modify Role Manager</h4> <p>Let's look at the current ecological roles</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>getList @1roles -w<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;ecosystem&quot;</span><span class="token builtin class-name">:</span> <span class="token number">18</span><span class="token punctuation">}</span>

<span class="token punctuation">{</span>
    <span class="token string">&quot;count&quot;</span><span class="token builtin class-name">:</span> <span class="token number">5</span>,
    <span class="token string">&quot;list&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token string">&quot;company_id&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;0&quot;</span>,
            <span class="token string">&quot;creator&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;{<span class="token entity" title="\&quot;">\&quot;</span>account<span class="token entity" title="\&quot;">\&quot;</span>: <span class="token entity" title="\&quot;">\&quot;</span>1273-2644-xxxx-5846-6598<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>image_id<span class="token entity" title="\&quot;">\&quot;</span>: <span class="token entity" title="\&quot;">\&quot;</span>0<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>member_name<span class="token entity" title="\&quot;">\&quot;</span>: <span class="token entity" title="\&quot;">\&quot;</span>founder<span class="token entity" title="\&quot;">\&quot;</span>}&quot;</span>,
            <span class="token string">&quot;date_created&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;1684910917&quot;</span>,
            <span class="token string">&quot;date_deleted&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;0&quot;</span>,
            <span class="token string">&quot;default_page&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;deleted&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;0&quot;</span>,
            <span class="token string">&quot;ecosystem&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;18&quot;</span>,
            <span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;20&quot;</span>,
            <span class="token string">&quot;image_id&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;0&quot;</span>,
            <span class="token string">&quot;role_name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;teacher&quot;</span>,
            <span class="token string">&quot;role_type&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;1&quot;</span>,
            <span class="token string">&quot;roles_access&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;[]&quot;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">..</span>.
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>where <code>roles_access</code> is the administrative role for the current role, which is an array and can have more than one.
We add an administrative role to the role <code>teacher</code> by calling the <code>@1RolesAccessManager</code> contract, where the contract parameters <code>Action</code> administrative operator (<code>clean</code>, <code>remove</code>, <code>add</code>),<code>Rid</code> the role ID to be managed, <code>ManagerRid</code> the Rid Manager of the role</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>callContract @1RolesAccessManager <span class="token punctuation">{</span><span class="token string">&quot;Action&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;add&quot;</span>, <span class="token string">&quot;Rid&quot;</span><span class="token builtin class-name">:</span> <span class="token number">20</span>, <span class="token string">&quot;ManagerRid&quot;</span><span class="token builtin class-name">:</span> <span class="token number">13</span><span class="token punctuation">}</span>

<span class="token punctuation">{</span>
    <span class="token string">&quot;block_id&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1745</span>,
    <span class="token string">&quot;hash&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;e2eb8ff0dc309ec7652db...bbbe58bca4ca574804e46c2f63653eb73104&quot;</span>,
    <span class="token string">&quot;penalty&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
    <span class="token string">&quot;err&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="delete-role"><a href="#delete-role" class="header-anchor">#</a> Delete Role</h4> <p>We can call the <code>@1RolesDelete</code> contract to delete roles, where the contract parameters <code>Rid</code> is the ID of the role to be managed and <code>Ops</code> is the operator (<code>D</code> is delete <code>R</code> is restore)</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>callContract @1RolesDelete <span class="token punctuation">{</span><span class="token string">&quot;Rid&quot;</span><span class="token builtin class-name">:</span> <span class="token number">24</span>, <span class="token string">&quot;Ops&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;D&quot;</span><span class="token punctuation">}</span>

<span class="token punctuation">{</span>
    <span class="token string">&quot;block_id&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1785</span>,
    <span class="token string">&quot;hash&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;1ebf99a04f504fc3d2...4ecfbdfc419bf3dbf39df0013dca913f844&quot;</span>,
    <span class="token string">&quot;penalty&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
    <span class="token string">&quot;err&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="issuance-of-token"><a href="#issuance-of-token" class="header-anchor">#</a> Issuance of Token</h3> <ul><li><a href="#create-ecology">Create Ecology</a></li> <li><a href="#installing-basic-applications">Installing Basic Applications</a></li> <li><a href="#token-issuance">Token Issuance</a></li></ul> <h4 id="create-ecology"><a href="#create-ecology" class="header-anchor">#</a> Create Ecology</h4> <p>Create an ecology, call <code>@1NewEcosystem</code> contract</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>callContract @1NewEcosystem <span class="token punctuation">{</span><span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;Test Ecosystem&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span>
    <span class="token string">&quot;block_id&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1787</span>,
    <span class="token string">&quot;hash&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;384f35ef93243c9dd4f53b9298873b356b25b31cf7c6a6be7600ee7694d77006&quot;</span>,
    <span class="token string">&quot;penalty&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
    <span class="token string">&quot;err&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;21&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Then we modify the command line tool configuration to log into this newly created ecosystem: &quot;21&quot;</p> <h4 id="installing-basic-applications"><a href="#installing-basic-applications" class="header-anchor">#</a> Installing Basic Applications</h4> <p>Call the contract to install the base application, as follows:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">1</span>  <span class="token operator">&gt;</span>callContract @1PlatformAppsInstall
<span class="token number">2</span>  <span class="token operator">&gt;</span>callContract @1RolesInstall
<span class="token number">3</span>  <span class="token operator">&gt;</span>callContract @1AppInstall <span class="token punctuation">{</span><span class="token string">&quot;ApplicationId&quot;</span><span class="token builtin class-name">:</span> <span class="token number">5</span><span class="token punctuation">}</span>
<span class="token number">4</span>  <span class="token operator">&gt;</span>callContract @1AppInstall <span class="token punctuation">{</span><span class="token string">&quot;ApplicationId&quot;</span><span class="token builtin class-name">:</span> <span class="token number">6</span><span class="token punctuation">}</span>
</code></pre></div><p>Line 1, install the platform application
Line 2, install default role
Line 3-4, install the eco-configuration and token issuance application, where the application id <code>5,6</code> can be queried via getList as follows:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>getList @1applications -w<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;ecosystem&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1</span>, <span class="token string">&quot;<span class="token variable">$or</span>&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;Token emission&quot;</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;Ecosystems catalog&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span> -c<span class="token operator">=</span><span class="token string">&quot;name,ecosystem&quot;</span>

<span class="token punctuation">{</span>
    <span class="token string">&quot;count&quot;</span><span class="token builtin class-name">:</span> <span class="token number">2</span>,
    <span class="token string">&quot;list&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token string">&quot;ecosystem&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;1&quot;</span>,
            <span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;5&quot;</span>,
            <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;Token emission&quot;</span>
        <span class="token punctuation">}</span>,
        <span class="token punctuation">{</span>
            <span class="token string">&quot;ecosystem&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;1&quot;</span>,
            <span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;6&quot;</span>,
            <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;Ecosystems catalog&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="token-issuance"><a href="#token-issuance" class="header-anchor">#</a> Token Issuance</h4> <p>Because it is a new ecology, you need to set up the token issuance, call <code>@1TeSettings</code> contract to specify the roles that can issue tokens</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>callContract @1TeSettings <span class="token punctuation">{</span><span class="token string">&quot;RoleDeveloper&quot;</span><span class="token builtin class-name">:</span> <span class="token number">30</span><span class="token punctuation">}</span>
</code></pre></div><p>where <code>RoleDeveloper</code> is the current ecological role id, which can be obtained through the <code>@1roles</code> data table</p> <p><strong>Token Issuance</strong> Call <code>@1NewToken</code> contract to issue tokens</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>callContract @1NewToken <span class="token punctuation">{</span><span class="token string">&quot;Symbol&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;TEST&quot;</span>, <span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;TEST Coin&quot;</span>, <span class="token string">&quot;Amount&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;10000000000000000&quot;</span> ,<span class="token string">&quot;Digits&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;12&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p>where the contract parameters <code>Symbol</code> is the token symbol, <code>Name</code> is the token name, <code>Amount</code> is the total amount, and <code>Digits</code> is the precision.</p> <p><strong>Token Emission</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>callContract @1TeEmission <span class="token punctuation">{</span><span class="token string">&quot;Amount&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1000000000000</span><span class="token punctuation">}</span>
</code></pre></div><p><strong>Destroy tokens</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>callContract @1TeBurn <span class="token punctuation">{</span><span class="token string">&quot;Amount&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1000000000000</span><span class="token punctuation">}</span>
</code></pre></div><p>Default token increment and token destruction is allowed, you can set it off by <code>@1TeChange</code>, where <code>TypeChange</code> is the type (<code>emission</code> increment,<code>withdraw</code> destruction).
<code>Value</code> is the on/off status (<code>1</code> on, <code>2</code> off), e.g:
<strong>Close Additions</strong> Note: Cannot be turned on after closing</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>callContract @1TeChange <span class="token punctuation">{</span><span class="token string">&quot;TypeChange&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;emission&quot;</span>, <span class="token string">&quot;Value&quot;</span><span class="token builtin class-name">:</span> <span class="token number">2</span><span class="token punctuation">}</span>
</code></pre></div><p><strong>Turn off destruction</strong>, if you want to turn on destruction again, just set <code>Value</code> to <code>1</code>.</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>callContract @1TeChange <span class="token punctuation">{</span><span class="token string">&quot;TypeChange&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;withdraw&quot;</span>, <span class="token string">&quot;Value&quot;</span><span class="token builtin class-name">:</span> <span class="token number">2</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="eco-deduction"><a href="#eco-deduction" class="header-anchor">#</a> Eco Deduction</h3> <p>Before setting up eco-deductions, you need to understand the IBAX fee model, which can be found in the <a href="https://github.com/IBAX-io/whitepaper" target="_blank" rel="noopener noreferrer">white paper<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>We first set the eco-wallet address, call the <code>@1EditParameter</code> contract and modify the eco-parameters</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>callContract @1EditParameter <span class="token punctuation">{</span><span class="token string">&quot;Id&quot;</span><span class="token builtin class-name">:</span> <span class="token number">334</span>, <span class="token string">&quot;Value&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;1273-2644-xxxx-5846-6598&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p>where <code>Id</code> is the ecowallet <code>ecosystem_wallet</code> parameter id, which can be queried as follows:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>getList @1parameters -w<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;ecosystem&quot;</span><span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;ecosystem_wallet&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p>The <code>Value</code> value is the address of the ecowallet that will be bound, and the contract generates the gas fee, which is paid by that address. The address must have enough tokens in the current ecology and needs to be agreed by the bound address before the modification will be successful</p> <p>Call <code>@1EcoFeeModeManage</code> contract to set up multi-ecological deduction, as follows:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>callContract @1EcoFeeModeManage <span class="token punctuation">{</span><span class="token string">&quot;FollowFuel&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0.01</span>, <span class="token string">&quot;CombustionFlag&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1</span>, <span class="token string">&quot;VmCostFlag&quot;</span><span class="token builtin class-name">:</span> <span class="token number">2</span>, <span class="token string">&quot;VmCostConversionRate&quot;</span><span class="token builtin class-name">:</span> <span class="token number">100</span>, <span class="token string">&quot;StorageConversionRate&quot;</span><span class="token builtin class-name">:</span> <span class="token number">100</span>, <span class="token string">&quot;StorageFlag&quot;</span><span class="token builtin class-name">:</span> <span class="token number">2</span>, <span class="token string">&quot;ExpediteFlag&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1</span><span class="token punctuation">}</span>
</code></pre></div><p>where the contract parameter fields are defined as follows:</p> <ul><li><code>FollowFuel</code> parameter is a multiple of the follow eco1 rate</li> <li><code>CombustionFlag</code> whether to turn on ecotrade gas fee combustion, 1- no, 2-yes</li> <li><code>CombustionPercent</code> Combustion percentage, only effective when gas fee combustion is turned on, takes values 1 to 100, 0 when not turned on</li> <li><code>VmCostFlag</code> VM cost flag, set direct or proxy payment, 1 - direct payment, 2 - proxy payment</li> <li><code>StorageFlag</code> storage fee flag, set direct payment or proxy payment, 1 - direct payment, 2 - proxy payment</li> <li><code>ExpediteFlag</code> Expedited fee flag, set direct payment or payment on behalf of, 1 - direct payment, 2 - payment on behalf of</li> <li><code>VmCostConversionRate</code> Virtual machine cost conversion rate, 2 decimal places, only in effect for proxy payments, greater than zero</li> <li><code>StorageConversionRate</code> The storage cost conversion rate, 2 decimal places, only in effect for proxy payments, greater than zero</li></ul> <p>If you use the above settings, all transaction fees incurred by users invoking contracts within the ecology will be paid by the ecological wallet of the current ecological setup.
All users only need to pay for the gas costs incurred within the ecology. Of course you can adjust the cost parameters according to your actual needs</p> <h3 id="dao-governance-ecology"><a href="#dao-governance-ecology" class="header-anchor">#</a> DAO Governance Ecology</h3> <p>Before modifying to DAO governance ecology, you need to ensure that the current ecology has issued tokens, and after modifying to DAO governance ecology, all proposals of the ecology will be voted on by the members of the governance committee.
The DAO Governance Board is no longer managed by the eco-developers alone, and the top 50 representatives of the eco-holdings are elected.</p> <p>Call the <code>@1EditControlMode</code> contract to change the eco governance mode to DAO governance mode.</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>callContract @1EditControlMode <span class="token punctuation">{</span><span class="token string">&quot;Value&quot;</span><span class="token builtin class-name">:</span> <span class="token number">2</span><span class="token punctuation">}</span>
</code></pre></div><p>where the <code>Value</code> parameter <code>1</code> represents the creator model <code>2</code> represents the DAO governance model</p> <p>We can try to create an application</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span>callContract @1NewApplication <span class="token punctuation">{</span><span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;testApp&quot;</span>, <span class="token string">&quot;Conditions&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;ContractConditions(<span class="token entity" title="\&quot;">\&quot;</span>@1DeveloperCondition<span class="token entity" title="\&quot;">\&quot;</span>)&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p>At this point a DAO governance proposal is generated and voted on by the DAO Governance Board before the application is created. A valid proposal requires a 68% approval rate out of 75% of the votes cast.
The scope of DAO governance includes:</p> <ol><li>Add, delete and change applications, contracts, pages, code snippets, tabs, menus, application parameters, data tables and fields</li> <li>Modify multilingual</li> <li>DAO and creator model switch</li> <li>Edit ecological parameters</li> <li>role, assign remove role members</li> <li>Issue additional destruction currency</li> <li>Modify the platform parameters</li> <li>Modify ecological information</li> <li>Modification of delayed contracts</li> <li>Modify the voting template</li></ol> <h2 id="deploy-applications-using-application-packaging-tool"><a href="#deploy-applications-using-application-packaging-tool" class="header-anchor">#</a> Deploy applications using application packaging tool</h2> <p>Before starting this tutorial, you need to download <a href="https://github.com/IBAX-io/app-tool" target="_blank" rel="noopener noreferrer">IBAX Application Packaging Tool<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> , we need to use this tool to package IBAX application.</p> <p>We need to store the application files according to the following directory structure</p> <div class="language-text extra-class"><pre class="language-text"><code>- APP Name
    - app_params
        params1.csv
        params2.csv
        ...
    - contracts
        contract1.sim
        contract2.sim
        ...
    - tables
        tableName1.json
        tableName2.json
        ...
    config.json
</code></pre></div><p>As shown below:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>airdrop$ <span class="token function">ls</span> *
config.json

app_params:
dedicated_account.csv  lock_percent.csv  per_period_sec.csv  period_count.csv

contracts:
AddAirdrop.sim  ClaimAirdrop.sim  SpeedAirdrop.sim

tables:
airdrop_info.json
</code></pre></div><p>The <code>app_params</code> directory stores the application parameters file, named using the parameter name + file format <code>.csv</code>, the content of the file is the parameter value.
The <code>contracts</code> directory holds the contracts, in <code>.sim</code> file format, and the contents of the file are the contract source code.
The <code>tables</code> directory holds the application data table structure in <code>json</code> file format, as follows:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;account&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;conditions&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{\&quot;read\&quot;: \&quot;true\&quot;, \&quot;update\&quot;: \&quot;ContractConditions(\&quot;MainCondition\&quot;)\&quot;}&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;varchar&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;balance_amount&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;conditions&quot;</span><span class="token operator">:</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;money&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;stake_amount&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;conditions&quot;</span><span class="token operator">:</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;money&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;surplus&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;conditions&quot;</span><span class="token operator">:</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;number&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;total_amount&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;conditions&quot;</span><span class="token operator">:</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;money&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p><code>name</code> is the datatable field name, <code>conditions</code> is the datatable field permission, and <code>type</code> is the field type.</p> <p>In step 1, we generate a config.json file and save it to the airdrop directory with the following contents:</p> <div class="language-text extra-class"><pre class="language-text"><code>{
    &quot;name&quot;: &quot;Airdrop&quot;,
    &quot;conditions&quot;: &quot;ContractConditions(\&quot;@1MainCondition\&quot;)&quot;
}
</code></pre></div><p>Where <code>name</code> is the name of the application, <code>conditions</code>: is the permission to modify the application, and then save it to the airdrop directory.</p> <p>Step 2, package the application, the following command will generate the application <code>airdrop.json</code> in the current directory, if you modify the contract or application parameters, you need to repackage the application.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ ./app-tool airdrop/
</code></pre></div><p>We can import the application via <a href="https://github.com/IBAX-io/ibax-cli" target="_blank" rel="noopener noreferrer">command line tool<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> as follows:
Use the <code>import</code> command to import an application, with the <code>-f</code> parameter to specify the application file to be imported</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ ibax-cli console

Welcome to the IBAX console<span class="token operator">!</span>
To exit, press ctrl-d or <span class="token builtin class-name">type</span> <span class="token builtin class-name">exit</span>

<span class="token operator">&gt;</span>import -f ./airdrop.json
</code></pre></div><p>Of course if you have an application, you can also generate the complete directory structure with the following command</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ app-tool.exe airdrop.json
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/IBAX-io/documentation/edit/master/docs/it/tutorials/tutorial.md" target="_blank" rel="noopener noreferrer">Modifica questa pagina su GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Ultimo aggiornamento:</span> <span class="time">7/6/2023, 12:01:32</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/it/tutorials/app_tutorial.html" class="prev">
        Tutorial for application development
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ed2354d3.js" defer></script><script src="/assets/js/2.14a295a1.js" defer></script><script src="/assets/js/85.3341d558.js" defer></script>
  </body>
</html>
