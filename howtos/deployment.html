<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Deployment of A IBAX Network </a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/howtos/deployment.html#an-deployment-example" class="sidebar-link">An deployment example </a></li><li class="sidebar-sub-header"><a href="/howtos/deployment.html#deploy-phase" class="sidebar-link">Deploy phase </a></li><li class="sidebar-sub-header"><a href="/howtos/deployment.html#server-deployment" class="sidebar-link">Server deployment </a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/howtos/deployment.html#deploy-the-first-node" class="sidebar-link">Deploy the first node </a></li><li class="sidebar-sub-header"><a href="/howtos/deployment.html#dependencies-and-environment-settings" class="sidebar-link">Dependencies and environment settings </a></li><li class="sidebar-sub-header"><a href="/howtos/deployment.html#golang" class="sidebar-link">Golang </a></li><li class="sidebar-sub-header"><a href="/howtos/deployment.html#postgresql" class="sidebar-link">PostgreSQL </a></li><li class="sidebar-sub-header"><a href="/howtos/deployment.html#centrifugo" class="sidebar-link">Centrifugo </a></li><li class="sidebar-sub-header"><a href="/howtos/deployment.html#directory-structure" class="sidebar-link">Directory structure </a></li><li class="sidebar-sub-header"><a href="/howtos/deployment.html#create-a-database" class="sidebar-link">Create a database </a></li><li class="sidebar-sub-header"><a href="/howtos/deployment.html#configure-centrifugo" class="sidebar-link">Configure Centrifugo </a></li><li class="sidebar-sub-header"><a href="/howtos/deployment.html#install-go-ibax" class="sidebar-link">Install go-ibax </a></li><li class="sidebar-sub-header"><a href="/howtos/deployment.html#configure-the-first-node" class="sidebar-link">Configure the first node </a></li><li class="sidebar-sub-header"><a href="/howtos/deployment.html#initiate-the-first-node-server" class="sidebar-link">Initiate the first node server </a></li></ul></li><li class="sidebar-sub-header"><a href="/howtos/deployment.html#deploy-other-nodes" class="sidebar-link">Deploy other nodes </a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/howtos/deployment.html#node-2" class="sidebar-link">Node 2 </a></li><li class="sidebar-sub-header"><a href="/howtos/deployment.html#node-3" class="sidebar-link">Node 3 </a></li></ul></li><li class="sidebar-sub-header"><a href="/howtos/deployment.html#front-end-deployment" class="sidebar-link">Front-end deployment </a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/howtos/deployment.html#software-prerequisites" class="sidebar-link">Software prerequisites </a></li><li class="sidebar-sub-header"><a href="/howtos/deployment.html#build-a-weaver-application" class="sidebar-link">Build a Weaver application </a></li><li class="sidebar-sub-header"><a href="/howtos/deployment.html#add-the-configuration-file-for-the-blockchain-network" class="sidebar-link">Add the configuration file for the blockchain network </a></li><li class="sidebar-sub-header"><a href="/howtos/deployment.html#build-weaver-web-application" class="sidebar-link">Build Weaver Web Application </a></li></ul></li><li class="sidebar-sub-header"><a href="/howtos/deployment.html#configure-the-blockchain-network" class="sidebar-link">Configure the blockchain network </a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/howtos/deployment.html#create-the-creator-account" class="sidebar-link">Create the creator account </a></li><li class="sidebar-sub-header"><a href="/howtos/deployment.html#import-applications-roles-and-templates" class="sidebar-link">Import applications, roles and templates </a></li><li class="sidebar-sub-header"><a href="/howtos/deployment.html#add-the-first-node-to-the-node-list" class="sidebar-link">Add the first node to the node list </a></li></ul></li><li class="sidebar-sub-header"><a href="/howtos/deployment.html#add-other-honor-nodes" class="sidebar-link">Add other honor nodes </a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/howtos/deployment.html#add-members-into-the-consensus-role-group" class="sidebar-link">Add members into the consensus role group </a></li><li class="sidebar-sub-header"><a href="/howtos/deployment.html#create-the-owner-account-for-other-nodes" class="sidebar-link">Create the owner account for other nodes </a></li><li class="sidebar-sub-header"><a href="/howtos/deployment.html#assign-the-node-owner-with-the-validators-role" class="sidebar-link">Assign the node owner with the Validators role </a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="deployment-of-a-ibax-network"><a href="#deployment-of-a-ibax-network" class="header-anchor">#</a> Deployment of A IBAX Network </h1> <p>In this section, we will show you how to deploy your own blockchain network.</p> <h2 id="an-deployment-example"><a href="#an-deployment-example" class="header-anchor">#</a> An deployment example </h2> <p>A blockchain network will be deployed with the following three nodes as an example.</p> <p>Three network nodes:</p> <ul><li>Node 1 is the first node in the blockchain network, which can generate new blocks and send transactions from clients connected to it;</li> <li>Node 2 is another honor node, which can generate new blocks and send transactions from clients connected to it;</li> <li>Node 3 is a guardian node, which cannot generate new blocks, but can send transactions from clients connected to it.</li></ul> <p>Configurations of the three nodes to be deployed:</p> <ul><li>Each node uses its own PostgreSQL database system instance;</li> <li>Each node uses its own Centrifugo service instance;</li> <li>The server side github-backend is deployed on the same host as other backend components.</li></ul> <p>The sample addresses and ports used by the nodes are described in the following table:</p> <table><thead><tr><th style="text-align:center;">Node</th> <th style="text-align:center;">Component</th> <th style="text-align:center;">IP &amp; port</th></tr></thead> <tbody><tr><td style="text-align:center;">1</td> <td style="text-align:center;">PostgreSQL</td> <td style="text-align:center;">127.0.0.1:5432</td></tr> <tr><td style="text-align:center;">1</td> <td style="text-align:center;">Centrifugo</td> <td style="text-align:center;">192.168.1.1:8000</td></tr> <tr><td style="text-align:center;">1</td> <td style="text-align:center;">go-ibax (TCP service)</td> <td style="text-align:center;">192.168.1.1:7078</td></tr> <tr><td style="text-align:center;">1</td> <td style="text-align:center;">go-ibax (API service)</td> <td style="text-align:center;">192.168.1.1:7079</td></tr> <tr><td style="text-align:center;">2</td> <td style="text-align:center;">PostgreSQL</td> <td style="text-align:center;">127.0.0.1:5432</td></tr> <tr><td style="text-align:center;">2</td> <td style="text-align:center;">Centrifugo</td> <td style="text-align:center;">192.168.1.2:8000</td></tr> <tr><td style="text-align:center;">2</td> <td style="text-align:center;">go-ibax (TCP service)</td> <td style="text-align:center;">192.168.1.2:7078</td></tr> <tr><td style="text-align:center;">2</td> <td style="text-align:center;">go-ibax (API service)</td> <td style="text-align:center;">192.168.1.2:7079</td></tr> <tr><td style="text-align:center;">3</td> <td style="text-align:center;">PostgreSQL</td> <td style="text-align:center;">127.0.0.1:5432</td></tr> <tr><td style="text-align:center;">3</td> <td style="text-align:center;">Centrifugo</td> <td style="text-align:center;">192.168.1.3:8000</td></tr> <tr><td style="text-align:center;">3</td> <td style="text-align:center;">go-ibax (TCP service)</td> <td style="text-align:center;">192.168.1.3:7078</td></tr> <tr><td style="text-align:center;">3</td> <td style="text-align:center;">go-ibax (API service)</td> <td style="text-align:center;">192.168.1.3:7079</td></tr></tbody></table> <h2 id="deploy-phase"><a href="#deploy-phase" class="header-anchor">#</a> Deploy phase </h2> <p>Your own blockchain network must be deployed in several stages:</p> <ul><li><a href="#deployment-of-a-ibax-network">Deployment of A IBAX Network</a> <ul><li><a href="#an-deployment-example">An deployment example</a></li> <li><a href="#deploy-phase">Deploy phase</a></li> <li><a href="#server-deployment">Server deployment</a> <ul><li><a href="#deploy-the-first-node">Deploy the first node</a></li> <li><a href="#dependencies-and-environment-settings">Dependencies and environment settings</a> <ul><li><a href="#sudo">sudo</a></li></ul></li> <li><a href="#golang">Golang</a></li> <li><a href="#postgresql">PostgreSQL</a></li> <li><a href="#centrifugo">Centrifugo</a></li> <li><a href="#directory-structure">Directory structure</a></li> <li><a href="#create-a-database">Create a database</a></li> <li><a href="#configure-centrifugo">Configure Centrifugo</a></li> <li><a href="#install-go-ibax">Install go-ibax</a></li> <li><a href="#configure-the-first-node">Configure the first node</a></li> <li><a href="#initiate-the-first-node-server">Initiate the first node server</a></li></ul></li> <li><a href="#deploy-other-nodes">Deploy other nodes</a> <ul><li><a href="#node-2">Node 2</a></li> <li><a href="#node-3">Node 3</a></li></ul></li> <li><a href="#front-end-deployment">Front-end deployment</a> <ul><li><a href="#software-prerequisites">Software prerequisites</a></li> <li><a href="#build-a-weaver-application">Build a Weaver application</a></li> <li><a href="#add-the-configuration-file-for-the-blockchain-network">Add the configuration file for the blockchain network</a></li> <li><a href="#build-weaver-web-application">Build Weaver Web Application</a></li></ul></li> <li><a href="#configure-the-blockchain-network">Configure the blockchain network</a> <ul><li><a href="#create-the-creator-account">Create the creator account</a></li> <li><a href="#import-applications-roles-and-templates">Import applications, roles and templates</a></li> <li><a href="#add-the-first-node-to-the-node-list">Add the first node to the node list</a></li></ul></li> <li><a href="#add-other-honor-nodes">Add other honor nodes</a> <ul><li><a href="#add-members-into-the-consensus-role-group">Add members into the consensus role group</a></li> <li><a href="#create-the-owner-account-for-other-nodes">Create the owner account for other nodes</a></li> <li><a href="#assign-the-node-owner-with-the-validators-role">Assign the node owner with the Validators role</a></li></ul></li></ul></li></ul> <h2 id="server-deployment"><a href="#server-deployment" class="header-anchor">#</a> Server deployment </h2> <h3 id="deploy-the-first-node"><a href="#deploy-the-first-node" class="header-anchor">#</a> Deploy the first node </h3> <p>The first node is a special one because it is essential to launch the blockchain network. The first block of the blockchain is generated by the first node, and all other nodes would download the blockchain from it. The owner of the first node is the platform creator.</p> <h3 id="dependencies-and-environment-settings"><a href="#dependencies-and-environment-settings" class="header-anchor">#</a> Dependencies and environment settings </h3> <h4 id="sudo"><a href="#sudo" class="header-anchor">#</a> sudo </h4> <p>All commands of Debian 9 must be run as a non-root user. However, some system commands require super user permissions to execute. By default, sudo is not installed on Debian 9, you must install it first.</p> <ol><li>Become a super user.</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">su</span> -
</code></pre></div><ol start="2"><li>Upgrade your system.</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">apt</span> update <span class="token parameter variable">-y</span> <span class="token operator">&amp;&amp;</span> <span class="token function">apt</span> upgrade <span class="token parameter variable">-y</span> <span class="token operator">&amp;&amp;</span> <span class="token function">apt</span> dist-upgrade <span class="token parameter variable">-y</span>
</code></pre></div><ol start="3"><li>Install sudo.</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">apt</span> <span class="token function">install</span> <span class="token function">sudo</span> <span class="token parameter variable">-y</span>
</code></pre></div><ol start="4"><li>Add your user to the sudo group.</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">usermod</span> <span class="token parameter variable">-a</span> <span class="token parameter variable">-G</span> <span class="token function">sudo</span> user
</code></pre></div><ol start="5"><li>After restarting, the changes take effect.</li></ol> <h3 id="golang"><a href="#golang" class="header-anchor">#</a> Golang </h3> <p>Install Go according to the <a href="https://golang.org/doc/install#tarball" target="_blank" rel="noopener noreferrer">Official Documents<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <ol><li>Download the latest stable version of Go (&gt; 1.10.x) from <a href="https://golang.org/dl/" target="_blank" rel="noopener noreferrer">Golang official website<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or through the command line:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">wget</span> https://dl.google.com/go/go1.11.2.linux-amd64.tar.gz
</code></pre></div><ol start="2"><li>Use tar to extract the tarball to the <code>/usr/local</code> directory.</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">tar</span> <span class="token parameter variable">-C</span> /usr/local <span class="token parameter variable">-xzf</span> go1.11.2.linux-amd64.tar.gz
</code></pre></div><ol start="3"><li>Add <code>/usr/local/go/bin</code> to PATH environment variables (located at <code>/etc/profile</code> or <code>$HOME/.profile</code>).</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span>:/usr/local/go/bin
</code></pre></div><ol><li>Execute the <code>source</code> file to make the changes take effect, for example:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">source</span> <span class="token environment constant">$HOME</span>/.profile
</code></pre></div><ol start="2"><li>Delete temporary files:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">rm</span> go1.11.2.linux-amd64.tar.gz
</code></pre></div><h3 id="postgresql"><a href="#postgresql" class="header-anchor">#</a> PostgreSQL </h3> <ol><li>Install PostgreSQL (&gt; v.10) and psql:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> postgresql
</code></pre></div><h3 id="centrifugo"><a href="#centrifugo" class="header-anchor">#</a> Centrifugo </h3> <ol><li>Download Centrifugo V.1.8.0 from <a href="https://github.com/centrifugal/centrifugo/releases/" target="_blank" rel="noopener noreferrer">GitHub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or through the command line:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">wget</span> https://github.com/centrifugal/centrifugo/releases/download/v1.8.0/centrifugo-1.8.0-linux-amd64.zip <span class="token punctuation">\</span>
<span class="token operator">&amp;&amp;</span> <span class="token function">unzip</span> centrifugo-1.8.0-linux-amd64.zip <span class="token punctuation">\</span>
<span class="token operator">&amp;&amp;</span> <span class="token function">mkdir</span> centrifugo <span class="token punctuation">\</span>
<span class="token operator">&amp;&amp;</span> <span class="token function">mv</span> centrifugo-1.8.0-linux-amd64/* centrifugo/
</code></pre></div><ol start="2"><li>Delete temporary files:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">rm</span> <span class="token parameter variable">-R</span> centrifugo-1.8.0-linux-amd64 <span class="token punctuation">\</span>
<span class="token operator">&amp;&amp;</span> <span class="token function">rm</span> centrifugo-1.8.0-linux-amd64.zip
</code></pre></div><h3 id="directory-structure"><a href="#directory-structure" class="header-anchor">#</a> Directory structure </h3> <p>For the Debian 9 system, it is recommended to store all software used by the blockchain platform in a separate directory.</p> <p>The <code>/opt/backenddir</code> directory is used here, but you can use any directory. In this case, please change all commands and configuration files accordingly.</p> <ol><li>Create a directory for the blockchain platform:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">mkdir</span> /opt/backenddir
</code></pre></div><ol start="2"><li>Make your user the owner of the directory:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">chown</span> user /opt/backenddir/
</code></pre></div><ol start="3"><li>Create subdirectories for Centrifugo, go-ibax and node data. All node data is stored in a directory named <code>nodeX</code>, where <code>X</code> is the node number. According to the node to be deployed, <code>node1</code> is Node 1, <code>node2</code> is Node 2, and so forth.</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">mkdir</span> /opt/backenddir/go-ibax <span class="token punctuation">\</span>
<span class="token function">mkdir</span> /opt/backenddir/go-ibax/node1 <span class="token punctuation">\</span>
<span class="token function">mkdir</span> /opt/backenddir/centrifugo <span class="token punctuation">\</span>
</code></pre></div><h3 id="create-a-database"><a href="#create-a-database" class="header-anchor">#</a> Create a database </h3> <ol><li>Change the user password postgres to the default password <em>123456</em>. You can set your own password, but you must change it in the node configuration file <em>config.toml</em>.</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token parameter variable">-u</span> postgres psql <span class="token parameter variable">-c</span> <span class="token string">&quot;ALTER USER postgres WITH PASSWORD '123456'&quot;</span>
</code></pre></div><ol start="2"><li>Create a current state database for the node, for example <strong>chaindb</strong>:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token parameter variable">-u</span> postgres psql <span class="token parameter variable">-c</span> <span class="token string">&quot;CREATE DATABASE chaindb&quot;</span>
</code></pre></div><h3 id="configure-centrifugo"><a href="#configure-centrifugo" class="header-anchor">#</a> Configure Centrifugo </h3> <ol><li>Create the Centrifugo configuration file:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">echo</span> <span class="token string">'{&quot;secret&quot;:&quot;CENT_SECRET&quot;}'</span> <span class="token operator">&gt;</span> /opt/backenddir/centrifugo/config.json
</code></pre></div><p>You can set your own <em>secret</em>, but you must also change it in the node configuration file <em>config.toml</em>.</p> <h3 id="install-go-ibax"><a href="#install-go-ibax" class="header-anchor">#</a> Install go-ibax </h3> <ol><li>Download github-backend from GitHub:</li> <li>Copy the go-ibax binary file to the <code>/opt/backenddir/go-ibax</code> directory. If you are using default Go workspace, the binary files are located in the <code>$HOME/go/bin</code> directory:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">cp</span> <span class="token environment constant">$HOME</span>/go/bin/go-ibax /opt/backenddir/go-ibax
</code></pre></div><h3 id="configure-the-first-node"><a href="#configure-the-first-node" class="header-anchor">#</a> Configure the first node </h3> <ol start="3"><li>Create the configuration file for Node 1:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>/opt/backenddir/go-ibax config <span class="token punctuation">\</span>
 <span class="token parameter variable">--dataDir</span><span class="token operator">=</span>/opt/backenddir/node1 <span class="token punctuation">\</span>
 <span class="token parameter variable">--dbName</span><span class="token operator">=</span>chaindb <span class="token punctuation">\</span>
 <span class="token parameter variable">--centSecret</span><span class="token operator">=</span><span class="token string">&quot;CENT_SECRET&quot;</span> <span class="token parameter variable">--centUrl</span><span class="token operator">=</span>http://192.168.1.1:8000 <span class="token punctuation">\</span>
 <span class="token parameter variable">--httpHost</span><span class="token operator">=</span><span class="token number">192.168</span>.1.1 <span class="token punctuation">\</span>
 <span class="token parameter variable">--httpPort</span><span class="token operator">=</span><span class="token number">7079</span> <span class="token punctuation">\</span>
 <span class="token parameter variable">--tcpHost</span><span class="token operator">=</span><span class="token number">192.168</span>.1.1 <span class="token punctuation">\</span>
 <span class="token parameter variable">--tcpPort</span><span class="token operator">=</span><span class="token number">7078</span>
</code></pre></div><ol start="4"><li>Generate the keys of Node 1, including the public and private keys of the node and the account:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>/opt/backenddir/go-ibax generateKeys <span class="token punctuation">\</span>
 <span class="token parameter variable">--config</span><span class="token operator">=</span>/opt/backenddir/node1/config.toml
</code></pre></div><ol start="5"><li>Generate the first block:</li></ol> <blockquote><p>Note</p> <p>If you want to create your own blockchain network, you must use the <code>--test=true</code> option. Otherwise, you cannot create a new account.</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code>/opt/backenddir/go-ibax generateFirstBlock <span class="token punctuation">\</span>
 <span class="token parameter variable">--config</span><span class="token operator">=</span>/opt/backenddir/node1/config.toml <span class="token punctuation">\</span>
 <span class="token parameter variable">--test</span><span class="token operator">=</span>true
</code></pre></div><ol start="6"><li>Initialize the database:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>/opt/backenddir/go-ibax initDatabase <span class="token punctuation">\</span>
 <span class="token parameter variable">--config</span><span class="token operator">=</span>/opt/backenddir/node1/config.toml
</code></pre></div><h3 id="initiate-the-first-node-server"><a href="#initiate-the-first-node-server" class="header-anchor">#</a> Initiate the first node server </h3> <p>To start the first node server, you must start the following two services:</p> <ul><li>centrifugo</li> <li>go-ibax</li></ul> <p>If you failed to create <a href="https://wiki.debian.org/systemd/Services" target="_blank" rel="noopener noreferrer">services<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> with these files, you may execute binary files from directories in different consoles.</p> <ol><li>Run centrifugo:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>/opt/backenddir/centrifugo/centrifugo <span class="token punctuation">\</span>
 <span class="token parameter variable">-a</span> <span class="token number">192.168</span>.1.1 <span class="token parameter variable">-p</span> <span class="token number">8000</span> <span class="token punctuation">\</span>
 <span class="token parameter variable">--config</span> /opt/backenddir/centrifugo/config.json
</code></pre></div><ol start="2"><li>Run go-ibax:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>/opt/backenddir/go-ibax start <span class="token punctuation">\</span>
 <span class="token parameter variable">--config</span><span class="token operator">=</span>/opt/backenddir/node1/config.toml
</code></pre></div><h2 id="deploy-other-nodes"><a href="#deploy-other-nodes" class="header-anchor">#</a> Deploy other nodes </h2> <p>Although the deployment of all other nodes (Node 2 and Node 3) is similar to the first, but there are three differences:</p> <ul><li>You do not need to generate the first block. But it must be copied from Node 1 to the current node data directory;</li> <li>The node must download blocks from Node 1 by configuring the <code>--nodesAddr</code> option;</li> <li>The node must use its own addresses and ports.</li></ul> <h3 id="node-2"><a href="#node-2" class="header-anchor">#</a> Node 2 </h3> <p>Follow operational instructions as shown below:</p> <ol><li><a href="#dependencies-and-environment-settings">Dependencies and environment settings</a></li> <li><a href="#create-a-database">Create database</a></li> <li><a href="#centrifugo">Centrifugo</a></li> <li><a href="#install-go-ibax">Install go-ibax</a></li> <li>Create the configuration file for Node 2:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code> /opt/backenddir/go-ibax config <span class="token punctuation">\</span>
<span class="token parameter variable">--dataDir</span><span class="token operator">=</span>/opt/backenddir/node2 <span class="token punctuation">\</span>
<span class="token parameter variable">--dbName</span><span class="token operator">=</span>chaindb <span class="token punctuation">\</span>
<span class="token parameter variable">--centSecret</span><span class="token operator">=</span><span class="token string">&quot;CENT_SECRET&quot;</span> <span class="token parameter variable">--centUrl</span><span class="token operator">=</span>http://192.168.1.2:8000 <span class="token punctuation">\</span>
<span class="token parameter variable">--httpHost</span><span class="token operator">=</span><span class="token number">192.168</span>.1.2 <span class="token punctuation">\</span>
<span class="token parameter variable">--httpPort</span><span class="token operator">=</span><span class="token number">7079</span> <span class="token punctuation">\</span>
<span class="token parameter variable">--tcpHost</span><span class="token operator">=</span><span class="token number">192.168</span>.1.2 <span class="token punctuation">\</span>
<span class="token parameter variable">--tcpPort</span><span class="token operator">=</span><span class="token number">7078</span> <span class="token punctuation">\</span>
<span class="token parameter variable">--nodesAddr</span><span class="token operator">=</span><span class="token number">192.168</span>.1.1
</code></pre></div><ol start="6"><li>Copy the first block file to Node 2. For example, you can perform this operation on Node 2 throughscp:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code> <span class="token function">scp</span> user@192.168.1.1:/opt/backenddir/node1/1block /opt/backenddir/node2/
</code></pre></div><ol start="7"><li>Generate the keys of Node 2, including the public and private keys of the node and the account:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code> /opt/backenddir/go-ibax generateKeys <span class="token punctuation">\</span>
<span class="token parameter variable">--config</span><span class="token operator">=</span>/opt/backenddir/node2/config.toml
</code></pre></div><ol start="8"><li>Initiate the database:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code> ./go-ibax initDatabase --config<span class="token punctuation">\</span><span class="token operator">=</span>node2/config.toml
</code></pre></div><ol start="9"><li>Run centrifugo:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>/opt/backenddir/centrifugo/centrifugo <span class="token punctuation">\</span>
<span class="token parameter variable">-a</span> <span class="token number">192.168</span>.1.2 <span class="token parameter variable">-p</span> <span class="token number">8000</span> <span class="token punctuation">\</span>
--config/opt/backenddir/centrifugo/config.json
</code></pre></div><ol start="10"><li>Run go-ibax:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>/opt/backenddir/go-ibax start <span class="token punctuation">\</span>
 <span class="token parameter variable">--config</span><span class="token operator">=</span>/opt/backenddir/node2/config.toml
</code></pre></div><p>As a result, the node downloads the block from the first node. As this node is not a verification node, it cannot generate a new block. Node 2 will be added to the list of verification nodes later.</p> <h3 id="node-3"><a href="#node-3" class="header-anchor">#</a> Node 3 </h3> <p>Follow operational instructions as shown below:</p> <ol><li><p><a href="#dependencies-and-environment-settings">Dependencies and environment settings</a></p></li> <li><p><a href="#create-a-database">Create database</a></p></li> <li><p><a href="#centrifugo">Centrifugo</a></p></li> <li><p><a href="#install-go-ibax">Install go-ibax</a></p></li> <li><p>Create the configuration file for Node 3:</p></li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code> /opt/backenddir/go-ibax config <span class="token punctuation">\</span>
<span class="token parameter variable">--dataDir</span><span class="token operator">=</span>/opt/backenddir/node3 <span class="token punctuation">\</span>
<span class="token parameter variable">--dbName</span><span class="token operator">=</span>chaindb <span class="token punctuation">\</span>
<span class="token parameter variable">--centSecret</span><span class="token operator">=</span><span class="token string">&quot;CENT_SECRET&quot;</span> <span class="token parameter variable">--centUrl</span><span class="token operator">=</span>http://192.168.1.3:8000 <span class="token punctuation">\</span>
<span class="token parameter variable">--httpHost</span><span class="token operator">=</span><span class="token number">192.168</span>.1.3 <span class="token punctuation">\</span>
<span class="token parameter variable">--httpPort</span><span class="token operator">=</span><span class="token number">7079</span> <span class="token punctuation">\</span>
<span class="token parameter variable">--tcpHost</span><span class="token operator">=</span><span class="token number">192.168</span>.1.3 <span class="token punctuation">\</span>
<span class="token parameter variable">--tcpPort</span><span class="token operator">=</span><span class="token number">7078</span> <span class="token punctuation">\</span>
<span class="token parameter variable">--nodesAddr</span><span class="token operator">=</span><span class="token number">192.168</span>.1.1
</code></pre></div><ol start="6"><li>Copy the first block file to Node 3. For example, you can perform this operation on Node 3 through scp:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code> <span class="token function">scp</span> user@192.168.1.1:/opt/backenddir/node1/1block /opt/backenddir/node3/
</code></pre></div><ol start="7"><li>Generate the key of Node 3, including the public and private keys of the node and the account:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code> /opt/backenddir/go-ibax generateKeys <span class="token punctuation">\</span>
<span class="token parameter variable">--config</span><span class="token operator">=</span>/opt/backenddir/node3/config.toml
</code></pre></div><ol start="8"><li>Initiate the database:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code> ./go-ibax initDatabase <span class="token parameter variable">--config</span><span class="token operator">=</span>node3/config.toml
</code></pre></div><ol start="9"><li>Run centrifugo:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code> /opt/backenddir/centrifugo/centrifugo <span class="token punctuation">\</span>
<span class="token parameter variable">-a</span> <span class="token number">192.168</span>.1.3 <span class="token parameter variable">-p</span> <span class="token number">8000</span> <span class="token punctuation">\</span>
--config/opt/backenddir/centrifugo/config.json
</code></pre></div><ol start="10"><li>Run go-ibax:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code> /opt/backenddir/go-ibax start <span class="token punctuation">\</span>
 <span class="token parameter variable">--config</span><span class="token operator">=</span>/opt/backenddir/node3/config.toml
</code></pre></div><p>As a result, the node downloads the block from the first node. As this node is not a verification node, it cannot generate a new block. The client may be connected to the node, and it may send transactions to the network.</p> <h2 id="front-end-deployment"><a href="#front-end-deployment" class="header-anchor">#</a> Front-end deployment </h2> <p>Only after installing <strong>GNOME GUI</strong> on Debian 9 (Stretch) 64-bit Official Release, the Govis client can be built with the <code>yarn</code> package manager.</p> <h3 id="software-prerequisites"><a href="#software-prerequisites" class="header-anchor">#</a> Software prerequisites </h3> <ol><li>Download Node.js LTS version 8.11 from Node.js official website or through the command line:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">curl</span> <span class="token parameter variable">-sL</span> https://deb.nodesource.com/setup_8.x <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token parameter variable">-E</span> <span class="token function">bash</span>
</code></pre></div><ol start="2"><li>Install Node.js:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> nodejs
</code></pre></div><p>a) Download Yarn version 1.7.0 from yarn's <a href="https://github.com/yarnpkg/yarn/releases" target="_blank" rel="noopener noreferrer">Github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> repository or through the command line:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>cd/opt/backenddir <span class="token punctuation">\</span>
<span class="token operator">&amp;&amp;</span> <span class="token function">wget</span> https://github.com/yarnpkg/yarn/releases/download/v1.7.0/yarn_1.7.0_all.deb
</code></pre></div><p>b) Install Yarn:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> dpkg <span class="token parameter variable">-i</span> yarn_1.7.0_all.deb <span class="token operator">&amp;&amp;</span> <span class="token function">rm</span> yarn_1.7.0_all.deb
</code></pre></div><h3 id="build-a-weaver-application"><a href="#build-a-weaver-application" class="header-anchor">#</a> Build a Weaver application </h3> <ol><li>Download the latest version of Weaver from github-frontend via git:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>cd/opt/backenddir <span class="token punctuation">\</span>
<span class="token operator">&amp;&amp;</span> <span class="token function">git</span> clone https://github.com/ibax-io/ibax-front.git
</code></pre></div><ol start="2"><li>Install Weaver dependencies via Yarn:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>cd/opt/backenddir/ibax-front/ <span class="token punctuation">\</span>
<span class="token operator">&amp;&amp;</span> <span class="token function">yarn</span> <span class="token function">install</span>
</code></pre></div><h3 id="add-the-configuration-file-for-the-blockchain-network"><a href="#add-the-configuration-file-for-the-blockchain-network" class="header-anchor">#</a> Add the configuration file for the blockchain network </h3> <ol><li>Create a <em>settings.json</em> file that contains information about node connection:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>cp/opt/backenddir/ibax-front/public/settings.json.dist <span class="token punctuation">\</span>
 /opt/backenddir/ibax-front/public/public/settings.json
</code></pre></div><ol start="2"><li>Edit the <em>settings.json</em> file in any text editor and add the required settings in this format:</li></ol> <div class="language- extra-class"><pre class="language-text"><code>http://Node_IP-address:Node_HTTP-Port
</code></pre></div><p>Examples of <em>settings.json</em> files for the three nodes:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;fullNodes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;http://192.168.1.1:7079&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;http://192.168.1.2:7079&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;http://192.168.1.3:7079&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Build Weaver Desktop Application:</p> <ol><li>Use yarn to build the desktop version:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>cd/opt/backenddir/ibax-front <span class="token punctuation">\</span>
<span class="token operator">&amp;&amp;</span> <span class="token function">yarn</span> build-desktop
</code></pre></div><ol start="2"><li>The desktop version will be packaged into AppImage suffix format:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> release <span class="token parameter variable">--publish</span> never <span class="token parameter variable">-l</span>
</code></pre></div><p>After building, your application can be used, but its connection configuration cannot be changed. If these settings need to be changed, a new version of the application must be built.</p> <h3 id="build-weaver-web-application"><a href="#build-weaver-web-application" class="header-anchor">#</a> Build Weaver Web Application </h3> <ol><li>Build a web application:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>cd/opt/backenddir/ibax-front/ <span class="token punctuation">\</span>
<span class="token operator">&amp;&amp;</span> <span class="token function">yarn</span> build
</code></pre></div><p>After building, the redistributable files will be placed in the /build directory. You can use any web server of your choice for deployment, and the <em>settings.json</em> file must also be placed in this directory. Note that if the connection settings are changed, there is no need to build the application again. Instead, edit the <em>settings.json</em> file and restart the web server.</p> <ol><li>For development or testing purposes, you can build Yarn's web server:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">yarn</span> global <span class="token function">add</span> serve <span class="token punctuation">\</span>
<span class="token operator">&amp;&amp;</span> serve <span class="token parameter variable">-s</span> build
</code></pre></div><p>After that, your Weaver web application will be available at the following location: <code>http://localhost:5000</code>.</p> <h2 id="configure-the-blockchain-network"><a href="#configure-the-blockchain-network" class="header-anchor">#</a> Configure the blockchain network </h2> <h3 id="create-the-creator-account"><a href="#create-the-creator-account" class="header-anchor">#</a> Create the creator account </h3> <p>Create an account for the first node owner. This account is the creator of the new blockchain platform and has the administrator access.</p> <ol><li><p>Run Weaver;</p></li> <li><p>Import the existing account using the following data:</p> <p>–Load the backup of the node owner's private key located in the <code>/opt/backenddir/node1/PrivateKey</code> file.</p></li></ol> <blockquote><p>Note:</p> <p>There are two private key files in this directory. The <code>PrivateKey</code> file is used create the node owner's account. The <code>NodePrivateKey</code> file is the private key of the node itself and must be kept secret.</p></blockquote> <ol start="3"><li>After logging in to the account, since no role has been created at this time, please select the Without role option.</li></ol> <h3 id="import-applications-roles-and-templates"><a href="#import-applications-roles-and-templates" class="header-anchor">#</a> Import applications, roles and templates </h3> <p>At this time, the blockchain platform is in a blank state. You can configure it by adding roles, templates, and application frameworks that support basic ecosystem functions.</p> <ol><li>Clone the application repository;</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>cd/opt/backenddir <span class="token punctuation">\</span>
<span class="token operator">&amp;&amp;</span> <span class="token function">git</span> clone https://github.com/ibax-io/dapps.git
</code></pre></div><ol start="2"><li><p>Navigate to Developer&gt; Import in Weaver;</p></li> <li><p>Import applications as per the following order:</p></li></ol> <div class="language- extra-class"><pre class="language-text"><code> A./opt/backenddir/dapps/system.json 
 B./opt/backenddir/dapps/conditions.json 
 C./opt/backenddir/dapps/basic.json 
 D./opt/backenddir/dapps/lang_res.json
</code></pre></div><ol start="4"><li><p>Navigate to Admin&gt; Role, and click Install Default Role;</p></li> <li><p>Exit the system through the configuration file menu in the upper right corner;</p></li> <li><p>Log in to the system as Admin;</p></li> <li><p>Navigate to Home&gt; Vote&gt; Template List, and click Install Default Template.</p></li></ol> <h3 id="add-the-first-node-to-the-node-list"><a href="#add-the-first-node-to-the-node-list" class="header-anchor">#</a> Add the first node to the node list </h3> <ol><li><p>Navigate to Developer&gt; Platform Parameters, and click the first_nodes parameter;</p></li> <li><p>Specify the parameters of the first blockchain network node.</p></li></ol> <ul><li>public_key - The public key of the node is located in the <code>/opt/backenddir/node1/NodePublicKey</code> file;</li></ul> <div class="language- extra-class"><pre class="language-text"><code>{&quot;api_address&quot;:&quot;http://192.168.1.1:7079&quot;,&quot;public_key&quot;:&quot;%node_public_key%&quot;,&quot;tcp_address&quot;:&quot;192.168.1.1:7078&quot;}
</code></pre></div><h2 id="add-other-honor-nodes"><a href="#add-other-honor-nodes" class="header-anchor">#</a> Add other honor nodes </h2> <h3 id="add-members-into-the-consensus-role-group"><a href="#add-members-into-the-consensus-role-group" class="header-anchor">#</a> Add members into the consensus role group </h3> <p>By default, only members in the consensus role (Consensus) group can participate in the voting required to add other master nodes. This means that before adding a new master node, members of the ecosystem must be assigned to the role.</p> <p>In this section, the creator's account is designated as the only member of the consensus role group. In a production environment, this role must be assigned to platform members that perform governance.</p> <ol><li><p>Navigate to Home&gt; Role and click Consensus;</p></li> <li><p>Click Assign to assign the creator's account to the role.</p></li></ol> <h3 id="create-the-owner-account-for-other-nodes"><a href="#create-the-owner-account-for-other-nodes" class="header-anchor">#</a> Create the owner account for other nodes </h3> <ol><li><p>Run Weaver;</p></li> <li><p>Import the existing account using the following data:</p> <p>– Load the backup of the node owner's private key located in the <code>/opt/backenddir/node2/PrivateKey</code> file.</p></li> <li><p>After logging in to the account, since no role has been created at this time, please select the Without role option.</p></li> <li><p>Navigate to Home&gt; Personal Information, and click the title of the personal information;</p></li> <li><p>Add account details (personal information title, description, etc.).</p></li></ol> <h3 id="assign-the-node-owner-with-the-validators-role"><a href="#assign-the-node-owner-with-the-validators-role" class="header-anchor">#</a> Assign the node owner with the Validators role </h3> <ol><li>Operations by the new node owner:
<ol><li>Navigate to Home&gt; Verifier;</li> <li>Click Create Request and fill in the application form of the verifier candidate;</li> <li>Click send request.</li></ol></li> <li>Operations by the creator:
<ol><li>Log in with a consensus role (Consensus);</li> <li>Navigate to Home&gt; Verifier;</li> <li>Click the &quot;Play&quot; icon to start voting according to the candidate's request;</li> <li>Navigate to Home&gt; Vote, and click Update voting status;</li> <li>Click the voting name and vote for the node owner.</li></ol></li></ol> <p>As a result, the account of the owner of the new node is assigned with the Validator role, and the new node is added to the list of master nodes.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/IBAX-io/documentation/edit/master/docs/howtos/deployment.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">7/6/2023, 6:59:03 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d049f7ab.js" defer></script><script src="/assets/js/2.8d94a0db.js" defer></script><script src="/assets/js/67.53dadf65.js" defer></script>
  </body>
</html>
