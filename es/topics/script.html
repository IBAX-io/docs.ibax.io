<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Contratos inteligentes </a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/topics/script.html#contract-structure" class="sidebar-link">Estructura del contrato inteligente </a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/topics/script.html#data-section" class="sidebar-link">Sección de datos </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#conditions-section" class="sidebar-link">Sección de condiciones </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#action-section" class="sidebar-link">Sección de Acción </a></li></ul></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#variables" class="sidebar-link">Variables </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#nested-contracts" class="sidebar-link">Contratos inteligentes anidados </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#file-upload" class="sidebar-link">Carga de archivos </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#queries-in-json-format" class="sidebar-link">Consultas en formato JSON </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#queries-with-date-and-time-operations" class="sidebar-link">Consulta de formato de fecha y hora </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#needle-contract-language" class="sidebar-link">Lenguaje de contrato inteligente Needle </a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/topics/script.html#basic-elements-and-structure" class="sidebar-link">Basic Elements and Structure </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#data-types-and-variables" class="sidebar-link">Data Types and Variables </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#array" class="sidebar-link">Array </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#if-and-while-statements" class="sidebar-link">Declaraciones If y While </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#functions" class="sidebar-link">Funciones </a></li></ul></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#needle-functions-classification" class="sidebar-link">Clasificación de funciones de la función Needle </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#needle-functions-reference" class="sidebar-link">Referencia de la función Needle </a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/topics/script.html#appparam" class="sidebar-link">AppParam </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#dbfind" class="sidebar-link">DBFind </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#dbrow" class="sidebar-link">DBRow </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#dbselectmetrics" class="sidebar-link">DBSelectMetrics </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#ecosysparam" class="sidebar-link">EcosysParam </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#gethistory" class="sidebar-link">GetHistory </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#gethistoryrow" class="sidebar-link">GetHistoryRow </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#getcolumntype" class="sidebar-link">GetColumnType </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#getdatafromxlsx" class="sidebar-link">GetDataFromXLSX </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#getrowscountxlsx" class="sidebar-link">GetRowsCountXLSX </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#langres" class="sidebar-link">LangRes </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#getblock" class="sidebar-link">GetBlock </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#dbinsert" class="sidebar-link">DBInsert </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#dbupdate" class="sidebar-link">DBUpdate </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#dbupdateext" class="sidebar-link">DBUpdateExt </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#delcolumn" class="sidebar-link">DelColumn </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#deltable" class="sidebar-link">DelTable </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#append" class="sidebar-link">Append </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#join" class="sidebar-link">Join </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#split" class="sidebar-link">Split </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#len" class="sidebar-link">Len </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#row" class="sidebar-link">Row </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#one" class="sidebar-link">One </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#getmapkeys" class="sidebar-link">GetMapKeys </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#sortedkeys" class="sidebar-link">SortedKeys </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#callcontract" class="sidebar-link">CallContract </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#contractaccess" class="sidebar-link">ContractAccess </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#contractconditions" class="sidebar-link">ContractConditions </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#evalcondition" class="sidebar-link">EvalCondition </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#getcontractbyid" class="sidebar-link">GetContractById </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#getcontractbyname" class="sidebar-link">GetContractByName </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#roleaccess" class="sidebar-link">RoleAccess </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#transactioninfo" class="sidebar-link">TransactionInfo </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#throw" class="sidebar-link">Throw </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#validatecondition" class="sidebar-link">ValidateCondition </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#addresstoid" class="sidebar-link">AddressToId </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#idtoaddress" class="sidebar-link">IdToAddress </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#pubtoid" class="sidebar-link">PubToID </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#decodebase64" class="sidebar-link">DecodeBase64 </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#encodebase64" class="sidebar-link">EncodeBase64 </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#float" class="sidebar-link">Float </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#hextobytes" class="sidebar-link">HexToBytes </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#formatmoney" class="sidebar-link">FormatMoney </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#random" class="sidebar-link">Random </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#int" class="sidebar-link">Int </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#hash" class="sidebar-link">Hash </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#sha256" class="sidebar-link">Sha256 </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#str" class="sidebar-link">Str </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#jsonencode" class="sidebar-link">JSONEncode </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#jsonencodeindent" class="sidebar-link">JSONEncodeIndent </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#jsondecode" class="sidebar-link">JSONDecode </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#hasprefix" class="sidebar-link">HasPrefix </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#contains" class="sidebar-link">Contains </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#replace" class="sidebar-link">Replace </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#size" class="sidebar-link">Size </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#sprintf" class="sidebar-link">Sprintf </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#substr" class="sidebar-link">Substr </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#tolower" class="sidebar-link">ToLower </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#toupper" class="sidebar-link">ToUpper </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#trimspace" class="sidebar-link">TrimSpace </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#floor" class="sidebar-link">Floor </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#log" class="sidebar-link">Log </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#log10" class="sidebar-link">Log10 </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#pow" class="sidebar-link">Pow </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#round" class="sidebar-link">Round </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#sqrt" class="sidebar-link">Sqrt </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#stringtobytes" class="sidebar-link">StringToBytes </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#bytestostring" class="sidebar-link">BytesToString </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#sysparamstring" class="sidebar-link">SysParamString </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#sysparamint" class="sidebar-link">SysParamInt </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#dbupdatesysparam" class="sidebar-link">DBUpdateSysParam </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#updatenotifications" class="sidebar-link">UpdateNotifications </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#updaterolesnotifications" class="sidebar-link">UpdateRolesNotifications </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#httprequest" class="sidebar-link">HTTPRequest </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#httppostjson" class="sidebar-link">HTTPPostJSON </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#blocktime" class="sidebar-link">BlockTime </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#datetime" class="sidebar-link">DateTime </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#unixdatetime" class="sidebar-link">UnixDateTime </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#createobs" class="sidebar-link">CreateOBS </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#getobslist" class="sidebar-link">GetOBSList </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#runobs" class="sidebar-link">RunOBS </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#stopobs" class="sidebar-link">StopOBS </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#removeobs" class="sidebar-link">RemoveOBS </a></li></ul></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#system-contracts" class="sidebar-link">System Contracts </a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/topics/script.html#newecosystem" class="sidebar-link">NewEcosystem </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#editecosystemname" class="sidebar-link">EditEcosystemName </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#newcontract" class="sidebar-link">NewContract </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#editcontract" class="sidebar-link">EditContract </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#bindwallet" class="sidebar-link">BindWallet </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#unbindwallet" class="sidebar-link">UnbindWallet </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#newparameter" class="sidebar-link">Nuevo parámetro </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#editparameter" class="sidebar-link">EditParameter </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#newmenu" class="sidebar-link">NewMenu </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#editmenu" class="sidebar-link">EditMenu </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#appendmenu" class="sidebar-link">AppendMenu </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#newpage" class="sidebar-link">NewPage </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#editpage" class="sidebar-link">EditPage </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#appendpage" class="sidebar-link">AppendPage </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#newblock" class="sidebar-link">NewBlock </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#editblock" class="sidebar-link">EditBlock </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#newtable" class="sidebar-link">NewTable </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#edittable" class="sidebar-link">EditTable </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#newcolumn" class="sidebar-link">NewColumn </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#editcolumn" class="sidebar-link">EditColumn </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#newlang" class="sidebar-link">NewLang </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#editlang" class="sidebar-link">EditLang </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#import" class="sidebar-link">Import </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#importupload" class="sidebar-link">ImportUpload </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#newappparam" class="sidebar-link">NewAppParam </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#editappparam" class="sidebar-link">EditAppParam </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#newdelayedcontract" class="sidebar-link">NewDelayedContract </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#editdelayedcontract" class="sidebar-link">EditDelayedContract </a></li><li class="sidebar-sub-header"><a href="/es/topics/script.html#uploadbinary" class="sidebar-link">UploadBinary </a></li></ul></li></ul></li><li><a href="/es/topics/templates2.html" class="sidebar-link">Lenguaje de plantillas </a></li><li><a href="/es/topics/vm.html" class="sidebar-link">Compilador y máquina virtual </a></li><li><a href="/es/topics/daemons.html" class="sidebar-link">Demonio </a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="smart-contracts"><a href="#smart-contracts" class="header-anchor">#</a> Contratos inteligentes </h1> <ul><li><a href="#contract-structure">Estructura de los contratos inteligentes</a> <ul><li><a href="#data-section">Sección de datos</a></li> <li><a href="#conditions-section">Sección de condiciones</a></li> <li><a href="#action-section">Sección de acciones</a></li></ul></li> <li><a href="#variables">Variables</a></li> <li><a href="#nested-contracts">Contratos inteligentes anidados</a></li> <li><a href="#file-upload">Carga de archivos</a></li> <li><a href="#queries-in-json-format">Consultas en formato JSON</a></li> <li><a href="#queries-with-date-and-time-operations">Consultas con operaciones de fecha y hora</a></li> <li><a href="#needle-contract-language">Lenguaje de contrato inteligente Needle</a> <ul><li><a href="#basic-elements-and-structure">Elementos y estructura básicos</a></li> <li><a href="#data-types-and-variables">Tipos de datos y variables</a></li> <li><a href="#array">Arreglos</a></li> <li><a href="#if-and-while-statements">Sentencias If y While</a></li> <li><a href="#functions">Funciones</a> <ul><li><a href="#function-declaration">Declaración de funciones</a></li> <li><a href="#variable-length-parameters">Parámetros de longitud variable</a></li> <li><a href="#optional-parameters">Parámetros opcionales</a></li></ul></li></ul></li> <li><a href="#needle-functions-classification">Clasificación de funciones Needle</a></li> <li><a href="#needle-functions-reference">Referencia de funciones Needle</a> <ul><li><a href="#appparam">AppParam</a></li> <li><a href="#dbfind">DBFind</a></li> <li><a href="#dbrow">DBRow</a></li> <li><a href="#dbselectmetrics">DBSelectMetrics</a></li> <li><a href="#ecosysparam">EcosysParam</a></li> <li><a href="#gethistory">GetHistory</a></li> <li><a href="#gethistoryrow">GetHistoryRow</a></li> <li><a href="#getcolumntype">GetColumnType</a></li> <li><a href="#getdatafromxlsx">GetDataFromXLSX</a></li> <li><a href="#getrowscountxlsx">GetRowsCountXLSX</a></li> <li><a href="#langres">LangRes</a></li> <li><a href="#getblock">GetBlock</a></li> <li><a href="#dbinsert">DBInsert</a></li> <li><a href="#dbupdate">DBUpdate</a></li> <li><a href="#dbupdateext">DBUpdateExt</a></li> <li><a href="#delcolumn">DelColumn</a></li> <li><a href="#deltable">DelTable</a></li> <li><a href="#append">Append</a></li> <li><a href="#join">Join</a></li> <li><a href="#split">Split</a></li> <li><a href="#len">Len</a></li> <li><a href="#row">Row</a></li> <li><a href="#one">One</a></li> <li><a href="#getmapkeys">GetMapKeys</a></li> <li><a href="#sortedkeys">SortedKeys</a></li> <li><a href="#callcontract">CallContract</a></li> <li><a href="#contractaccess">ContractAccess</a></li> <li><a href="#contractconditions">ContractConditions</a></li> <li><a href="#evalcondition">EvalCondition</a></li> <li><a href="#getcontractbyid">GetContractById</a></li> <li><a href="#getcontractbyname">GetContractByName</a></li> <li><a href="#roleaccess">RoleAccess</a></li> <li><a href="#transactioninfo">TransactionInfo</a></li> <li><a href="#throw">Throw</a></li> <li><a href="#validatecondition">ValidateCondition</a></li> <li><a href="#addresstoid">AddressToId</a></li> <li><a href="#idtoaddress">IdToAddress</a></li> <li><a href="#pubtoid">PubToID</a></li> <li><a href="#decodebase64">DecodeBase64</a></li> <li><a href="#encodebase64">EncodeBase64</a></li> <li><a href="#float">Float</a></li> <li><a href="#hextobytes">HexToBytes</a></li> <li><a href="#formatmoney">FormatMoney</a></li> <li><a href="#random">Random</a></li> <li><a href="#int">Int</a></li> <li><a href="#hash">Hash</a></li> <li><a href="#sha256">Sha256</a></li> <li><a href="#str">Str</a></li> <li><a href="#jsonencode">JSONEncode</a></li> <li><a href="#jsonencodeindent">JSONEncodeIndent</a></li> <li><a href="#jsondecode">JSONDecode</a></li> <li><a href="#hasprefix">HasPrefix</a></li> <li><a href="#contains">Contains</a></li> <li><a href="#replace">Replace</a></li> <li><a href="#size">Size</a></li> <li><a href="#sprintf">Sprintf</a></li> <li><a href="#substr">Substr</a></li> <li><a href="#tolower">ToLower</a></li> <li><a href="#toupper">ToUpper</a></li> <li><a href="#trimspace">TrimSpace</a></li> <li><a href="#floor">Floor</a></li> <li><a href="#log">Log</a></li> <li><a href="#log10">Log10</a></li> <li><a href="#pow">Pow</a></li> <li><a href="#round">Round</a></li> <li><a href="#sqrt">Sqrt</a></li> <li><a href="#stringtobytes">StringToBytes</a></li> <li><a href="#bytestostring">BytesToString</a></li> <li><a href="#sysparamstring">SysParamString</a></li> <li><a href="#sysparamint">SysParamInt</a></li> <li><a href="#dbupdatesysparam">DBUpdateSysParam</a></li> <li><a href="#updatenotifications">UpdateNotifications</a></li> <li><a href="#updaterolesnotifications">UpdateRolesNotifications</a></li> <li><a href="#httprequest">HTTPRequest</a></li> <li><a href="#httppostjson">HTTPPostJSON</a></li> <li><a href="#blocktime">BlockTime</a></li> <li><a href="#datetime">DateTime</a></li> <li><a href="#unixdatetime">UnixDateTime</a></li> <li><a href="#createobs">CreateOBS</a></li> <li><a href="#getobslist">GetOBSList</a></li> <li><a href="#runobs">RunOBS</a></li> <li><a href="#stopobs">StopOBS</a></li> <li><a href="#removeobs">RemoveOBS</a></li></ul></li> <li><a href="#system-contracts">Sistema de contratos inteligentes.</a> <ul><li><a href="#newecosystem">NewEcosystem</a></li> <li><a href="#editecosystemname">EditEcosystemName</a></li> <li><a href="#newcontract">NewContract</a></li> <li><a href="#editcontract">EditContract</a></li> <li><a href="#bindwallet">BindWallet</a></li> <li><a href="#unbindwallet">UnbindWallet</a></li> <li><a href="#newparameter">NewParameter</a></li> <li><a href="#editparameter">EditParameter</a></li> <li><a href="#newmenu">NewMenu</a></li> <li><a href="#editmenu">EditMenu</a></li> <li><a href="#appendmenu">AppendMenu</a></li> <li><a href="#newpage">NewPage</a></li> <li><a href="#editpage">EditPage</a></li> <li><a href="#appendpage">AppendPage</a></li> <li><a href="#newblock">NewBlock</a></li> <li><a href="#editblock">EditBlock</a></li> <li><a href="#newtable">NewTable</a></li> <li><a href="#edittable">EditTable</a></li> <li><a href="#newcolumn">NewColumn</a></li> <li><a href="#editcolumn">EditColumn</a></li> <li><a href="#newlang">NewLang</a></li> <li><a href="#editlang">EditLang</a></li> <li><a href="#import">Import</a></li> <li><a href="#importupload">ImportUpload</a></li> <li><a href="#newappparam">NewAppParam</a></li> <li><a href="#editappparam">EditAppParam</a></li> <li><a href="#newdelayedcontract">NewDelayedContract</a></li> <li><a href="#editdelayedcontract">EditDelayedContract</a></li> <li><a href="#uploadbinary">UploadBinary</a></li></ul></li></ul> <p>Los contratos inteligentes (en adelante, &quot;contratos&quot;) son los elementos básicos de las aplicaciones. Los usuarios ejecutan contratos inteligentes en la página web generalmente como una sola operación, lo que resulta en la modificación o creación de entradas en la base de datos. Todas las operaciones de datos de la aplicación forman el sistema de contratos inteligentes, que interactúan entre sí a través de la base de datos o las funciones del contenido del contrato inteligente.</p> <h2 id="contract-structure"><a href="#contract-structure" class="header-anchor">#</a> Estructura del contrato inteligente </h2> <p>Se utiliza la palabra clave <strong>contract</strong> para declarar un contrato inteligente, seguido del nombre del contrato inteligente. El contenido del contrato inteligente debe estar entre llaves. La estructura del contrato inteligente consta de tres partes principales:</p> <blockquote><ol><li><strong>data</strong> - <a href="#data-section">Sección de datos</a>, que declara las variables de entrada de datos, incluyendo el nombre y el tipo de las variables;</li> <li><strong>conditions</strong> - <a href="#conditions-section">Sección de condiciones</a>, que verifica la corrección de los datos;</li> <li><strong>action</strong> - <a href="#action-section">Sección de acción</a>, que ejecuta las acciones de operación de datos.</li></ol></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>contract MyContract <span class="token punctuation">{</span>
    data <span class="token punctuation">{</span>
        FromId int
        ToId   int
        Amount money
    <span class="token punctuation">}</span>
    func conditions <span class="token punctuation">{</span>
        <span class="token operator">...</span>
    <span class="token punctuation">}</span>
    func action <span class="token punctuation">{</span>
        <span class="token operator">...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="data-section"><a href="#data-section" class="header-anchor">#</a> Sección de datos </h3> <p>La sección <code>data</code> describe la entrada de datos del contrato inteligente y los parámetros de formulario recibidos.</p> <p>La estructura de cada línea es la siguiente:</p> <blockquote><ul><li><em>Nombre de la variable</em> - Solo acepta variables, no admite matrices;</li> <li><em>Tipo de datos de la variable</em> - <a href="#data-types-and-variables">Tipo de datos</a> de la variable;</li> <li><em>opcional</em> - Parámetro opcional, elementos de formulario que no necesitan ser completados.</li></ul></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>contract my <span class="token punctuation">{</span>
  data <span class="token punctuation">{</span>
      Name string
      RequestId int
      Photo file <span class="token string">&quot;optional&quot;</span>
      Amount money
      Private bytes
  <span class="token punctuation">}</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="conditions-section"><a href="#conditions-section" class="header-anchor">#</a> Sección de condiciones </h3> <p>La sección <code>conditions</code> describe la validación de los datos recibidos.</p> <p>Los siguientes comandos se utilizan para advertencias de error: error de gravedad <code>error</code>, error de advertencia <code>warning</code>, error de información <code>info</code>. Los tres comandos generarán un error que detendrá la ejecución del contrato inteligente y cada error imprimirá información de registro de error de un tipo diferente. Por ejemplo:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> fuel <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
      error <span class="token string">&quot;fuel cannot be zero!&quot;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> money <span class="token operator">&lt;</span> limit <span class="token punctuation">{</span>
      warning <span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;You don't have enough money: %v &lt; %v&quot;</span><span class="token punctuation">,</span> money<span class="token punctuation">,</span> limit<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> idexist <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
      info <span class="token string">&quot;You have already been registered&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="action-section"><a href="#action-section" class="header-anchor">#</a> Sección de Acción </h3> <p>La sección <code>action</code> describe el código principal del contrato inteligente, que recupera otros datos y registra los valores de resultado en una tabla de base de datos. Por ejemplo:</p> <div class="language-js extra-class"><pre class="language-js"><code>action <span class="token punctuation">{</span>
    <span class="token function">DBUpdate</span><span class="token punctuation">(</span><span class="token string">&quot;keys&quot;</span><span class="token punctuation">,</span> $key_id<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string-property property">&quot;-amount&quot;</span><span class="token operator">:</span> $amount<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">DBUpdate</span><span class="token punctuation">(</span><span class="token string">&quot;keys&quot;</span><span class="token punctuation">,</span> $recipient<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string-property property">&quot;+amount&quot;</span><span class="token operator">:</span> $amount<span class="token punctuation">,</span> <span class="token string-property property">&quot;pub&quot;</span><span class="token operator">:</span> $Pub<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="variables"><a href="#variables" class="header-anchor">#</a> Variables </h2> <p>Las variables declaradas en la sección <strong>data</strong> se pasan a otras partes del contrato inteligente usando el símbolo <code>$</code> seguido del nombre de la variable. El símbolo <code>$</code> también se puede usar para declarar variables que no están en la sección de datos. Estas variables se consideran variables globales para este contrato inteligente y todos los contratos inteligentes anidados.</p> <p>Se pueden usar variables predefinidas dentro del contrato inteligente, que contienen datos de transacción para la llamada al contrato inteligente:</p> <blockquote><ul><li><code>$time</code> -- Marca de tiempo de la transacción;</li> <li><code>$ecosystem_id</code> -- ID del ecosistema;</li> <li><code>$block</code> -- ID del bloque que contiene la transacción;</li> <li><code>$key_id</code> -- Dirección de la cuenta que firmó la transacción actual;</li> <li><code>$type</code> -- ID del contrato inteligente en la máquina virtual;</li> <li><code>$block_key_id</code> -- Dirección de la cuenta del nodo que generó el bloque;</li> <li><code>$block_time</code> -- Marca de tiempo de generación del bloque;</li> <li><code>$original_contract</code> -- El nombre del contrato inteligente que procesó originalmente la transacción. Si esta variable es una cadena vacía, significa que el contrato inteligente fue llamado durante el proceso de verificación. Para verificar si el contrato inteligente fue llamado por otro contrato inteligente o directamente desde la transacción, es necesario comparar los valores de <em>$original_contract</em> y <em>$this_contract</em>. Si son iguales, significa que el contrato inteligente fue llamado directamente desde la transacción;</li> <li><code>$this_contract</code> -- El nombre del contrato inteligente que se está ejecutando actualmente;</li> <li><code>$guest_key</code> -- Dirección de la cuenta de invitado;</li> <li><code>$stack</code> -- Pila de matriz de contrato inteligente, de tipo <em>array</em>, que contiene todos los contratos inteligentes ejecutados, con el primer elemento de la matriz que representa el nombre del contrato inteligente que se está ejecutando actualmente y el último elemento que representa el nombre del contrato inteligente que procesó originalmente la transacción;</li> <li><code>$node_position</code> -- Número de índice de la matriz de nodos de validación donde se encuentra el bloque;</li> <li><code>$txhash</code> -- Hash de transacción;</li> <li><code>$contract</code> -- Matriz de estructura de contrato inteligente actual.</li></ul></blockquote> <p>Las variables predefinidas no solo se pueden acceder dentro del contrato inteligente, sino también en los campos de permiso que definen las condiciones de acceso para los elementos de la aplicación. Cuando se usan en campos de permiso, las variables predefinidas relacionadas con la información del bloque siempre son iguales a cero, como <code>$time</code>, <code>$block</code>, etc.</p> <p>La variable predefinida <code>$result</code> se asigna al resultado de retorno del contrato inteligente.</p> <div class="language-js extra-class"><pre class="language-js"><code>contract my <span class="token punctuation">{</span>
  data <span class="token punctuation">{</span>
      Name string 
      Amount money
  <span class="token punctuation">}</span>
  func conditions <span class="token punctuation">{</span>
      <span class="token keyword">if</span> $Amount <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token punctuation">{</span>
         error <span class="token string">&quot;Amount cannot be 0&quot;</span>
      <span class="token punctuation">}</span>
      $ownerId <span class="token operator">=</span> <span class="token number">1232</span>
  <span class="token punctuation">}</span>
  func action <span class="token punctuation">{</span>
      <span class="token keyword">var</span> amount money
      amount <span class="token operator">=</span> $Amount <span class="token operator">-</span> <span class="token number">10</span>
      <span class="token function">DBUpdate</span><span class="token punctuation">(</span><span class="token string">&quot;mytable&quot;</span><span class="token punctuation">,</span> $ownerId<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> $Name<span class="token punctuation">,</span><span class="token literal-property property">amount</span><span class="token operator">:</span> amount<span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token function">DBUpdate</span><span class="token punctuation">(</span><span class="token string">&quot;mytable2&quot;</span><span class="token punctuation">,</span> $ownerId<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">amount</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="nested-contracts"><a href="#nested-contracts" class="header-anchor">#</a> Contratos inteligentes anidados </h2> <p>En la sección de <em>condiciones</em> y <em>acción</em> de un contrato inteligente, se pueden anidar otros contratos inteligentes. Los contratos inteligentes anidados se pueden llamar directamente, y los parámetros del contrato inteligente se especifican entre paréntesis después del nombre del contrato inteligente, por ejemplo, <code>@1NameContract(Params)</code>. También se puede llamar utilizando la función <a href="#callcontract">CallContract</a>.</p> <h2 id="file-upload"><a href="#file-upload" class="header-anchor">#</a> Carga de archivos </h2> <p>Para cargar archivos en un formulario utilizando el formato <code>multipart/form-data</code>, el tipo de datos del contrato inteligente debe ser <code>file</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code>contract Upload <span class="token punctuation">{</span>
    data <span class="token punctuation">{</span>
        File file
    <span class="token punctuation">}</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a href="#uploadbinary">UploadBinary</a> es un contrato inteligente utilizado para cargar y almacenar archivos. En el editor de páginas, se puede utilizar la función <a href="/es/topics/templates2.html#binary">Binary</a> del lenguaje Logicor para obtener el enlace de descarga del archivo.</p> <h2 id="queries-in-json-format"><a href="#queries-in-json-format" class="header-anchor">#</a> Consultas en formato JSON </h2> <p>En el lenguaje de contrato inteligente, el tipo de formato <strong>JSON</strong> se puede especificar como tipo de campo. Se utiliza la sintaxis:
<strong>columnname-&gt;fieldname</strong> para manejar los campos de entrada. El valor obtenido se registra en <strong>columnname.fieldname</strong>.</p> <p>La sintaxis anterior se puede utilizar en las funciones <em>Columns, One, Where</em> de <a href="/es/topics/templates2.html#dbfind">DBFind</a>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> ret map
<span class="token keyword">var</span> val str
<span class="token keyword">var</span> list array
ret <span class="token operator">=</span> <span class="token function">DBFind</span><span class="token punctuation">(</span><span class="token string">&quot;mytable&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Columns</span><span class="token punctuation">(</span><span class="token string">&quot;myname,doc,doc-&gt;ind&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">WhereId</span><span class="token punctuation">(</span>$Id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Row</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
val <span class="token operator">=</span> ret<span class="token punctuation">[</span><span class="token string">&quot;doc.ind&quot;</span><span class="token punctuation">]</span>
val <span class="token operator">=</span> <span class="token function">DBFind</span><span class="token punctuation">(</span><span class="token string">&quot;mytable&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Columns</span><span class="token punctuation">(</span><span class="token string">&quot;myname,doc-&gt;type&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">WhereId</span><span class="token punctuation">(</span>$Id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">One</span><span class="token punctuation">(</span><span class="token string">&quot;doc-&gt;type&quot;</span><span class="token punctuation">)</span>
list <span class="token operator">=</span> <span class="token function">DBFind</span><span class="token punctuation">(</span><span class="token string">&quot;mytable&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Columns</span><span class="token punctuation">(</span><span class="token string">&quot;myname,doc,doc-&gt;ind&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token string">&quot;doc-&gt;ind = ?&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;101&quot;</span><span class="token punctuation">)</span>
val <span class="token operator">=</span> <span class="token function">DBFind</span><span class="token punctuation">(</span><span class="token string">&quot;mytable&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">WhereId</span><span class="token punctuation">(</span>$Id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">One</span><span class="token punctuation">(</span><span class="token string">&quot;doc-&gt;check&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="queries-with-date-and-time-operations"><a href="#queries-with-date-and-time-operations" class="header-anchor">#</a> Consulta de formato de fecha y hora </h2> <p>Las funciones del lenguaje de contrato inteligente no pueden consultar ni actualizar directamente la fecha y hora, pero se pueden utilizar las funciones y características de PostgreSQL en la cláusula Where, como se muestra en el ejemplo.
Por ejemplo, si se necesita comparar el campo <em>date_column</em> con la hora actual y <em>date_column</em> es de tipo timestamp, la expresión sería <code>date_column &lt; NOW()</code>;
si <em>date_column</em> es de tipo Unix, la expresión sería <code>to_timestamp(date_column) &gt; NOW()</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">Where</span><span class="token punctuation">(</span><span class="token string">&quot;to_timestamp(date_column) &gt; NOW()&quot;</span><span class="token punctuation">)</span>
<span class="token function">Where</span><span class="token punctuation">(</span><span class="token string">&quot;date_column &lt; NOW() - 30 * interval '1 day'&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>La función Needle a continuación se encarga de procesar fechas y horas en formato SQL:</p> <ul><li><a href="#blocktime">BlockTime</a></li> <li><a href="#datetime">DateTime</a></li> <li><a href="#unixdatetime">UnixDateTime</a></li></ul> <h2 id="needle-contract-language"><a href="#needle-contract-language" class="header-anchor">#</a> Lenguaje de contrato inteligente Needle </h2> <p>Este lenguaje incluye un conjunto de funciones, operadores y estructuras que permiten procesar algoritmos de datos y operaciones de base de datos.</p> <p>En caso de que se tenga permiso para editar el contrato inteligente y la condición de permiso no sea <code>false</code>, se pueden realizar cambios en el contenido del contrato inteligente. El historial completo de cambios realizados en el contrato inteligente se almacena en la cadena de bloques y se puede conocer a través de Weaver.</p> <p>Las operaciones de datos en la cadena de bloques son ejecutadas por la versión más reciente del contrato inteligente.</p> <h3 id="basic-elements-and-structure"><a href="#basic-elements-and-structure" class="header-anchor">#</a> Basic Elements and Structure </h3> <h3 id="data-types-and-variables"><a href="#data-types-and-variables" class="header-anchor">#</a> Data Types and Variables </h3> <p>Cada variable debe definir un tipo de datos, por lo general, el tipo de datos se convierte automáticamente. Se pueden utilizar los siguientes tipos de datos:</p> <blockquote><ul><li><p><code>bool</code> - valores booleanos, <code>true</code> y <code>false</code>;</p></li> <li><p><code>bytes</code> - formato de bytes;</p></li> <li><p><code>int</code> - entero de 64 bits;</p></li> <li><p><code>array</code> - matriz de valores de cualquier tipo;</p></li> <li><p><code>map</code> - matriz de objetos;</p></li> <li><p><code>money</code> - tipo de entero grande;</p></li> <li><p><code>float</code> - flotante de 64 bits;</p></li> <li><p><code>string</code> - cadena de caracteres, entre comillas dobles o formato de escape: &quot;This is a string&quot; o `This is a string`;</p></li> <li><p><code>file</code> - matriz de objetos:</p> <blockquote><ul><li><code>Name</code> - nombre del archivo, tipo <code>string</code>;</li> <li><code>MimeType</code> - formato de archivo <strong>mime-type</strong>, tipo <code>string</code>;</li> <li><code>Body</code> - contenido del archivo, tipo <code>bytes</code>.</li></ul></blockquote></li></ul></blockquote> <p>Todos los identificadores, incluidos los nombres de variables, funciones y contratos inteligentes, son sensibles a mayúsculas y minúsculas (MyFunc y myFunc son nombres diferentes).</p> <p>Se utiliza la palabra clave <strong>var</strong> para declarar una variable, seguida del nombre y tipo de la variable. Las variables declaradas dentro de llaves deben ser utilizadas dentro de la misma pareja de llaves.</p> <p>Las variables declaradas tienen un valor predeterminado de cero: el valor cero para los tipos de datos booleanos es <code>false</code>, el valor cero para todos los tipos de datos numéricos es <code>0</code>, el valor cero para los tipos de datos de cadena es una cadena vacía. Ejemplo de declaración de variable:</p> <div class="language-js extra-class"><pre class="language-js"><code>func <span class="token function">myfunc</span><span class="token punctuation">(</span> val int<span class="token punctuation">)</span> int <span class="token punctuation">{</span>
    <span class="token keyword">var</span> mystr1 mystr2 string<span class="token punctuation">,</span> mypar int
    <span class="token keyword">var</span> checked bool
    <span class="token operator">...</span>
    <span class="token keyword">if</span> checked <span class="token punctuation">{</span>
         <span class="token keyword">var</span> temp int
         <span class="token operator">...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="array"><a href="#array" class="header-anchor">#</a> Array </h3> <p>Este lenguaje admite dos tipos de arrays:</p> <ul><li><code>array</code> - un array con índices que comienzan en 0;</li> <li><code>map</code> - un array de objetos.</li></ul> <p>Cuando se asignan y recuperan elementos de un array, el índice debe estar entre corchetes. Los arrays no admiten múltiples índices, no se puede tratar un elemento de un array como <em>myarr[i][j]</em>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> myarr array
<span class="token keyword">var</span> mymap map
<span class="token keyword">var</span> s string

myarr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>
myarr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;This is a line&quot;</span>
mymap<span class="token punctuation">[</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">777</span>
mymap<span class="token punctuation">[</span><span class="token string">&quot;param&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Parameter&quot;</span>

s <span class="token operator">=</span> <span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;%v, %v, %v&quot;</span><span class="token punctuation">,</span> myarr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> mymap<span class="token punctuation">[</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> myarr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> mymap<span class="token punctuation">[</span><span class="token string">&quot;param&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// s = 877, This is a line, Parameter</span>
</code></pre></div><p>Puedes definir un tipo de <code>array</code> especificando los elementos en <code>[]</code>. Para los arrays de tipo <code>map</code>, utiliza <code>{}</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> my map
my<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string-property property">&quot;key1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;value1&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">key2</span><span class="token operator">:</span> i<span class="token punctuation">,</span> <span class="token string-property property">&quot;key3&quot;</span><span class="token operator">:</span> $Name<span class="token punctuation">}</span>
<span class="token keyword">var</span> mya array
mya<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&quot;value1&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">key2</span><span class="token operator">:</span> i<span class="token punctuation">}</span><span class="token punctuation">,</span> $Name<span class="token punctuation">]</span>
</code></pre></div><p>Puede utilizar esta inicialización en expresiones, por ejemplo, en los parámetros de una función.</p> <div class="language-js extra-class"><pre class="language-js"><code>DBFind<span class="token operator">...</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Para matrices de objetos, debes especificar una clave. La clave se especifica como una cadena entre comillas dobles (<code>&quot;&quot;</code>). Si el nombre de la clave solo contiene letras, números y guiones bajos, se pueden omitir las comillas dobles.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span><span class="token literal-property property">key1</span><span class="token operator">:</span> <span class="token string">&quot;value1&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">key2</span><span class="token operator">:</span> <span class="token string">&quot;value2&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p>El array puede contener cadenas de texto, números, cualquier tipo de nombre de variable y nombres de variable con el símbolo <code>$</code>. Admite arrays anidados, donde se pueden especificar diferentes mapeos o arrays como valores.</p> <p>Las expresiones no pueden ser utilizadas como elementos de un array. En su lugar, se debe utilizar una variable para almacenar el resultado de la expresión y especificar esa variable como elemento del array.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token function">myfunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token punctuation">[</span><span class="token string">&quot;param&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment">// don't do this</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3.4</span><span class="token punctuation">,</span> mystr<span class="token punctuation">,</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span> $ext<span class="token punctuation">,</span> myarr<span class="token punctuation">,</span> mymap<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string-property property">&quot;ids&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span> i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">company</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string-property property">&quot;Name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MyCompany&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token punctuation">]</span> <span class="token comment">// this is ok</span>

<span class="token keyword">var</span> val string
val <span class="token operator">=</span> my<span class="token punctuation">[</span><span class="token string">&quot;param&quot;</span><span class="token punctuation">]</span>
<span class="token function">MyFunc</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">key</span><span class="token operator">:</span> val<span class="token punctuation">,</span> <span class="token literal-property property">sub</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;My name&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;color&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Red&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="if-and-while-statements"><a href="#if-and-while-statements" class="header-anchor">#</a> Declaraciones If y While </h3> <p>El lenguaje de contrato inteligente admite declaraciones de condición estándar <strong>if</strong> y bucles <strong>while</strong>, que se pueden utilizar en contratos inteligentes y funciones. Estas declaraciones se pueden anidar entre sí.</p> <p>Después de las palabras clave <strong>if</strong> y <strong>while</strong>, debe seguir una declaración de condición. Si la declaración de condición devuelve un número, se considera <em>falso</em> cuando su valor es 0.</p> <p><em>val == 0</em> es igual a <em>!val</em>, <em>val != 0</em> es igual a <em>val</em>. La declaración <strong>if</strong> puede tener un bloque de código <strong>else</strong>, que se ejecuta cuando la declaración de condición <strong>if</strong> es <em>falsa</em>.</p> <p>Los siguientes operadores de comparación se pueden utilizar en declaraciones de condición: <code>&lt;, &gt;, &gt;=, &lt;=, ==, !=, ||, &amp;&amp;</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> val <span class="token operator">&gt;</span> <span class="token number">10</span> <span class="token operator">||</span> id <span class="token operator">!=</span> $block_key_id <span class="token punctuation">{</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>El bucle <strong>while</strong> ejecuta el bloque de código mientras la declaración de condición sea <em>verdadera</em>. La instrucción <strong>break</strong> se utiliza para salir del bucle, mientras que la instrucción <strong>continue</strong> se utiliza para saltar al inicio del bucle y continuar con la siguiente iteración.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> i int
<span class="token keyword">while</span> <span class="token boolean">true</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> i <span class="token operator">&gt;</span> <span class="token number">100</span> <span class="token punctuation">{</span>
        <span class="token keyword">break</span>
    <span class="token punctuation">}</span>
    <span class="token operator">...</span>
    <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">50</span> <span class="token punctuation">{</span>
        <span class="token keyword">continue</span>
    <span class="token punctuation">}</span>
    <span class="token operator">...</span>
    i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Aparte de las declaraciones condicionales, needle también admite operaciones aritméticas estándar: <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>.</p> <p>Los tipos de datos <strong>string</strong> y <strong>bytes</strong> se pueden utilizar como declaraciones condicionales. Si la longitud del tipo es mayor que cero, la condición es <em>verdadera</em>, de lo contrario es <em>falsa</em>.</p> <h3 id="functions"><a href="#functions" class="header-anchor">#</a> Funciones </h3> <p>Las funciones pueden realizar operaciones en los datos recibidos por la sección de datos del contrato inteligente: leer y escribir datos en la base de datos, convertir tipos de valores y establecer interacciones entre contratos inteligentes.</p> <h4 id="function-declaration"><a href="#function-declaration" class="header-anchor">#</a> Declaración de funciones </h4> <p>Se utiliza la palabra clave <strong>func</strong> para declarar una función, seguida del nombre de la función y la lista de argumentos y sus tipos de datos que se le pasan. Todos los argumentos se encierran entre paréntesis y se separan por comas. Después de los paréntesis, se debe declarar el tipo de datos del valor de retorno de la función. El cuerpo de la función debe estar entre llaves. Si la función no tiene argumentos, las llaves pueden omitirse.
Se utiliza la palabra clave <code>return</code> para devolver el valor de retorno de la función.</p> <div class="language-js extra-class"><pre class="language-js"><code>func <span class="token function">myfunc</span><span class="token punctuation">(</span>left int<span class="token punctuation">,</span> right int<span class="token punctuation">)</span> int <span class="token punctuation">{</span>
    <span class="token keyword">return</span> left<span class="token operator">*</span>right <span class="token operator">+</span> left <span class="token operator">-</span> right
<span class="token punctuation">}</span>
func test int <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">myfunc</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">myfunc</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
func ooops <span class="token punctuation">{</span>
    error <span class="token string">&quot;Ooops...&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>La función no devolverá errores ya que todas las comprobaciones de errores se realizan automáticamente. Cuando se produce un error en cualquier función, el contrato inteligente detendrá su operación y mostrará una ventana que contiene una descripción del error.</p> <h4 id="variable-length-parameters"><a href="#variable-length-parameters" class="header-anchor">#</a> Parámetros de longitud variable </h4> <p>Las funciones pueden definir parámetros de longitud variable utilizando el símbolo <code>...</code> como el último tipo de parámetro de la función, lo que indica que es un parámetro de longitud variable y su tipo de datos es <code>array</code>. El parámetro de longitud variable contiene todas las variables desde la variable que se pasa al llamar a la función. Se pueden pasar variables de cualquier tipo, pero debe manejar conflictos con tipos de datos que no coinciden.</p> <div class="language-js extra-class"><pre class="language-js"><code>func <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">out string<span class="token punctuation">,</span> values <span class="token operator">...</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> i<span class="token punctuation">,</span> res int

    <span class="token keyword">while</span> i <span class="token operator">&lt;</span> <span class="token function">Len</span><span class="token punctuation">(</span><span class="token parameter">values</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       res <span class="token operator">=</span> res <span class="token operator">+</span> values<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
       i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
    <span class="token function">Println</span><span class="token punctuation">(</span>out<span class="token punctuation">,</span> res<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

func <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token function">sum</span><span class="token punctuation">(</span><span class="token string">&quot;Sum:&quot;</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="optional-parameters"><a href="#optional-parameters" class="header-anchor">#</a> Parámetros opcionales </h4> <p>Una función puede tener muchos parámetros, pero a veces solo necesitamos algunos de ellos al llamarla. En este caso, podemos declarar parámetros opcionales de la siguiente manera: <code>func myfunc(name string).Param1(param string).Param2(param2 int) {...}</code>, lo que nos permite llamar a la función y especificar los parámetros en cualquier orden: <code>myfunc(&quot;name&quot;).Param2(100)</code>.</p> <p>Dentro del cuerpo de la función, podemos manejar estas variables como lo haríamos normalmente. Si no se llama a un parámetro opcional específico, su valor predeterminado será cero.
También podemos usar <code>...</code> para especificar parámetros de longitud variable: <code>func DBFind(table string).Where(request string, params ...)</code>. Luego podemos llamarlo así: <code>DBFind(&quot;mytable&quot;).Where({&quot;id&quot;: $myid, &quot;type&quot;: 2})</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code>func <span class="token function">DBFind</span><span class="token punctuation">(</span>table string<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Columns</span><span class="token punctuation">(</span>columns string<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>format string<span class="token punctuation">,</span> tail <span class="token operator">...</span><span class="token punctuation">)</span>
         <span class="token punctuation">.</span><span class="token function">Limit</span><span class="token punctuation">(</span>limit int<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Offset</span><span class="token punctuation">(</span>offset int<span class="token punctuation">)</span> string  <span class="token punctuation">{</span>
   <span class="token operator">...</span>
<span class="token punctuation">}</span>

func <span class="token function">names</span><span class="token punctuation">(</span><span class="token punctuation">)</span> string <span class="token punctuation">{</span>
   <span class="token operator">...</span>
   <span class="token keyword">return</span> <span class="token function">DBFind</span><span class="token punctuation">(</span><span class="token string">&quot;table&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Columns</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Limit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="needle-functions-classification"><a href="#needle-functions-classification" class="header-anchor">#</a> Clasificación de funciones de la función Needle </h2> <p>Búsqueda en la base de datos de valores:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><a href="#appparam">AppParam</a></td> <td><a href="#ecosysparam">EcosysParam</a></td> <td><a href="#getdatafromxlsx">GetDataFromXLSX</a></td></tr> <tr><td><a href="#dbfind">DBFind</a></td> <td><a href="#gethistory">GetHistory</a></td> <td><a href="#getrowscountxlsx">GetRowsCountXLSX</a></td></tr> <tr><td><a href="#dbrow">DBRow</a></td> <td><a href="#gethistoryrow">GetHistoryRow</a></td> <td><a href="#getblock">GetBlock</a></td></tr> <tr><td><a href="#dbselectmetrics">DBSelectMetrics</a></td> <td><a href="#getcolumntype">GetColumnType</a></td> <td><a href="#langres">LangRes</a></td></tr></tbody></table> <p>Cambiar el valor de una tabla de datos:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><a href="#dbinsert">DBInsert</a></td> <td><a href="#dbupdateext">DBUpdateExt</a></td> <td><a href="#deltable">DelTable</a></td></tr> <tr><td><a href="#dbupdate">DBUpdate</a></td> <td><a href="#delcolumn">DelColumn</a></td> <td></td></tr></tbody></table> <p>Operaciones de arreglo:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><a href="#append">Append</a></td> <td><a href="#len">Len</a></td> <td><a href="#getmapkeys">GetMapKeys</a></td></tr> <tr><td><a href="#join">Join</a></td> <td><a href="#row">Row</a></td> <td><a href="#sortedkeys">SortedKeys</a></td></tr> <tr><td><a href="#split">Split</a></td> <td><a href="#one">One</a></td> <td></td></tr></tbody></table> <p>Contratos inteligentes y operaciones de permisos:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><a href="#callcontract">CallContract</a></td> <td><a href="#getcontractbyid">GetContractById</a></td> <td><a href="#transactioninfo">TransactionInfo</a></td></tr> <tr><td><a href="#contractaccess">ContractAccess</a></td> <td><a href="#roleaccess">RoleAccess</a></td> <td><a href="#throw">Throw</a></td></tr> <tr><td><a href="#contractconditions">ContractConditions</a></td> <td><a href="#getcontractbyname">GetContractByName</a></td> <td><a href="#validatecondition">ValidateCondition</a></td></tr> <tr><td><a href="#evalcondition">EvalCondition</a></td> <td></td> <td></td></tr></tbody></table> <p>Operación de dirección de billetera:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><a href="#addresstoid">AddressToId</a></td> <td><a href="#idtoaddress">IdToAddress</a></td> <td><a href="#pubtoid">PubToID</a></td></tr></tbody></table> <p>Operación de valores de variables:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><a href="#decodebase64">DecodeBase64</a></td> <td><a href="#formatmoney">FormatMoney</a></td> <td><a href="#hash">Hash</a></td></tr> <tr><td><a href="#encodebase64">EncodeBase64</a></td> <td><a href="#random">Random</a></td> <td><a href="#sha256">Sha256</a></td></tr> <tr><td><a href="#float">Float</a></td> <td><a href="#int">Int</a></td> <td><a href="#str">Str</a></td></tr> <tr><td><a href="#hextobytes">HexToBytes</a></td> <td></td> <td></td></tr></tbody></table> <p>Operaciones aritméticas:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><a href="#floor">Floor</a></td> <td><a href="#log10">Log10</a></td> <td><a href="#round">Round</a></td></tr> <tr><td><a href="#log">Log</a></td> <td><a href="#pow">Pow</a></td> <td><a href="#sqrt">Sqrt</a></td></tr></tbody></table> <p>Operación de formato JSON:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><a href="#jsonencode">JSONEncode</a></td> <td><a href="#jsonencodeindent">JSONEncodeIndent</a></td> <td><a href="#jsondecode">JSONDecode</a></td></tr></tbody></table> <p>Manipulación de cadenas:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><a href="#hasprefix">HasPrefix</a></td> <td><a href="#size">Size</a></td> <td><a href="#tolower">ToLower</a></td></tr> <tr><td><a href="#contains">Contains</a></td> <td><a href="#sprintf">Sprintf</a></td> <td><a href="#toupper">ToUpper</a></td></tr> <tr><td><a href="#replace">Replace</a></td> <td><a href="#substr">Substr</a></td> <td><a href="#trimspace">TrimSpace</a></td></tr></tbody></table> <p>Manipulación de bytes:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><a href="#stringtobytes">StringToBytes</a></td> <td><a href="#bytestostring">BytesToString</a></td> <td></td></tr></tbody></table> <p>Operaciones de fecha y hora en formato SQL:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><a href="#blocktime">BlockTime</a></td> <td><a href="#datetime">DateTime</a></td> <td><a href="#unixdatetime">UnixDateTime</a></td></tr></tbody></table> <p>Operación de parámetros de la plataforma:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><a href="#sysparamstring">SysParamString</a></td> <td><a href="#sysparamint">SysParamInt</a></td> <td><a href="#dbupdatesysparam">DBUpdateSysParam</a></td></tr> <tr><td><a href="#updatenotifications">UpdateNotifications</a></td> <td><a href="#updaterolesnotifications">UpdateRolesNotifications</a></td> <td></td></tr></tbody></table> <p>Operación de la función de modo CLB:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><a href="#httprequest">HTTPRequest</a></td> <td><a href="#httppostjson">HTTPPostJSON</a></td> <td></td></tr></tbody></table> <p>Operaciones de la función del nodo CLB principal:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><a href="#createobs">CreateOBS</a></td> <td><a href="#getobslist">GetOBSList</a></td> <td><a href="#runobs">RunOBS</a></td></tr> <tr><td><a href="#stopobs">StopOBS</a></td> <td><a href="#removeobs">RemoveOBS</a></td> <td></td></tr></tbody></table> <h2 id="needle-functions-reference"><a href="#needle-functions-reference" class="header-anchor">#</a> Referencia de la función Needle </h2> <h3 id="appparam"><a href="#appparam" class="header-anchor">#</a> AppParam </h3> <p>Devolver el valor de un parámetro de aplicación especificado (de la tabla de parámetros de aplicación <em>app_params</em>).</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>AppParam(app int, name string, ecosystemid int) string
</code></pre></div><blockquote><p>app</p></blockquote> <div class="language- extra-class"><pre><code>Identificación de la aplicación.
</code></pre></div><blockquote><p>name</p></blockquote> <div class="language- extra-class"><pre><code>Nombre del parámetro de la aplicación.
</code></pre></div><blockquote><p>ecosystemid</p></blockquote> <div class="language- extra-class"><pre><code>ID del ecosistema.
</code></pre></div><p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">AppParam</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;app_account&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="dbfind"><a href="#dbfind" class="header-anchor">#</a> DBFind </h3> <p>Buscar datos de una tabla específica según los parámetros especificados. Devuelve un array <em>array</em> compuesto por arrays de objetos <em>map</em>.</p> <p><code>.Row()</code> devuelve el primer elemento <em>map</em> del registro solicitado, mientras que <code>.One(column string)</code> devuelve el primer elemento <em>map</em> de la columna especificada en el registro solicitado.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>DBFind(table string)
    [.Columns(columns array|string)]
    [.Where(where map)]
    [.WhereId(id int)]
    [.Order(order string)]
    [.Limit(limit int)]
    [.Offset(offset int)]
    [.Row()]
    [.One(column string)]
    [.Ecosystem(ecosystemid int)] array
</code></pre></div><blockquote><p>table</p></blockquote> <div class="language- extra-class"><pre><code>Nombre de la tabla de datos.
</code></pre></div><blockquote><p>сolumns</p></blockquote> <div class="language- extra-class"><pre><code>Devuelve una lista de columnas. Si no se especifica, se devolverán todas las columnas.

El valor es un array o una cadena separada por comas.
</code></pre></div><blockquote><p>where</p></blockquote> <div class="language- extra-class"><pre><code>Búsqueda de condiciones.

Ejemplo: `.Where({name: &quot;John&quot;})` o `.Where({&quot;id&quot;: {&quot;$gte&quot;: 4}})`.

Este parámetro debe contener una matriz de objetos con condiciones de búsqueda. Esta matriz puede contener elementos anidados.

Siguiendo la estructura sintáctica a continuación:
</code></pre></div><ul><li><p><code>{&quot;field1&quot;: &quot;value1&quot;, &quot;field2&quot; : &quot;value2&quot;}</code></p> <blockquote><p>Equivalente a <code>field1 = &quot;value1&quot; AND field2 = &quot;value2&quot;</code>.</p></blockquote></li> <li><p><code>{&quot;field1&quot;: {&quot;$eq&quot;:&quot;value&quot;}}</code></p> <blockquote><p>Equivalente a <code>field = &quot;value&quot;</code>.</p></blockquote></li> <li><p><code>{&quot;field1&quot;: {&quot;$neq&quot;: &quot;value&quot;}}</code></p> <blockquote><p>Equivalente a <code>field != &quot;value&quot;</code>.</p></blockquote></li> <li><p><code>{&quot;field1: {&quot;$in&quot;: [1,2,3]}</code></p> <blockquote><p>Equivalente a <code>field IN (1,2,3)</code>.</p></blockquote></li> <li><p><code>{&quot;field1&quot;: {&quot;$nin&quot; : [1,2,3]}</code></p> <blockquote><p>Equivalente a <code>field NOT IN (1,2,3)</code>.</p></blockquote></li> <li><p><code>{&quot;field&quot;: {&quot;$lt&quot;: 12}}</code></p> <blockquote><p>Equivalente a <code>field &lt; 12</code>.</p></blockquote></li> <li><p><code>{&quot;field&quot;: {&quot;$lte&quot;: 12}}</code></p> <blockquote><p>Equivalente a <code>field &lt;= 12</code>.</p></blockquote></li> <li><p><code>{&quot;field&quot;: {&quot;$gt&quot;: 12}}</code></p> <blockquote><p>Equivalente a <code>field &gt; 12</code>.</p></blockquote></li> <li><p><code>{&quot;field&quot;: {&quot;$gte&quot;: 12}}</code></p> <blockquote><p>Equivalente a <code>field &gt;= 12</code>.</p></blockquote></li> <li><p><code>{&quot;$and&quot;: [&lt;expr1&gt;, &lt;expr2&gt;, &lt;expr3&gt;]}</code></p> <blockquote><p>Equivalente a <code>expr1 AND expr2 AND expr3</code>.</p></blockquote></li> <li><p><code>{&quot;$or&quot;: [&lt;expr1&gt;, &lt;expr2&gt;, &lt;expr3&gt;]}</code></p> <blockquote><p>Equivalente a <code>expr1 OR expr2 OR expr3</code>.</p></blockquote></li> <li><p><code>{field: {&quot;$like&quot;: &quot;value&quot;}}</code></p> <blockquote><p>Equivalente a <code>field like '%value%'</code> (búsqueda difusa).</p></blockquote></li> <li><p><code>{field: {&quot;$begin&quot;: &quot;value&quot;}}</code></p> <blockquote><p>Equivalente a <code>field like 'value%'</code> (comienza con <code>value</code>).</p></blockquote></li> <li><p><code>{field: {&quot;$end&quot;: &quot;value&quot;}}</code></p> <blockquote><p>Equivalente a <code>field like '%value'</code> (termina con <code>value</code>).</p></blockquote></li> <li><p><code>{field: &quot;$isnull&quot;}</code></p> <blockquote><p>Equivalente a <code>field is null</code>.</p></blockquote></li></ul> <p>Por favor, asegúrese de no sobrescribir las claves del arreglo de objetos. Por ejemplo, si desea realizar una consulta con la sentencia <code>id&gt;2 y id&lt;5</code>, no puede utilizar <code>{id:{&quot;$gt&quot;: 2}, id:{&quot;$lt&quot;: 5}}</code>, ya que el primer elemento será sobrescrito por el segundo elemento. Debe utilizar la siguiente estructura de consulta:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string-property property">&quot;$gt&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string-property property">&quot;$lt&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span><span class="token string-property property">&quot;$and&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string-property property">&quot;$gt&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string-property property">&quot;$lt&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
</code></pre></div><blockquote><p>id</p></blockquote> <div class="language- extra-class"><pre><code>Según el ID de búsqueda. Por ejemplo, `.WhereId(1)`.
</code></pre></div><blockquote><p>order</p></blockquote> <div class="language- extra-class"><pre><code>Solía ordenar el conjunto de resultados en función de la columna especificada. Por defecto, se ordena por *id*.
</code></pre></div><p>Si la ordenación se realiza en función de un solo campo, se puede especificar como una cadena. Para ordenar en función de varios campos, se debe especificar una matriz de objetos de cadena:</p> <p>Descendente: <code>{&quot;field&quot;: &quot;-1&quot;}</code> es equivalente a <code>field desc</code>.</p> <p>Ascendente: <code>{&quot;field&quot;: &quot;1&quot;}</code> es equivalente a <code>field asc</code>.</p> <blockquote><p>limit</p></blockquote> <div class="language- extra-class"><pre><code>Devuelve el número de entradas. El valor predeterminado es de 25 entradas y el máximo es de 10000 entradas.
</code></pre></div><blockquote><p>offset</p></blockquote> <div class="language- extra-class"><pre><code>Desplazamiento.
</code></pre></div><blockquote><p>ecosystemid</p></blockquote> <div class="language- extra-class"><pre><code>ID del ecosistema. Por defecto, se consulta la tabla de datos del ecosistema actual.
</code></pre></div><p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> i int
<span class="token keyword">var</span> ret string

ret <span class="token operator">=</span> <span class="token function">DBFind</span><span class="token punctuation">(</span><span class="token string">&quot;contracts&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Columns</span><span class="token punctuation">(</span><span class="token string">&quot;id,value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string-property property">&quot;$gt&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string-property property">&quot;$lt&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Order</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">while</span> i <span class="token operator">&lt;</span> <span class="token function">Len</span><span class="token punctuation">(</span><span class="token parameter">ret</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> vals map
    vals <span class="token operator">=</span> ret<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    <span class="token function">Println</span><span class="token punctuation">(</span>vals<span class="token punctuation">[</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
ret <span class="token operator">=</span> <span class="token function">DBFind</span><span class="token punctuation">(</span><span class="token string">&quot;contracts&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Columns</span><span class="token punctuation">(</span><span class="token string">&quot;id,value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">WhereId</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">One</span><span class="token punctuation">(</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> ret <span class="token operator">!=</span> nil <span class="token punctuation">{</span>
 <span class="token function">Println</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>
 <span class="token function">Println</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span> 
 <span class="token function">Println</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="dbrow"><a href="#dbrow" class="header-anchor">#</a> DBRow </h3> <p>Según los parámetros especificados, busca datos en la tabla de datos especificada. Devuelve un array <em>array</em> compuesto por un conjunto de objetos <em>map</em>.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>DBRow(table string)
    [.Columns(columns array|string)]
    [.Where(where map)]
    [.WhereId(id int)]
    [.Order(order array|string)]
    [.Ecosystem(ecosystemid int)] map
</code></pre></div><ul><li><p>table</p> <p>Nombre de la tabla de datos.</p></li> <li><p>columns</p> <p>Devuelve una lista de columnas. Si no se especifica, se devolverán todas las columnas.</p> <p>El valor es un array o una cadena separada por comas.</p></li> <li><p>where</p> <p>Criterios de búsqueda.</p> <p>Por ejemplo: <code>.Where({name: &quot;John&quot;})</code> o <code>.Where({&quot;id&quot;: {&quot;$gte&quot;: 4}})</code>.</p> <p>Para obtener información más detallada, consulte <a href="/es/topics/templates2.html#dbfind">DBFind</a>.</p></li> <li><p>id</p> <p>Buscar por ID. Por ejemplo, <code>.WhereId(1)</code>.</p></li> <li><p>order</p> <p>Se utiliza para ordenar el conjunto de resultados según la columna especificada. Por defecto, se ordena por <em>id</em>.</p> <p>Para obtener más información, consulte <a href="/es/topics/templates2.html#dbfind">DBFind</a>.</p></li> <li><p>ecosystemid</p> <p>ID del ecosistema. Por defecto, se busca la tabla de datos del ecosistema actual.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> ret map
ret <span class="token operator">=</span> <span class="token function">DBRow</span><span class="token punctuation">(</span><span class="token string">&quot;contracts&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Columns</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">Println</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>
</code></pre></div><h3 id="dbselectmetrics"><a href="#dbselectmetrics" class="header-anchor">#</a> DBSelectMetrics </h3> <p>Devolver datos agregados para las métricas.</p> <p>Los estándares de las métricas se actualizarán cada 100 bloques generados. Los datos agregados se almacenarán diariamente.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>DBSelectMetrics(metric string, timeInterval string, aggregateFunc string) array
</code></pre></div><ul><li><p>metric</p> <p>Nombre del indicador.</p></li> <li><p>ecosystem_pages</p> <p>Número de páginas del ecosistema.</p> <p>Valor de retorno: <em>key</em> - ID del ecosistema, <em>value</em> - número de páginas del ecosistema.</p></li> <li><p>ecosystem_members</p> <p>Número de miembros del ecosistema.</p> <p>Valor de retorno: <em>key</em> - ID del ecosistema, <em>value</em> - número de miembros del ecosistema.</p></li> <li><p>ecosystem_tx</p> <p>Número de transacciones del ecosistema.</p> <p>Valor de retorno: <em>key</em> - ID del ecosistema, <em>value</em> - número de transacciones del ecosistema.</p></li> <li><p>timeInterval</p> <p>Intervalo de tiempo para la agregación de datos. Por ejemplo: <code>1 day</code>, <code>30 days</code>.</p></li> <li><p>aggregateFunc</p> <p>Función de agregación. Por ejemplo: <code>max</code>, <code>min</code>, <code>avg</code>.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> rows array
rows <span class="token operator">=</span> <span class="token function">DBSelectMetrics</span><span class="token punctuation">(</span><span class="token string">&quot;ecosystem_tx&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;30 days&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;avg&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> i int
<span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token function">Len</span><span class="token punctuation">(</span>rows<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">var</span> row map
   row <span class="token operator">=</span> rows<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
   i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ecosysparam"><a href="#ecosysparam" class="header-anchor">#</a> EcosysParam </h3> <p>Devolver el valor del parámetro especificado en la tabla de parámetros del ecosistema <em>parámetros</em>.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>EcosysParam(name string) string
</code></pre></div><ul><li><p>name</p> <p>Nombre del parámetro.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">EcosysParam</span><span class="token punctuation">(</span><span class="token string">&quot;founder_account&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="gethistory"><a href="#gethistory" class="header-anchor">#</a> GetHistory </h3> <p>Recuperar el historial de cambios realizados en las entradas de una tabla de datos especificada.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>GetHistory(table string, id int) array
</code></pre></div><ul><li><p>table</p> <p>Nombre de la tabla de datos.</p></li> <li><p>id</p> <p>ID de entrada.</p></li></ul> <p><strong>Valor de retorno</strong></p> <p>Devuelva una matriz de objetos de tipo <em>map</em>. Estas matrices especifican el historial de cambios de entradas en la tabla de datos.</p> <p>Cada matriz contiene los campos de registro antes del próximo cambio.</p> <p>Las matrices se ordenan en orden de cambio más reciente.</p> <p>El campo <em>id</em> en la matriz apunta al campo <em>id</em> en la tabla <em>rollback_tx</em>. <em>block_id</em> representa el ID del bloque y <em>block_time</em> representa la marca de tiempo de generación del bloque.</p> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> list array
<span class="token keyword">var</span> item map
list <span class="token operator">=</span> <span class="token function">GetHistory</span><span class="token punctuation">(</span><span class="token string">&quot;blocks&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token function">Len</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
   item <span class="token operator">=</span> list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="gethistoryrow"><a href="#gethistoryrow" class="header-anchor">#</a> GetHistoryRow </h3> <p>Devolver una única instantánea del historial de cambios de una entrada específica en una tabla de datos especificada.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>GetHistoryRow(table string, id int, rollbackId int) map
</code></pre></div><ul><li><p>table</p> <p>Nombre de la tabla de datos.</p></li> <li><p>id</p> <p>ID de entrada.</p></li> <li><p>rollbackId</p> <p>ID de entrada de la tabla <em>rollback_tx</em>.</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>$result <span class="token operator">=</span> <span class="token function">GetHistoryRow</span><span class="token punctuation">(</span><span class="token string">&quot;contracts&quot;</span><span class="token punctuation">,</span><span class="token number">205</span><span class="token punctuation">,</span><span class="token number">2358</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="getcolumntype"><a href="#getcolumntype" class="header-anchor">#</a> GetColumnType </h3> <p>Devolver el tipo de datos de un campo especificado en una tabla especificada.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>GetColumnType(table, column string) string
</code></pre></div><ul><li><p>table</p> <p>Nombre de la tabla de datos.</p></li> <li><p>column</p> <p>Nombre del campo.</p></li></ul> <p><strong>Valor de retorno</strong></p> <p>Devuelve los siguientes tipos: <code>text, varchar, number, money, double, bytes, json, datetime, double</code>。</p> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> coltype string
coltype <span class="token operator">=</span> <span class="token function">GetColumnType</span><span class="token punctuation">(</span><span class="token string">&quot;members&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;member_name&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="getdatafromxlsx"><a href="#getdatafromxlsx" class="header-anchor">#</a> GetDataFromXLSX </h3> <p>Devolver datos de una hoja de cálculo <em>XLSX</em>.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>GetDataFromXLSX(binId int, line int, count int, sheet int) string
</code></pre></div><ul><li><p>binId</p> <p>ID en formato XLSX en la tabla binaria <em>binary</em>.</p></li> <li><p>line</p> <p>Comience la fila, por defecto comienza en 0.</p></li> <li><p>count</p> <p>número de filas a devolver.</p></li> <li><p>sheet</p> <p>Listado de números, por defecto comienza en 1.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a array
a <span class="token operator">=</span> <span class="token function">GetDataFromXLSX</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="getrowscountxlsx"><a href="#getrowscountxlsx" class="header-anchor">#</a> GetRowsCountXLSX </h3> <p>Devuelve el número de filas de un archivo XLSX especificado.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>GetRowsCountXLSX(binId int, sheet int) int
</code></pre></div><ul><li><p>binId</p> <p>ID en formato XLSX en la tabla binaria <em>binary</em>.</p></li> <li><p>sheet</p> <p>Listado de números, por defecto comienza en 1.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> count int
count <span class="token operator">=</span> <span class="token function">GetRowsCountXLSX</span><span class="token punctuation">(</span>binid<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="langres"><a href="#langres" class="header-anchor">#</a> LangRes </h3> <p>Devolver recursos multilingües especificados. Su etiqueta <em>lang</em> es un código de idioma de dos caracteres, como: <code>en, es</code>. Si la etiqueta de idioma seleccionada no tiene recursos de idioma, devuelva los recursos de idioma de la etiqueta <code>es</code>.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>LangRes(label string, lang string) string
</code></pre></div><ul><li><p>label</p> <p>Nombre de recursos de idioma.</p></li> <li><p>lang</p> <p>Código de idioma de dos caracteres.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>warning <span class="token function">LangRes</span><span class="token punctuation">(</span><span class="token string">&quot;@1confirm&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;en&quot;</span><span class="token punctuation">)</span>
error <span class="token function">LangRes</span><span class="token punctuation">(</span><span class="token string">&quot;@1problems&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;es&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="getblock"><a href="#getblock" class="header-anchor">#</a> GetBlock </h3> <p>Devolver información relacionada con un bloque especificado.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>GetBlock(blockID int64) map
</code></pre></div><ul><li><p>blockID</p> <p>Identificador de bloque.</p></li></ul> <p><strong>Valor de retorno</strong></p> <p>Devuelve una matriz de objetos:</p> <ul><li><p><em>id</em></p> <blockquote><p>Identificador de bloque.</p></blockquote></li> <li><p><em>time</em></p> <blockquote><p>Marca de tiempo de generación de bloque.</p></blockquote></li> <li><p><em>key_id</em></p> <blockquote><p>Generar la dirección de la cuenta del nodo de validación que creó este bloque.</p></blockquote></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> b map
b <span class="token operator">=</span> <span class="token function">GetBlock</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token function">Println</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
</code></pre></div><h3 id="dbinsert"><a href="#dbinsert" class="header-anchor">#</a> DBInsert </h3> <p>Agregar una entrada a una tabla de datos específica y devolver el ID de la entrada.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>DBInsert(table string, params map) int
</code></pre></div><ul><li><p>tblname</p> <p>Nombre de la tabla de datos.</p></li> <li><p>params</p> <p>Array de objetos, donde la clave es el nombre del campo y el valor es el valor a insertar.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">DBInsert</span><span class="token punctuation">(</span><span class="token string">&quot;mytable&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;John Smith&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">amount</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="dbupdate"><a href="#dbupdate" class="header-anchor">#</a> DBUpdate </h3> <p>Cambiar el valor de la columna de una entrada especificada por ID en una tabla de datos especificada. Si el ID de entrada no existe en la tabla, devolver un error.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>DBUpdate(tblname string, id int, params map)
</code></pre></div><ul><li><p>tblname</p> <p>Nombre de la tabla de datos.</p></li> <li><p>id</p> <p>ID de entrada.</p></li> <li><p>params</p> <p>Array de objetos, donde la clave es el nombre del campo y el valor es el nuevo valor a cambiar.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">DBUpdate</span><span class="token punctuation">(</span><span class="token string">&quot;mytable&quot;</span><span class="token punctuation">,</span> myid<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;John Smith&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">amount</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="dbupdateext"><a href="#dbupdateext" class="header-anchor">#</a> DBUpdateExt </h3> <p>Modificar los valores de las columnas que coinciden con la condición de búsqueda en una tabla de datos específica.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>DBUpdateExt(tblname string, where map, params map)
</code></pre></div><ul><li><p>tblname</p> <p>Nombre de la tabla de datos.</p></li> <li><p>where</p> <p>Condiciones de la consulta.</p></li></ul> <p>Para obtener información más detallada, consulte <a href="/es/topics/templates2.html#dbfind">DBFind</a>.</p> <ul><li><p>params</p> <p>Array de objetos, donde la clave es el nombre del campo y el valor es el nuevo valor a cambiar.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">DBUpdateExt</span><span class="token punctuation">(</span><span class="token string">&quot;mytable&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span> $key_id<span class="token punctuation">,</span> <span class="token literal-property property">ecosystem</span><span class="token operator">:</span> $ecosystem_id<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;John Smith&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">amount</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="delcolumn"><a href="#delcolumn" class="header-anchor">#</a> DelColumn </h3> <p>Eliminar un campo específico de una tabla. La tabla debe estar vacía.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>DelColumn(tblname string, column string)
</code></pre></div><ul><li><p>tblname</p> <p>Nombre de la tabla de datos.</p></li> <li><p>column</p> <p>necesita eliminar el campo.</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">DelColumn</span><span class="token punctuation">(</span><span class="token string">&quot;mytable&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;mycolumn&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="deltable"><a href="#deltable" class="header-anchor">#</a> DelTable </h3> <p>Eliminar la tabla de datos especificada. La tabla debe estar vacía.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>DelTable(tblname string)
</code></pre></div><ul><li><p>tblname</p> <p>Nombre de la tabla de datos.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">DelTable</span><span class="token punctuation">(</span><span class="token string">&quot;mytable&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="append"><a href="#append" class="header-anchor">#</a> Append </h3> <p>Inserte cualquier tipo de <em>val</em> en el arreglo <em>src</em>.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>Append(src array, val anyType) array
</code></pre></div><ul><li><p>src</p> <p>La matriz original.</p></li> <li><p>val</p> <p>necesita valores a insertar.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> list array
list <span class="token operator">=</span> <span class="token function">Append</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token string">&quot;new_val&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="join"><a href="#join" class="header-anchor">#</a> Join </h3> <p>Unir los elementos del arreglo <em>in</em> en una cadena con el separador <em>sep</em> especificado.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>Join(in array, sep string) string
</code></pre></div><ul><li><p>in</p> <p>Nombre del arreglo.</p></li> <li><p>sep</p> <p>Separador.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> val string<span class="token punctuation">,</span> myarr array
myarr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;first&quot;</span>
myarr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">10</span>
val <span class="token operator">=</span> <span class="token function">Join</span><span class="token punctuation">(</span>myarr<span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="split"><a href="#split" class="header-anchor">#</a> Split </h3> <p>Divide la cadena <em>in</em> en elementos utilizando el separador <em>sep</em> y colócalos en un arreglo.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>Split(in string, sep string) array
</code></pre></div><ul><li><p>in</p> <p>Cadena de caracteres.</p></li> <li><p>sep</p> <p>Separador.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> myarr array
myarr <span class="token operator">=</span> <span class="token function">Split</span><span class="token punctuation">(</span><span class="token string">&quot;first,second,third&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="len"><a href="#len" class="header-anchor">#</a> Len </h3> <p>Devuelve el número de elementos en un arreglo especificado.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>Len(val array) int
</code></pre></div><ul><li><p>val</p> <p>Matriz.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token function">Len</span><span class="token punctuation">(</span>mylist<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="row"><a href="#row" class="header-anchor">#</a> Row </h3> <p>El parámetro <em>lista</em> no debe ser especificado en este caso.</p> <p>Devolver el primer objeto de la matriz en la lista de matrices. Si la lista está vacía, devolver un resultado vacío. Esta función se utiliza principalmente en conjunto con la función <a href="/es/topics/templates2.html#dbfind">DBFind</a> y no se pueden especificar parámetros al usarla.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>Row(list array) map
</code></pre></div><ul><li><p>list</p> <p>Array de objetos devuelto por la función <strong>DBFind</strong>.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> ret map
ret <span class="token operator">=</span> <span class="token function">DBFind</span><span class="token punctuation">(</span><span class="token string">&quot;contracts&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Columns</span><span class="token punctuation">(</span><span class="token string">&quot;id,value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">WhereId</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Row</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">Println</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>
</code></pre></div><h3 id="one"><a href="#one" class="header-anchor">#</a> One </h3> <p>Devolver el valor del campo del primer objeto de la matriz en la lista de matrices. Si la matriz de la lista está vacía, devolver nil. Esta función se utiliza principalmente con la función <a href="/es/topics/templates2.html#dbfind">DBFind</a> y no se puede especificar con parámetros cuando se utiliza.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>One(list array, column string) string
</code></pre></div><ul><li><p>list</p> <ul><li>Array de objetos devuelto por la función <strong>DBFind</strong>.</li></ul></li> <li><p>column</p> <ul><li>Nombre del campo.</li></ul></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> ret string
ret <span class="token operator">=</span> <span class="token function">DBFind</span><span class="token punctuation">(</span><span class="token string">&quot;contracts&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Columns</span><span class="token punctuation">(</span><span class="token string">&quot;id,value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">WhereId</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">One</span><span class="token punctuation">(</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> ret <span class="token operator">!=</span> nil <span class="token punctuation">{</span>
   <span class="token function">Println</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="getmapkeys"><a href="#getmapkeys" class="header-anchor">#</a> GetMapKeys </h3> <p>Retorna un array de claves de un array de objetos.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>GetMapKeys(val map) array
</code></pre></div><ul><li><p>val</p> <p>Objeto de matriz.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> val map
<span class="token keyword">var</span> arr array
val<span class="token punctuation">[</span><span class="token string">&quot;k1&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;v1&quot;</span>
val<span class="token punctuation">[</span><span class="token string">&quot;k2&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;v2&quot;</span>
arr <span class="token operator">=</span> <span class="token function">GetMapKeys</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
</code></pre></div><h3 id="sortedkeys"><a href="#sortedkeys" class="header-anchor">#</a> SortedKeys </h3> <p>Devuelve un array de claves de un array de objetos, ordenado en orden ascendente.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>SortedKeys(val map) array
</code></pre></div><ul><li><p>val</p> <p>Objeto de matriz.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> val map
<span class="token keyword">var</span> arr array
val<span class="token punctuation">[</span><span class="token string">&quot;k2&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;v2&quot;</span>
val<span class="token punctuation">[</span><span class="token string">&quot;k1&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;v1&quot;</span>
arr <span class="token operator">=</span> <span class="token function">SortedKeys</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
</code></pre></div><h3 id="callcontract"><a href="#callcontract" class="header-anchor">#</a> CallContract </h3> <p>Llame al contrato inteligente con el nombre especificado. Todos los parámetros de la sección de datos del contrato inteligente deben incluirse en una matriz de objetos. Esta función devuelve el valor asignado al variable <strong>$result</strong> del contrato inteligente especificado.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>CallContract(name string, params map)
</code></pre></div><ul><li><p>name</p> <p>Nombre del contrato invocado.</p></li> <li><p>params</p> <p>Array asociativo de datos de entrada de un contrato inteligente.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> par map
par<span class="token punctuation">[</span><span class="token string">&quot;Name&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;My Name&quot;</span>
<span class="token function">CallContract</span><span class="token punctuation">(</span><span class="token string">&quot;MyContract&quot;</span><span class="token punctuation">,</span> par<span class="token punctuation">)</span>
</code></pre></div><h3 id="contractaccess"><a href="#contractaccess" class="header-anchor">#</a> ContractAccess </h3> <p>Verifique si el nombre de ejecución del contrato inteligente coincide con uno de los nombres enumerados en los parámetros. Se utiliza comúnmente para controlar el acceso del contrato inteligente a las tablas de datos. Especifique esta función en el campo de permisos al editar los campos de la tabla de datos o al insertar y agregar nuevos campos en la sección de permisos de la tabla.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>ContractAccess(name string, [name string]) bool
</code></pre></div><ul><li><p>name</p> <p>Nombre del contrato inteligente.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">ContractAccess</span><span class="token punctuation">(</span><span class="token string">&quot;MyContract&quot;</span><span class="token punctuation">)</span>
<span class="token function">ContractAccess</span><span class="token punctuation">(</span><span class="token string">&quot;MyContract&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;SimpleContract&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="contractconditions"><a href="#contractconditions" class="header-anchor">#</a> ContractConditions </h3> <p>Llame a la sección de condiciones <strong>conditions</strong> de un contrato inteligente con el nombre especificado.</p> <p>Para este tipo de contrato inteligente, la sección de datos debe estar vacía. Si la sección de condiciones se ejecuta sin errores, se devuelve <em>true</em>. Si se genera un error durante la ejecución, el contrato inteligente padre también terminará con este error.</p> <p>Esta función se utiliza normalmente para controlar el acceso del contrato inteligente a las tablas y se puede llamar en el campo de permisos al editar las tablas del sistema.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>ContractConditions(name string, [name string]) bool
</code></pre></div><ul><li><p>name</p> <p>Nombre del contrato inteligente.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">ContractConditions</span><span class="token punctuation">(</span><span class="token string">&quot;MainCondition&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="evalcondition"><a href="#evalcondition" class="header-anchor">#</a> EvalCondition </h3> <p>Obtener el valor del campo <em>condfield</em> de los registros con el campo <em>'name'</em> de la tabla <em>tablename</em>, y verificar la condición del valor del campo <em>condfield</em>.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>EvalCondition(tablename string, name string, condfield string)
</code></pre></div><ul><li><p>tablename</p> <p>Nombre de la tabla de datos.</p></li> <li><p>name</p> <p>Buscar valores según el campo 'name'.</p></li> <li><p>condfield</p> <p>Nombre del campo que requiere verificación de condiciones.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">EvalCondition</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">menu</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> $Name<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">conditions</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
</code></pre></div><h3 id="getcontractbyid"><a href="#getcontractbyid" class="header-anchor">#</a> GetContractById </h3> <p>La función devuelve el nombre del contrato inteligente por su ID de contrato inteligente. Si no se puede encontrar el contrato inteligente, se devuelve una cadena vacía.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>GetContractById(id int) string
</code></pre></div><ul><li><p>id</p> <p>Encontrar el ID del contrato inteligente en la tabla de contratos inteligentes <em>contracts</em>.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> name string
name <span class="token operator">=</span> <span class="token function">GetContractById</span><span class="token punctuation">(</span>$IdContract<span class="token punctuation">)</span>
</code></pre></div><h3 id="getcontractbyname"><a href="#getcontractbyname" class="header-anchor">#</a> GetContractByName </h3> <p>La función devuelve el ID del contrato inteligente por su nombre. Si no se puede encontrar el contrato inteligente, devuelve cero.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>GetContractByName(name string) int
</code></pre></div><ul><li><p>name</p> <p>El nombre del contrato inteligente en la tabla de contratos inteligentes <em>contracts</em>.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> id int
id <span class="token operator">=</span> <span class="token function">GetContractByName</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">NewBlock</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
</code></pre></div><h3 id="roleaccess"><a href="#roleaccess" class="header-anchor">#</a> RoleAccess </h3> <p>Verificar si el ID de rol del llamador del contrato inteligente coincide con uno de los IDs especificados en los parámetros.</p> <p>Se puede utilizar esta función para controlar el acceso a tablas de datos y otros datos en el contrato inteligente.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>RoleAccess(id int, [id int]) bool
</code></pre></div><ul><li><p>id</p> <p>角色ID。</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">RoleAccess</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token function">RoleAccess</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="transactioninfo"><a href="#transactioninfo" class="header-anchor">#</a> TransactionInfo </h3> <p>Buscar transacciones según el valor hash especificado y devolver información sobre los contratos inteligentes ejecutados y sus parámetros.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>TransactionInfo(hash: string)
</code></pre></div><ul><li><p>hash</p> <p>Formato de cadena hexadecimal de hash de transacción.</p></li></ul> <p><strong>Valor de retorno</strong></p> <p>Esta función devuelve una cadena en formato JSON:</p> <blockquote><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span><span class="token property">&quot;contract&quot;</span><span class="token operator">:</span><span class="token string">&quot;ContractName&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;params&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;val&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token property">&quot;block&quot;</span><span class="token operator">:</span> <span class="token string">&quot;N&quot;</span><span class="token punctuation">}</span>
</code></pre></div></blockquote> <ul><li><p>contract</p> <p>Nombre del contrato inteligente.</p></li> <li><p>params</p> <p>Datos que se pasan como parámetros a un contrato inteligente.</p></li> <li><p>block</p> <p>ID de bloque que procesó la transacción.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> out map
out <span class="token operator">=</span> <span class="token function">JSONDecode</span><span class="token punctuation">(</span><span class="token function">TransactionInfo</span><span class="token punctuation">(</span>hash<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="throw"><a href="#throw" class="header-anchor">#</a> Throw </h3> <p>Crear un error del tipo <em>excepción</em>.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>Throw(ErrorId string, ErrDescription string)
</code></pre></div><ul><li><p>ErrorId</p> <p>Error de identificador.</p></li> <li><p>ErrDescription</p> <p>Descripción incorrecta.</p></li></ul> <p><strong>Valor de retorno</strong></p> <p>El formato de los resultados para este tipo de transacción:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;exception&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;error&quot;</span><span class="token operator">:</span><span class="token string">&quot;Error description&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;Error ID&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">Throw</span><span class="token punctuation">(</span><span class="token string">&quot;Problem&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;There is a problem&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="validatecondition"><a href="#validatecondition" class="header-anchor">#</a> ValidateCondition </h3> <p>Intentando compilar la condición especificada en el parámetro <em>condition</em>. Si ocurre algún error durante el proceso de compilación, se generará un error y se detendrá la llamada al contrato inteligente. Esta función tiene como objetivo verificar la corrección del formato de la condición.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>ValidateCondition(condition string, state int)
</code></pre></div><ul><li><p>condition</p> <p>Condiciones de formato que necesitan ser verificadas.</p></li> <li><p>state</p> <p>ID del ecosistema. Si se están verificando las condiciones globales, por favor especifique como 0.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">ValidateCondition</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ContractAccess(&quot;@1MyContract&quot;)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="addresstoid"><a href="#addresstoid" class="header-anchor">#</a> AddressToId </h3> <p>Devuelve la dirección de la cuenta correspondiente según la dirección de la billetera proporcionada. Si se especifica una dirección no válida, devuelve '0'.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>AddressToId(address string) int
</code></pre></div><ul><li><p>address</p> <p>Dirección de la billetera en formato <code>XXXX-...-XXXX</code> o en forma numérica.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>wallet <span class="token operator">=</span> <span class="token function">AddressToId</span><span class="token punctuation">(</span>$Recipient<span class="token punctuation">)</span>
</code></pre></div><h3 id="idtoaddress"><a href="#idtoaddress" class="header-anchor">#</a> IdToAddress </h3> <p>De acuerdo con la dirección de la cuenta, devuelve la dirección de la billetera correspondiente. Si se especifica una dirección no válida, devuelve la dirección no válida 'inválida'.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>IdToAddress(id int) string
</code></pre></div><ul><li><p>id</p> <p>Dirección de cuenta.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>$address <span class="token operator">=</span> <span class="token function">IdToAddress</span><span class="token punctuation">(</span>$id<span class="token punctuation">)</span>
</code></pre></div><h3 id="pubtoid"><a href="#pubtoid" class="header-anchor">#</a> PubToID </h3> <p>Devuelve la dirección de la cuenta a través del formato de codificación hexadecimal de la clave pública.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>PubToID(hexkey string) int
</code></pre></div><ul><li><p>hexkey</p> <p>Clave pública en formato de codificación hexadecimal.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> wallet int
wallet <span class="token operator">=</span> <span class="token function">PubToID</span><span class="token punctuation">(</span><span class="token string">&quot;04fa5e78.....34abd6&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="decodebase64"><a href="#decodebase64" class="header-anchor">#</a> DecodeBase64 </h3> <p>Devuelve una cadena especificando el formato de codificación base64.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>DecodeBase64(input string) string
</code></pre></div><ul><li><p>input</p> <p>La cadena de caracteres en formato Base64.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>val <span class="token operator">=</span> <span class="token function">DecodeBase64</span><span class="token punctuation">(</span>mybase64<span class="token punctuation">)</span>
</code></pre></div><h3 id="encodebase64"><a href="#encodebase64" class="header-anchor">#</a> EncodeBase64 </h3> <p>Devuelve una Cadena de caracteres en formato base64 al especificar una cadena de entrada.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>EncodeBase64(input string) string
</code></pre></div><ul><li><p>input</p> <p>Necesita codificar la cadena.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> base64str string
base64str <span class="token operator">=</span> <span class="token function">EncodeBase64</span><span class="token punctuation">(</span><span class="token string">&quot;my text&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="float"><a href="#float" class="header-anchor">#</a> Float </h3> <p>Convertir un entero o una cadena a un número decimal.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>Float(val int|string) float
</code></pre></div><ul><li><p>val</p> <p>Integer o cadena de caracteres.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>val <span class="token operator">=</span> <span class="token function">Float</span><span class="token punctuation">(</span><span class="token string">&quot;567.989&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">Float</span><span class="token punctuation">(</span><span class="token number">232</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="hextobytes"><a href="#hextobytes" class="header-anchor">#</a> HexToBytes </h3> <p>Convertir una cadena en formato de codificación hexadecimal a tipo de bytes <em>bytes</em>.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>HexToBytes(hexdata string) bytes
</code></pre></div><ul><li><p>hexdata</p> <p>Cadena de caracteres en formato de codificación hexadecimal.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> val bytes
val <span class="token operator">=</span> <span class="token function">HexToBytes</span><span class="token punctuation">(</span><span class="token string">&quot;34fe4501a4d80094&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="formatmoney"><a href="#formatmoney" class="header-anchor">#</a> FormatMoney </h3> <p>Returna el valor de cadena de <em>exp / 10 ^ digit</em>.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>FormatMoney(exp string, digit int) string
</code></pre></div><ul><li><p>exp</p> <p>Formato de cadena de números.</p></li> <li><p>digit</p> <p>La expresión <code>exp/10^digit</code> tiene un exponente de 10, que puede ser positivo o negativo. Un valor positivo determina la cantidad de decimales después del punto decimal.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>s <span class="token operator">=</span> <span class="token function">FormatMoney</span><span class="token punctuation">(</span><span class="token string">&quot;78236475917384&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="random"><a href="#random" class="header-anchor">#</a> Random </h3> <p>Retorna un número aleatorio entre min y max (min &lt;= resultado &lt; max). Tanto min como max deben ser números positivos.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>Random(min int, max int) int
</code></pre></div><ul><li><p>min</p> <p>El valor mínimo del número aleatorio.</p></li> <li><p>max</p> <p>El límite superior del número aleatorio. El número aleatorio generado será menor que ese valor.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>i <span class="token operator">=</span> <span class="token function">Random</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">5000</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="int"><a href="#int" class="header-anchor">#</a> Int </h3> <p>Convertir un valor de cadena a un entero.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>Int(val string) int
</code></pre></div><ul><li><p>val</p> <p>Formato de cadena de números.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>mystr <span class="token operator">=</span> <span class="token string">&quot;-37763499007332&quot;</span>
val <span class="token operator">=</span> <span class="token function">Int</span><span class="token punctuation">(</span>mystr<span class="token punctuation">)</span>
</code></pre></div><h3 id="hash"><a href="#hash" class="header-anchor">#</a> Hash </h3> <p>Devolver el hash de una matriz de bytes o cadena especificada, generado por la biblioteca de cifrado del sistema &quot;crypto&quot;.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>Hash(val interface{}) string, error
</code></pre></div><ul><li><p>val</p> <p>Cadena de caracteres o matriz de bytes.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> hash string
hash <span class="token operator">=</span> <span class="token function">Hash</span><span class="token punctuation">(</span><span class="token string">&quot;Test message&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="sha256"><a href="#sha256" class="header-anchor">#</a> Sha256 </h3> <p>Retorna el valor hash <strong>SHA256</strong> de una cadena especificada.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>Sha256(val string) string
</code></pre></div><ul><li><p>val</p> <p>Se necesita una cadena de caracteres para la operación de hash Sha256.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> sha string
sha <span class="token operator">=</span> <span class="token function">Sha256</span><span class="token punctuation">(</span><span class="token string">&quot;Test message&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="str"><a href="#str" class="header-anchor">#</a> Str </h3> <p>Convertir un entero <em>int</em> o un número decimal <em>float</em> a una cadena de caracteres.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>Str(val int|float) string
</code></pre></div><ul><li><p>val</p> <p>Número entero o decimal.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>myfloat <span class="token operator">=</span> <span class="token number">5.678</span>
val <span class="token operator">=</span> <span class="token function">Str</span><span class="token punctuation">(</span>myfloat<span class="token punctuation">)</span>
</code></pre></div><h3 id="jsonencode"><a href="#jsonencode" class="header-anchor">#</a> JSONEncode </h3> <p>Convertir números, cadenas o matrices a una cadena de formato JSON.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>JSONEncode(src int|float|string|map|array) string
</code></pre></div><ul><li><p>src</p> <p>Los datos a convertir.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> mydata map
mydata<span class="token punctuation">[</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">var</span> json string
json <span class="token operator">=</span> <span class="token function">JSONEncode</span><span class="token punctuation">(</span>mydata<span class="token punctuation">)</span>
</code></pre></div><h3 id="jsonencodeindent"><a href="#jsonencodeindent" class="header-anchor">#</a> JSONEncodeIndent </h3> <p>Utilice la indentación especificada para convertir números, cadenas o matrices en una cadena con formato JSON.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>JSONEncodeIndent(src int|float|string|map|array, indent string) string
</code></pre></div><ul><li><p>src</p> <p>Gracias por la información.</p></li> <li><p>indent</p> <p>Utilizado como una cadena para la indentación.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> mydata map
mydata<span class="token punctuation">[</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">var</span> json string
json <span class="token operator">=</span> <span class="token function">JSONEncodeIndent</span><span class="token punctuation">(</span>mydata<span class="token punctuation">,</span> <span class="token string">&quot;\t&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="jsondecode"><a href="#jsondecode" class="header-anchor">#</a> JSONDecode </h3> <p>Convertir una cadena en formato JSON a un número, una cadena o un arreglo.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>JSONDecode(src string) int|float|string|map|array
</code></pre></div><ul><li><p>src</p> <p>String que contiene datos en formato JSON.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> mydata map
mydata <span class="token operator">=</span> <span class="token function">JSONDecode</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{&quot;name&quot;: &quot;John Smith&quot;, &quot;company&quot;: &quot;Smith's company&quot;}</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
</code></pre></div><h3 id="hasprefix"><a href="#hasprefix" class="header-anchor">#</a> HasPrefix </h3> <p>Comprueba si una cadena comienza con una cadena especificada.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>HasPrefix(s string, prefix string) bool
</code></pre></div><ul><li><p>s</p> <p>Cadena de caracteres.</p></li> <li><p>prefix</p> <p>Prefijo a verificar.</p></li></ul> <p><strong>Valor de retorno</strong></p> <p>Si una cadena comienza con una cadena especificada, devuelve <code>true</code>.</p> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token function">HasPrefix</span><span class="token punctuation">(</span>$Name<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">my</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="contains"><a href="#contains" class="header-anchor">#</a> Contains </h3> <p>Comprueba si una cadena contiene una subcadena especificada.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>Contains(s string, substr string) bool
</code></pre></div><ul><li><p>s</p> <p>Cadena de caracteres.</p></li> <li><p>substr</p> <p>Subcadena.</p></li></ul> <p><strong>Valor de retorno</strong></p> <p>Si una cadena contiene una subcadena, devuelve <code>true</code>.</p> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token function">Contains</span><span class="token punctuation">(</span>$Name<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">my</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="replace"><a href="#replace" class="header-anchor">#</a> Replace </h3> <p>Reemplaza la cadena &quot;old&quot; (cadena antigua) por &quot;new&quot; (cadena nueva).</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>Replace(s string, old string, new string) string
</code></pre></div><ul><li><p>s</p> <p>La cadena original.</p></li> <li><p>old</p> <p>La subcadena que se va a reemplazar.</p></li> <li><p>new</p> <p>Nueva cadena.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>s <span class="token operator">=</span> <span class="token function">Replace</span><span class="token punctuation">(</span>$Name<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">me</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">you</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
</code></pre></div><h3 id="size"><a href="#size" class="header-anchor">#</a> Size </h3> <p>Devuelve el número de bytes en la cadena especificada.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>Size(val string) int
</code></pre></div><ul><li><p>val</p> <p>Cadena de caracteres.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> len int
len <span class="token operator">=</span> <span class="token function">Size</span><span class="token punctuation">(</span>$Name<span class="token punctuation">)</span>
</code></pre></div><h3 id="sprintf"><a href="#sprintf" class="header-anchor">#</a> Sprintf </h3> <p>Esta función crea una cadena de acuerdo con una plantilla y parámetros especificados.</p> <p>Los comodines disponibles son:</p> <blockquote><ul><li><code>%d</code> (entero)</li> <li><code>%s</code> (cadena de caracteres)</li> <li><code>%f</code> (número de punto flotante)</li> <li><code>%v</code> (cualquier tipo)</li></ul></blockquote> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>Sprintf(pattern string, val ...) string
</code></pre></div><ul><li><p>pattern</p> <p>Plantilla de cadena.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>out <span class="token operator">=</span> <span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;%s=%d&quot;</span><span class="token punctuation">,</span> mypar<span class="token punctuation">,</span> <span class="token number">6448</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="substr"><a href="#substr" class="header-anchor">#</a> Substr </h3> <p>Devuelve una subcadena obtenida de la cadena especificada, comenzando desde el desplazamiento <em>offset</em> (que por defecto comienza en 0) y con una longitud máxima limitada por <em>length</em>.</p> <p>Si el desplazamiento o la longitud son menores que cero, o si el desplazamiento es mayor que el valor de la longitud limitada, se devuelve una cadena vacía.</p> <p>Si la suma del desplazamiento y la longitud limitada es mayor que el número de bytes de la cadena, la subcadena se devolverá desde el desplazamiento hasta el final de la cadena especificada.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>Substr(s string, offset int, length int) string
</code></pre></div><ul><li><p>val</p> <p>Cadena de caracteres.</p></li> <li><p>offset</p> <p>Desplazamiento.</p></li> <li><p>length</p> <p>Longitud límite de subcadenas.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> s string
s <span class="token operator">=</span> <span class="token function">Substr</span><span class="token punctuation">(</span>$Name<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="tolower"><a href="#tolower" class="header-anchor">#</a> ToLower </h3> <p>Devuelve la cadena especificada en minúsculas.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>ToLower(val string) string
</code></pre></div><ul><li><p>val</p> <p>Cadena de caracteres.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>val <span class="token operator">=</span> <span class="token function">ToLower</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
</code></pre></div><h3 id="toupper"><a href="#toupper" class="header-anchor">#</a> ToUpper </h3> <p>Devuelve la cadena especificada en mayúsculas.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>ToUpper(val string) string
</code></pre></div><ul><li><p>val</p> <p>Cadena de caracteres.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>val <span class="token operator">=</span> <span class="token function">ToUpper</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
</code></pre></div><h3 id="trimspace"><a href="#trimspace" class="header-anchor">#</a> TrimSpace </h3> <p>Elimina espacios, tabulaciones y saltos de línea iniciales y finales de la cadena especificada.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>TrimSpace(val string) string
</code></pre></div><ul><li><p>val</p> <p>Cadena de caracteres.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> val string
val <span class="token operator">=</span> <span class="token function">TrimSpace</span><span class="token punctuation">(</span><span class="token string">&quot;  mystr  &quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="floor"><a href="#floor" class="header-anchor">#</a> Floor </h3> <p>Devuelve el valor entero más grande menor o igual que el número, el flotante y la cadena especificados.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>Floor(x float|int|string) int
</code></pre></div><ul><li><p>x</p> <p>Números, flotadores y cadenas.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>val <span class="token operator">=</span> <span class="token function">Floor</span><span class="token punctuation">(</span><span class="token number">5.6</span><span class="token punctuation">)</span> <span class="token comment">// returns 5</span>
</code></pre></div><h3 id="log"><a href="#log" class="header-anchor">#</a> Log </h3> <p>Devuelve el logaritmo natural del número, float y cadena especificados.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>Log(x float|int|string) float
</code></pre></div><ul><li><p>x</p> <p>Números, flotadores y cadenas.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>val <span class="token operator">=</span> <span class="token function">Log</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="log10"><a href="#log10" class="header-anchor">#</a> Log10 </h3> <p>Devuelve el logaritmo en base 10 del número, float y cadena especificados.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>Log10(x float|int|string) float
</code></pre></div><ul><li><p>x</p> <p>Números, flotadores y cadenas.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>val <span class="token operator">=</span> <span class="token function">Log10</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="pow"><a href="#pow" class="header-anchor">#</a> Pow </h3> <p>Devuelve (x^y^), donde y es el exponente en base x.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>Pow(x float|int|string, y float|int|string) float
</code></pre></div><ul><li><p>x</p> <p>base.</p></li> <li><p>y</p> <p>índice.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>val <span class="token operator">=</span> <span class="token function">Pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="round"><a href="#round" class="header-anchor">#</a> Round </h3> <p>Devuelve el valor del número especificado redondeado al entero más cercano.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>Round(x float|int|string) int
</code></pre></div><ul><li><p>x</p> <p>Número.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>val <span class="token operator">=</span> <span class="token function">Round</span><span class="token punctuation">(</span><span class="token number">5.6</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="sqrt"><a href="#sqrt" class="header-anchor">#</a> Sqrt </h3> <p>Devuelve la raíz cuadrada del número especificado.</p> <div class="language-text extra-class"><pre class="language-text"><code>Sqrt(x float|int|string) float
</code></pre></div><ul><li><p>x</p> <p>Número.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>val <span class="token operator">=</span> <span class="token function">Sqrt</span><span class="token punctuation">(</span><span class="token number">225</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="stringtobytes"><a href="#stringtobytes" class="header-anchor">#</a> StringToBytes </h3> <p>Convierte una cadena en bytes.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>StringToBytes(src string) bytes
</code></pre></div><ul><li><p>src</p> <p>Cadena de caracteres.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> b bytes
b <span class="token operator">=</span> <span class="token function">StringToBytes</span><span class="token punctuation">(</span><span class="token string">&quot;my string&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="bytestostring"><a href="#bytestostring" class="header-anchor">#</a> BytesToString </h3> <p>Convierte bytes a cadena.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>BytesToString(src bytes) string
</code></pre></div><ul><li><p>src</p> <p>Byte.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> s string
s <span class="token operator">=</span> <span class="token function">BytesToString</span><span class="token punctuation">(</span>$Bytes<span class="token punctuation">)</span>
</code></pre></div><h3 id="sysparamstring"><a href="#sysparamstring" class="header-anchor">#</a> SysParamString </h3> <p>Devuelve el valor del parámetro de plataforma especificado.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>SysParamString(name string) string
</code></pre></div><ul><li><p>name</p> <p>Nombre del parámetro.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>url <span class="token operator">=</span> <span class="token function">SysParamString</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">blockchain_url</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
</code></pre></div><h3 id="sysparamint"><a href="#sysparamint" class="header-anchor">#</a> SysParamInt </h3> <p>Devuelve el valor del parámetro de plataforma especificado como un número.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>SysParamInt(name string) int
</code></pre></div><ul><li><p>name</p> <p>Nombre del parámetro.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>maxcol <span class="token operator">=</span> <span class="token function">SysParam</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">max_columns</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
</code></pre></div><h3 id="dbupdatesysparam"><a href="#dbupdatesysparam" class="header-anchor">#</a> DBUpdateSysParam </h3> <p>Actualizar valores y condiciones para los parámetros de la plataforma. Si no desea cambiar el valor o la condición, especifique una cadena vacía en el parámetro correspondiente.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>DBUpdateSysParam(name, value, conditions string)
</code></pre></div><ul><li><p>name</p> <p>Nombre del parámetro de la plataforma.</p></li> <li><p>value</p> <p>Nuevo valor de los parámetros.</p></li> <li><p>conditions</p> <p>Nuevas condiciones para cambiar los parámetros.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">DBUpdateSysParam</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">fuel_rate</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">400000000000</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
</code></pre></div><h3 id="updatenotifications"><a href="#updatenotifications" class="header-anchor">#</a> UpdateNotifications </h3> <p>Obtener la lista de notificaciones de una clave específica de la base de datos y enviar las notificaciones obtenidas a Centrifugo.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>UpdateNotifications(ecosystemID int, keys int ...)
</code></pre></div><ul><li><p>ecosystemID</p> <p>ID del ecosistema.</p></li> <li><p>key</p> <p>Lista de direcciones de cuenta, separadas por comas. O puedes usar una matriz para especificar la lista de direcciones de cuenta.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">UpdateNotifications</span><span class="token punctuation">(</span>$ecosystem_id<span class="token punctuation">,</span> $key_id<span class="token punctuation">,</span> <span class="token number">23345355454</span><span class="token punctuation">,</span> <span class="token number">35545454554</span><span class="token punctuation">)</span>
<span class="token function">UpdateNotifications</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>$key_id<span class="token punctuation">,</span> <span class="token number">23345355454</span><span class="token punctuation">,</span> <span class="token number">35545454554</span><span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><h3 id="updaterolesnotifications"><a href="#updaterolesnotifications" class="header-anchor">#</a> UpdateRolesNotifications </h3> <p>Obtener la lista de notificaciones de todas las direcciones de cuenta para el ID de rol especificado en la base de datos y enviar las notificaciones obtenidas a Centrifugo.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>UpdateRolesNotifications(ecosystemID int, roles int ...)
</code></pre></div><ul><li><p>ecosystemID</p> <p>ID del ecosistema.</p></li> <li><p>roles</p> <p>Lista de ID de personajes, separados por comas. O puedes usar un array para especificar la lista de ID de personajes.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">UpdateRolesNotifications</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="httprequest"><a href="#httprequest" class="header-anchor">#</a> HTTPRequest </h3> <p>Envía una solicitud HTTP a la dirección especificada.</p> <div class="language-text extra-class"><pre class="language-text"><code>
Esta función solo está disponible para contratos inteligentes CLB.

</code></pre></div><p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>HTTPRequest(url string, method string, heads map, pars map) string
</code></pre></div><ul><li><p>url</p> <p>Dirección de solicitud enviada.</p></li> <li><p>method</p> <p>Tipo de solicitud (GET o POST).</p></li> <li><p>heads</p> <p>Solicitud de encabezado, Objeto de matriz.</p></li> <li><p>pars</p> <p>Parámetros de solicitud.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> ret string
<span class="token keyword">var</span> ret string 
<span class="token keyword">var</span> ret string
<span class="token keyword">var</span> pars<span class="token punctuation">,</span> heads<span class="token punctuation">,</span> json map
heads<span class="token punctuation">[</span><span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Bearer &quot;</span> <span class="token operator">+</span> $auth_token
pars<span class="token punctuation">[</span><span class="token string">&quot;obs&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;true&quot;</span>
ret <span class="token operator">=</span> <span class="token function">HTTPRequest</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:7079/api/v2/content/page/default_page&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span> heads<span class="token punctuation">,</span> pars<span class="token punctuation">)</span>
json <span class="token operator">=</span> <span class="token function">JSONToMap</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>
</code></pre></div><h3 id="httppostjson"><a href="#httppostjson" class="header-anchor">#</a> HTTPPostJSON </h3> <p>La función es similar a la función <em>HTTPRequest</em>, pero envía una solicitud POST con una cadena como parámetro de solicitud.</p> <div class="language-text extra-class"><pre class="language-text"><code>
La función solo se puede utilizar para contratos inteligentes CLB.

</code></pre></div><p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>HTTPPostJSON(url string, heads map, pars string) string
</code></pre></div><ul><li><p>url</p> <p>Dirección de solicitud enviada.</p></li> <li><p>heads</p> <p>Encabezado, matriz de objetos.</p></li> <li><p>pars</p> <p>Parámetro de solicitud, JSON string.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> ret string
<span class="token keyword">var</span> ret string 
<span class="token keyword">var</span> ret string
<span class="token keyword">var</span> heads<span class="token punctuation">,</span> json map
heads<span class="token punctuation">[</span><span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Bearer &quot;</span> <span class="token operator">+</span> $auth_token
ret <span class="token operator">=</span> <span class="token function">HTTPPostJSON</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:7079/api/v2/content/page/default_page&quot;</span><span class="token punctuation">,</span> heads<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{&quot;obs&quot;:&quot;true&quot;}</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
json <span class="token operator">=</span> <span class="token function">JSONToMap</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>
</code></pre></div><h3 id="blocktime"><a href="#blocktime" class="header-anchor">#</a> BlockTime </h3> <p>Devuelve el tiempo de generación del bloque en formato SQL.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>BlockTime()
</code></pre></div><p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> mytime string
mytime <span class="token operator">=</span> <span class="token function">BlockTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">DBInsert</span><span class="token punctuation">(</span><span class="token string">&quot;mytable&quot;</span><span class="token punctuation">,</span> myid<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">time</span><span class="token operator">:</span> mytime<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="datetime"><a href="#datetime" class="header-anchor">#</a> DateTime </h3> <p>Convertir el timestamp unixtime a una cadena con formato [YYYY-MM-DD HH:MI:SS].</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>DateTime(unixtime int) string
</code></pre></div><p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">DateTime</span><span class="token punctuation">(</span><span class="token number">1532325250</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="unixdatetime"><a href="#unixdatetime" class="header-anchor">#</a> UnixDateTime </h3> <p>Convertir una cadena en formato [YYYY-MM-DD HH:MI:SS] a una marca de tiempo Unix.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>UnixDateTime(datetime string) int
</code></pre></div><p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">UnixDateTime</span><span class="token punctuation">(</span><span class="token string">&quot;2018-07-20 14:23:10&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="createobs"><a href="#createobs" class="header-anchor">#</a> CreateOBS </h3> <p>Create a sub-CLB.</p> <p>Esta función solo puede ser utilizada en el modo CLB principal.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>CreateOBS(OBSName string, DBUser string, DBPassword string, OBSAPIPort int)
</code></pre></div><ul><li><p>OBSName</p> <p>El nombre de CLB.</p></li> <li><p>DBUser</p> <p>El nombre del rol de la base de datos.</p></li> <li><p>DBPassword</p> <p>La contraseña de ese rol.</p></li> <li><p>OBSAPIPort</p> <p>El puerto de solicitud de API.</p></li></ul> <p><strong>Ejemplo</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">CreateOBS</span><span class="token punctuation">(</span><span class="token string">&quot;obsname&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;obsuser&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;obspwd&quot;</span><span class="token punctuation">,</span> <span class="token number">8095</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="getobslist"><a href="#getobslist" class="header-anchor">#</a> GetOBSList </h3> <p>Devolver una lista de sub-CLBs.</p> <p>Esta función solo se puede utilizar en modo CLB maestro.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>GetOBSList()
</code></pre></div><p><strong>Valor de retorno</strong></p> <p>Una matriz de objetos donde la clave es el nombre CLB y el valor es el estado del proceso.</p> <h3 id="runobs"><a href="#runobs" class="header-anchor">#</a> RunOBS </h3> <p>Ejecutar el proceso de CLB.</p> <p>Esta función solo se puede utilizar en modo CLB maestro.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>RunOBS(OBSName string)
</code></pre></div><ul><li><p>OBSName</p> <p>Nombre de CLB.</p> <p>Solo puede contener letras y números, no se pueden usar espacios.</p></li></ul> <h3 id="stopobs"><a href="#stopobs" class="header-anchor">#</a> StopOBS </h3> <p>Detenga el proceso del CLB especificado.</p> <p>Esta función solo se puede utilizar en modo CLB maestro.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>StopOBS(OBSName string)
</code></pre></div><ul><li><p>OBSName</p> <p>Nombre de CLB.</p> <p>Solo puede contener letras y números, no se pueden usar espacios.</p></li></ul> <h3 id="removeobs"><a href="#removeobs" class="header-anchor">#</a> RemoveOBS </h3> <p>Eliminar el proceso de un CLB específico.</p> <p>Esta función solo se puede utilizar en modo CLB maestro.</p> <p><strong>Gramática</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>RemoveOBS(OBSName string)
</code></pre></div><ul><li><p>OBSName</p> <p>Nombre de CLB.</p> <p>Solo puede contener letras y números, no se pueden usar espacios ni símbolos.</p></li></ul> <h2 id="system-contracts"><a href="#system-contracts" class="header-anchor">#</a> System Contracts </h2> <p>El contrato inteligente del sistema se crea automáticamente al iniciar la plataforma de blockchain IBAX. Todos estos contratos inteligentes se crean en el primer ecosistema, por lo que es necesario especificar su nombre completo para llamarlos desde otros ecosistemas, por ejemplo, <code>@1NewContract</code>.</p> <h3 id="newecosystem"><a href="#newecosystem" class="header-anchor">#</a> NewEcosystem </h3> <p>Para crear un nuevo ecosistema, debes hacer referencia al campo <em>result</em> devuelto en <a href="/es/reference/api2.html#txstatus">txstatus</a> para obtener el ID del ecosistema creado.</p> <p>Parámetros:</p> <blockquote><ul><li><em>Name string</em> - El nombre del ecosistema, que puede ser cambiado.</li></ul></blockquote> <h3 id="editecosystemname"><a href="#editecosystemname" class="header-anchor">#</a> EditEcosystemName </h3> <p>Cambiar el nombre del ecosistema en la tabla <em>1_ecosystems</em>, que solo existe en el primer ecosistema.</p> <p>Parámetros:</p> <blockquote><ul><li><em>EcosystemID int</em> - ID del ecosistema al que se le cambiará el nombre;</li> <li><em>NewName string</em> - Nuevo nombre del ecosistema.</li></ul></blockquote> <h3 id="newcontract"><a href="#newcontract" class="header-anchor">#</a> NewContract </h3> <p>Crear un nuevo contrato inteligente en el sistema ecológico actual.</p> <p>Parámetros:</p> <ul><li><em>ApplicationId int</em> - La aplicación a la que pertenece el nuevo contrato inteligente;</li> <li><em>Value string</em> - El código fuente del contrato inteligente, debe haber solo un contrato inteligente en la capa superior;</li> <li><em>Conditions string</em> - Las condiciones para cambiar este contrato inteligente;</li> <li><em>TokenEcosystem int &quot;opcional&quot;</em> - El ID del ecosistema, qué token se utilizará para las transacciones cuando se active el contrato inteligente.</li></ul> <h3 id="editcontract"><a href="#editcontract" class="header-anchor">#</a> EditContract </h3> <p>Editar el contrato inteligente en el ecosistema actual.</p> <p>Parámetros:</p> <blockquote><ul><li><em>Id int</em> - ID del contrato inteligente a cambiar;</li> <li><em>Value string &quot;optional&quot;</em> - Código fuente del contrato inteligente;</li> <li><em>Conditions string &quot;optional&quot;</em> - Condiciones para cambiar este contrato inteligente.</li></ul></blockquote> <h3 id="bindwallet"><a href="#bindwallet" class="header-anchor">#</a> BindWallet </h3> <p>Vincular el contrato inteligente a la dirección de la billetera actual en el ecosistema. Después de vincular el contrato, esta dirección pagará los costos de ejecución del contrato inteligente.
Parámetros:</p> <blockquote><ul><li><em>Id int</em> - ID del contrato inteligente que se va a vincular.</li> <li><em>WalletId string &quot;optional&quot;</em> - Dirección de la billetera a la que se vinculará el contrato inteligente.</li></ul></blockquote> <h3 id="unbindwallet"><a href="#unbindwallet" class="header-anchor">#</a> UnbindWallet </h3> <p>Desvincular la dirección de la billetera del contrato inteligente del sistema actual, solo las direcciones que hayan vinculado ese contrato inteligente podrán desvincularlo. Después de que el contrato inteligente se desvincule, el usuario que lo ejecute pagará la tarifa de ejecución.</p> <p>Parámetros:</p> <blockquote><ul><li><em>Id int</em> - ID del contrato inteligente vinculado.</li></ul></blockquote> <h3 id="newparameter"><a href="#newparameter" class="header-anchor">#</a> Nuevo parámetro </h3> <p>Se agregó un nuevo parámetro del sistema al sistema actual.</p> <p>Parámetros:</p> <blockquote><ul><li><em>Name string</em> - Nombre del parámetro;</li> <li><em>Value string</em> - Valor del parámetro;</li> <li><em>Conditions string</em> - Condiciones para cambiar el parámetro.</li></ul></blockquote> <h3 id="editparameter"><a href="#editparameter" class="header-anchor">#</a> EditParameter </h3> <p>Modificar los parámetros del sistema ecológico existente en el sistema actual.</p> <p>Parámetros:</p> <blockquote><ul><li><em>Name string</em> - Nombre del parámetro a cambiar;</li> <li><em>Value string</em> - Nuevo valor del parámetro;</li> <li><em>Conditions string</em> - Nuevas condiciones para cambiar el parámetro.</li></ul></blockquote> <h3 id="newmenu"><a href="#newmenu" class="header-anchor">#</a> NewMenu </h3> <p>Agregar un nuevo menú al sistema ecológico actual.</p> <p>Parámetros:</p> <blockquote><ul><li><em>Name string</em> - Nombre del menú;</li> <li><em>Value string</em> - Código fuente del menú;</li> <li><em>Title string &quot;optional&quot;</em> - Título del menú;</li> <li><em>Conditions string</em> - Condiciones para cambiar el menú.</li></ul></blockquote> <h3 id="editmenu"><a href="#editmenu" class="header-anchor">#</a> EditMenu </h3> <p>Cambiar el menú existente en el sistema ecológico actual.</p> <p>Parámetros:</p> <blockquote><ul><li><em>Id int</em> - ID del menú que se desea cambiar;</li> <li><em>Value string &quot;optional&quot;</em> - Nuevo código fuente del menú;</li> <li><em>Title string &quot;optional&quot;</em> - Nuevo título del menú;</li> <li><em>Conditions string &quot;optional&quot;</em> - Nuevas condiciones para cambiar el menú.</li></ul></blockquote> <h3 id="appendmenu"><a href="#appendmenu" class="header-anchor">#</a> AppendMenu </h3> <p>Agregar el contenido del código fuente al menú existente en el sistema ecológico actual.</p> <p>Parámetros:</p> <blockquote><ul><li><em>Id int</em> - ID del menú;</li> <li><em>Value string</em> - Código fuente a agregar.</li></ul></blockquote> <h3 id="newpage"><a href="#newpage" class="header-anchor">#</a> NewPage </h3> <p>Agregar una nueva página al ecosistema actual.</p> <p>Parámetros:</p> <blockquote><ul><li><em>Name string</em> - Nombre de la página;</li> <li><em>Value string</em> - Código fuente de la página;</li> <li><em>Menu string</em> - Nombre del menú asociado con la página;</li> <li><em>Conditions string</em> - Condiciones para cambiar la página;</li> <li><em>ValidateCount int &quot;optional&quot;</em> - Número de nodos requeridos para la validación de la página. Si este parámetro no se especifica, se utiliza el valor del parámetro de ecosistema <em>min_page_validate_count</em>. Este valor no puede ser menor que <em>min_page_validate_count</em> y mayor que <em>max_page_validate_count</em>;</li> <li><em>ValidateMode int &quot;optional&quot;</em> - Modo de verificación de validez de la página. Un valor de 0 significa verificar la página cuando se carga. Un valor de 1 significa verificar la página cuando se carga y cuando se sale.</li></ul></blockquote> <h3 id="editpage"><a href="#editpage" class="header-anchor">#</a> EditPage </h3> <p>Modificar la página existente en el sistema actual.</p> <p>Parámetros:</p> <blockquote><ul><li><em>Id int</em> - ID de la página que se desea modificar;</li> <li><em>Value string &quot;optional&quot;</em> - Nuevo código fuente de la página;</li> <li><em>Menu string &quot;optional&quot;</em> - Nuevo nombre del menú asociado a la página;</li> <li><em>Conditions string &quot;optional&quot;</em> - Nuevas condiciones para modificar la página;</li> <li><em>ValidateCount int &quot;optional&quot;</em> - Número de nodos necesarios para validar la página. Si este parámetro no se especifica, se utiliza el valor del parámetro del sistema <em>min_page_validate_count</em>. Este valor no puede ser menor que <em>min_page_validate_count</em> y mayor que <em>max_page_validate_count</em>;</li> <li><em>ValidateMode int &quot;optional&quot;</em> - Modo de validación de la página. El valor 0 indica que se debe validar la página al cargarla. El valor 1 indica que se debe validar la página al cargarla y al salir de ella.</li></ul></blockquote> <h3 id="appendpage"><a href="#appendpage" class="header-anchor">#</a> AppendPage </h3> <p>Agregar el contenido del código fuente a la página existente en el sistema ecológico actual.</p> <p>Parámetros:</p> <blockquote><ul><li><em>Id int</em> - ID de la página que se desea modificar;</li> <li><em>Value string</em> - Código fuente que se desea agregar.</li></ul></blockquote> <h3 id="newblock"><a href="#newblock" class="header-anchor">#</a> NewBlock </h3> <p>Agregar un módulo de página al sistema ecológico actual.</p> <p>Parámetros:</p> <blockquote><ul><li><em>Name string</em> - Nombre del módulo;</li> <li><em>Value string</em> - Código fuente del módulo;</li> <li><em>Conditions string</em> - Condiciones para cambiar el módulo.</li></ul></blockquote> <h3 id="editblock"><a href="#editblock" class="header-anchor">#</a> EditBlock </h3> <p>Cambiar el módulo de página existente en el ecosistema actual.</p> <p>Parámetros</p> <blockquote><ul><li><em>Id int</em> - ID del módulo que se desea cambiar;</li> <li><em>Value string</em> - Nuevo código fuente del módulo;</li> <li><em>Conditions string</em> - Nuevas condiciones para cambiar el módulo.</li></ul></blockquote> <h3 id="newtable"><a href="#newtable" class="header-anchor">#</a> NewTable </h3> <p>Agregar una nueva tabla de datos al ecosistema actual.</p> <p>Parámetros:</p> <ul><li><p><em>ApplicationId int</em> - ID de la aplicación asociada a la tabla de datos;</p></li> <li><p><em>Name string</em> - Nombre de la nueva tabla de datos;</p></li> <li><p><em>Columns string</em> - Matriz de campos en formato JSON <code>[{&quot;name&quot;:&quot;...&quot;, &quot;type&quot;:&quot;...&quot;,&quot;index&quot;: &quot;0&quot;, &quot;conditions&quot;:&quot;...&quot;},...]</code>, donde:</p> <blockquote><ul><li><em>name</em> - Nombre del campo, solo caracteres latinos;</li> <li><em>type</em> - Tipo de datos <code>varchar,bytea,number,datetime,money,text,double,character</code>;</li> <li><em>index</em> - Campo no clave <code>0</code>, clave principal <code>1</code>;</li> <li><em>conditions</em> - Condiciones para cambiar los datos del campo, deben especificarse los permisos de acceso en formato JSON <code>{&quot;update&quot;:&quot;ContractConditions(`MainCondition`)&quot;, &quot;read&quot;:&quot;ContractConditions(`MainCondition`)&quot;}</code>;</li></ul></blockquote></li> <li><p><em>Permissions string</em> - Permisos de acceso en formato JSON <code>{&quot;insert&quot;: &quot;...&quot;, &quot;new_column&quot;: &quot;...&quot;, &quot;update&quot;: &quot;...&quot;, &quot;read&quot;: &quot;...&quot;}</code>.</p> <blockquote><ul><li><em>insert</em> - Permiso para insertar entradas;</li> <li><em>new_column</em> - Permiso para agregar nuevas columnas;</li> <li><em>update</em> - Permiso para cambiar los datos de las entradas;</li> <li><em>read</em> - Permiso para leer los datos de las entradas.</li></ul></blockquote></li></ul> <h3 id="edittable"><a href="#edittable" class="header-anchor">#</a> EditTable </h3> <p>Cambiar los permisos de acceso a la tabla de datos en el ecosistema actual.</p> <p>Parámetros:</p> <blockquote><ul><li><em>Name string</em> - Nombre de la tabla de datos.</li> <li><em>InsertPerm string</em> - Permiso para insertar entradas en la tabla de datos;</li> <li><em>UpdatePerm string</em> - Permiso para actualizar entradas en la tabla;</li> <li><em>ReadPerm string</em> - Permiso para leer entradas en la tabla;</li> <li><em>NewColumnPerm string</em> - Permiso para crear nuevas columnas en la tabla;</li></ul></blockquote> <h3 id="newcolumn"><a href="#newcolumn" class="header-anchor">#</a> NewColumn </h3> <p>Agregar un nuevo campo a la tabla de datos del ecosistema actual.</p> <p>Parámetros:</p> <blockquote><ul><li><em>TableName string</em> - Nombre de la tabla de datos;</li> <li><em>Name string</em> - Nombre del campo de caracteres latinos;</li> <li><em>Type string</em> - Tipo de datos;
<code>varchar,bytea,number,money,datetime,text,double,character</code>;</li> <li><em>UpdatePerm string</em> - Permiso para cambiar el valor en la columna;</li> <li><em>ReadPerm string</em> - Permiso para leer el valor en la columna.</li></ul></blockquote> <h3 id="editcolumn"><a href="#editcolumn" class="header-anchor">#</a> EditColumn </h3> <p>Cambiar los permisos de campo especificados en una tabla de datos en el ecosistema actual.</p> <p>Parámetros:</p> <blockquote><ul><li><em>TableName string</em> - Nombre de la tabla de datos;</li> <li><em>Name string</em> - Nombre del campo de caracteres latinos que se desea cambiar;</li> <li><em>UpdatePerm string</em> - Nuevo permiso para cambiar los valores en la columna;</li> <li><em>ReadPerm string</em> - Nuevo permiso para leer los valores en la columna.</li></ul></blockquote> <h3 id="newlang"><a href="#newlang" class="header-anchor">#</a> NewLang </h3> <p>Agregar recursos multilingües al ecosistema actual, agregando permisos en el parámetro <em>changing_language</em> de los parámetros del sistema.</p> <p>Parámetros:</p> <blockquote><ul><li><em>Name string</em> - El nombre de los recursos multilingües en caracteres latinos;</li> <li><em>Trans string</em> - Una cadena en formato JSON, donde el código de idioma de dos caracteres se utiliza como clave y la cadena de traducción se utiliza como valor. Por ejemplo: <code>{&quot;en&quot;: &quot;English text&quot;, &quot;es&quot;: &quot;texto en español&quot;}</code>.</li></ul></blockquote> <h3 id="editlang"><a href="#editlang" class="header-anchor">#</a> EditLang </h3> <p>Cambiar los recursos de idioma en el sistema ecológico actual. Los permisos de cambio se establecen en el parámetro <em>changing_language</em> de los parámetros del sistema ecológico.</p> <p>Parámetros:</p> <blockquote><ul><li><em>Id int</em> - ID de recursos de idioma múltiple.</li> <li><em>Trans</em> - Cadena de formato JSON, con códigos de idioma de dos caracteres como clave y cadenas de traducción como valor. Por ejemplo, <code>{&quot;en&quot;: &quot;English text&quot;, &quot;es&quot;: &quot;texto en español&quot;</code>。</li></ul></blockquote> <h3 id="import"><a href="#import" class="header-anchor">#</a> Import </h3> <p>Importe la aplicación al ecosistema actual. Importe los datos cargados desde el contrato inteligente <a href="#importupload">ImportUpload</a>.</p> <p>Parámetros:</p> <blockquote><ul><li><em>Data string</em> - Los datos importados en formato de contenido de texto, que provienen de un archivo exportado del ecosistema.</li></ul></blockquote> <h3 id="importupload"><a href="#importupload" class="header-anchor">#</a> ImportUpload </h3> <p>Cargar el archivo de la aplicación externa en la tabla <em>buffer_data</em> del sistema ecológico actual para su posterior importación.</p> <p>Parámetros:</p> <blockquote><ul><li><em>InputFile file</em> - Archivo que se escribirá en la tabla <em>buffer_data</em> del sistema ecológico actual.</li></ul></blockquote> <h3 id="newappparam"><a href="#newappparam" class="header-anchor">#</a> NewAppParam </h3> <p>El ecosistema actual del sistema ha añadido nuevos parámetros de aplicación.</p> <p>Parámetros:</p> <blockquote><ul><li><em>ApplicationId int</em> - ID de la aplicación;</li> <li><em>Name string</em> - Nombre del parámetro;</li> <li><em>Value string</em> - Valor del parámetro;</li> <li><em>Conditions string</em> - Permiso para cambiar el parámetro.</li></ul></blockquote> <h3 id="editappparam"><a href="#editappparam" class="header-anchor">#</a> EditAppParam </h3> <p>Cambiar los parámetros de la aplicación existente en el ecosistema actual.</p> <p>Parámetros:</p> <blockquote><ul><li><em>Id int</em> - ID de parámetro de la aplicación;</li> <li><em>Value string &quot;optional&quot;</em> - Nuevo valor del parámetro;</li> <li><em>Conditions string &quot;optional&quot;</em> - Nuevos permisos para cambiar el parámetro.</li></ul></blockquote> <h3 id="newdelayedcontract"><a href="#newdelayedcontract" class="header-anchor">#</a> NewDelayedContract </h3> <p>Agregar una nueva tarea al proceso de vigilancia del contrato inteligente de programación diferida.</p> <p>El proceso de vigilancia del contrato inteligente de programación diferida ejecuta el contrato inteligente necesario para generar el bloque actual.</p> <p>Parámetros:</p> <blockquote><ul><li><em>Contract string</em> - Nombre del contrato inteligente;</li> <li><em>EveryBlock int</em> - El contrato inteligente se ejecutará después de un número especificado de bloques;</li> <li><em>Conditions string</em> - Permiso para cambiar la tarea;</li> <li><em>BlockID int &quot;optional&quot;</em> - El ID del bloque en el que se iniciará el contrato inteligente. Si no se especifica, se calculará automáticamente como &quot;ID del bloque actual&quot; + <em>EveryBlock</em>;</li> <li><em>Limit int &quot;optional&quot;</em> - El número de veces que se iniciará la tarea. Si no se especifica, la tarea de inicio del contrato inteligente se ejecutará infinitamente.</li></ul></blockquote> <h3 id="editdelayedcontract"><a href="#editdelayedcontract" class="header-anchor">#</a> EditDelayedContract </h3> <p>Modificar la tarea en el proceso de vigilancia del contrato inteligente de programación de retraso.</p> <p>Parámetros:</p> <blockquote><ul><li><em>Id int</em> - ID de la tarea.</li> <li><em>Contract string</em> - Nombre del contrato inteligente.</li> <li><em>EveryBlock int</em> - El contrato inteligente se ejecutará después de un número de bloques especificado;</li> <li><em>Conditions string</em> - Permiso para cambiar la tarea;</li> <li><em>BlockID int &quot;optional&quot;</em> - El ID del bloque en el que se iniciará el contrato inteligente. Si no se especifica, se calculará automáticamente &quot;ID del bloque actual&quot; + <em>EveryBlock</em>;</li> <li><em>Limit int &quot;optional&quot;</em> - El número de veces que se iniciará la tarea. Si no se especifica, la tarea de inicio del contrato inteligente se ejecutará un número ilimitado de veces.</li> <li><em>Deleted int &quot;optional&quot;</em> - Cambio de tarea. El valor de <code>1</code> desactivará la tarea. El valor de <code>0</code> habilitará la tarea.</li></ul></blockquote> <h3 id="uploadbinary"><a href="#uploadbinary" class="header-anchor">#</a> UploadBinary </h3> <p>En la tabla <em>X_binaries</em>, se agrega o sobrescribe un archivo estático. Al llamar al contrato inteligente a través de la API HTTP, el formato de solicitud debe usar <code>multipart/form-data</code>; el parámetro DataMimeType se utilizará junto con los datos del formulario.</p> <p>Parámetros:</p> <blockquote><ul><li><em>Name string</em> - Nombre del archivo estático;</li> <li><em>Data bytes</em> - Contenido del archivo estático;</li> <li><em>DataMimeType string &quot;optional&quot;</em> - <em>mime-type</em> del formato del archivo estático;</li> <li><em>ApplicationId int</em> - Identificación de la aplicación asociada a la tabla <em>X_binaries</em>.</li></ul></blockquote> <p>Si no se pasa el parámetro <em>DataMimeType</em>, se utilizará el formato <code>application/octet-stream</code> por defecto.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/IBAX-io/documentation/edit/master/docs/es/topics/script.md" target="_blank" rel="noopener noreferrer">Edita esta página en GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Última actualización:</span> <span class="time">25/6/2023, 15:46:02</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/es/topics/templates2.html">
        Lenguaje de plantillas 
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8ffd1d30.js" defer></script><script src="/assets/js/2.8d94a0db.js" defer></script><script src="/assets/js/44.6fc1a3ec.js" defer></script>
  </body>
</html>
